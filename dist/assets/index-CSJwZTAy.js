function FS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function US(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xv={exports:{}},xu={},Zv={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zo=Symbol.for("react.element"),$S=Symbol.for("react.portal"),BS=Symbol.for("react.fragment"),zS=Symbol.for("react.strict_mode"),WS=Symbol.for("react.profiler"),HS=Symbol.for("react.provider"),qS=Symbol.for("react.context"),KS=Symbol.for("react.forward_ref"),GS=Symbol.for("react.suspense"),QS=Symbol.for("react.memo"),YS=Symbol.for("react.lazy"),Zm=Symbol.iterator;function JS(t){return t===null||typeof t!="object"?null:(t=Zm&&t[Zm]||t["@@iterator"],typeof t=="function"?t:null)}var e_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},t_=Object.assign,n_={};function fi(t,e,n){this.props=t,this.context=e,this.refs=n_,this.updater=n||e_}fi.prototype.isReactComponent={};fi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function r_(){}r_.prototype=fi.prototype;function Hh(t,e,n){this.props=t,this.context=e,this.refs=n_,this.updater=n||e_}var qh=Hh.prototype=new r_;qh.constructor=Hh;t_(qh,fi.prototype);qh.isPureReactComponent=!0;var eg=Array.isArray,s_=Object.prototype.hasOwnProperty,Kh={current:null},i_={key:!0,ref:!0,__self:!0,__source:!0};function o_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)s_.call(e,r)&&!i_.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Zo,type:t,key:i,ref:o,props:s,_owner:Kh.current}}function XS(t,e){return{$$typeof:Zo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zo}function ZS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tg=/\/+/g;function Pc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ZS(""+t.key):e.toString(36)}function ul(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zo:case $S:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Pc(o,0):r,eg(s)?(n="",t!=null&&(n=t.replace(tg,"$&/")+"/"),ul(s,e,n,"",function(c){return c})):s!=null&&(Gh(s)&&(s=XS(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(tg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",eg(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+Pc(i,a);o+=ul(i,e,n,u,s)}else if(u=JS(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+Pc(i,a++),o+=ul(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fa(t,e,n){if(t==null)return t;var r=[],s=0;return ul(t,r,"","",function(i){return e.call(n,i,s++)}),r}function eT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gt={current:null},cl={transition:null},tT={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:cl,ReactCurrentOwner:Kh};function a_(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Fa,forEach:function(t,e,n){Fa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fa(t,function(){e++}),e},toArray:function(t){return Fa(t,function(e){return e})||[]},only:function(t){if(!Gh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=fi;ne.Fragment=BS;ne.Profiler=WS;ne.PureComponent=Hh;ne.StrictMode=zS;ne.Suspense=GS;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tT;ne.act=a_;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=t_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Kh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)s_.call(e,u)&&!i_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Zo,type:t.type,key:s,ref:i,props:r,_owner:o}};ne.createContext=function(t){return t={$$typeof:qS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:HS,_context:t},t.Consumer=t};ne.createElement=o_;ne.createFactory=function(t){var e=o_.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:KS,render:t}};ne.isValidElement=Gh;ne.lazy=function(t){return{$$typeof:YS,_payload:{_status:-1,_result:t},_init:eT}};ne.memo=function(t,e){return{$$typeof:QS,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=cl.transition;cl.transition={};try{t()}finally{cl.transition=e}};ne.unstable_act=a_;ne.useCallback=function(t,e){return gt.current.useCallback(t,e)};ne.useContext=function(t){return gt.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return gt.current.useDeferredValue(t)};ne.useEffect=function(t,e){return gt.current.useEffect(t,e)};ne.useId=function(){return gt.current.useId()};ne.useImperativeHandle=function(t,e,n){return gt.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return gt.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return gt.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return gt.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return gt.current.useReducer(t,e,n)};ne.useRef=function(t){return gt.current.useRef(t)};ne.useState=function(t){return gt.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return gt.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return gt.current.useTransition()};ne.version="18.3.1";Zv.exports=ne;var O=Zv.exports;const l_=US(O),nT=FS({__proto__:null,default:l_},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT=O,sT=Symbol.for("react.element"),iT=Symbol.for("react.fragment"),oT=Object.prototype.hasOwnProperty,aT=rT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lT={key:!0,ref:!0,__self:!0,__source:!0};function u_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)oT.call(e,r)&&!lT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:sT,type:t,key:i,ref:o,props:s,_owner:aT.current}}xu.Fragment=iT;xu.jsx=u_;xu.jsxs=u_;Xv.exports=xu;var d=Xv.exports,wd={},c_={exports:{}},Nt={},d_={exports:{}},h_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,K){var ee=B.length;B.push(K);e:for(;0<ee;){var te=ee-1>>>1,se=B[te];if(0<s(se,K))B[te]=K,B[ee]=se,ee=te;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var K=B[0],ee=B.pop();if(ee!==K){B[0]=ee;e:for(var te=0,se=B.length,pe=se>>>1;te<pe;){var Ot=2*(te+1)-1,Dt=B[Ot],vn=Ot+1,_n=B[vn];if(0>s(Dt,ee))vn<se&&0>s(_n,Dt)?(B[te]=_n,B[vn]=ee,te=vn):(B[te]=Dt,B[Ot]=ee,te=Ot);else if(vn<se&&0>s(_n,ee))B[te]=_n,B[vn]=ee,te=vn;else break e}}return K}function s(B,K){var ee=B.sortIndex-K.sortIndex;return ee!==0?ee:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],f=1,p=null,g=3,y=!1,_=!1,A=!1,k=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(B){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=B)r(c),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(c)}}function R(B){if(A=!1,T(B),!_)if(n(u)!==null)_=!0,Pe(L);else{var K=n(c);K!==null&&be(R,K.startTime-B)}}function L(B,K){_=!1,A&&(A=!1,I(w),w=-1),y=!0;var ee=g;try{for(T(K),p=n(u);p!==null&&(!(p.expirationTime>K)||B&&!P());){var te=p.callback;if(typeof te=="function"){p.callback=null,g=p.priorityLevel;var se=te(p.expirationTime<=K);K=t.unstable_now(),typeof se=="function"?p.callback=se:p===n(u)&&r(u),T(K)}else r(u);p=n(u)}if(p!==null)var pe=!0;else{var Ot=n(c);Ot!==null&&be(R,Ot.startTime-K),pe=!1}return pe}finally{p=null,g=ee,y=!1}}var M=!1,S=null,w=-1,E=5,b=-1;function P(){return!(t.unstable_now()-b<E)}function N(){if(S!==null){var B=t.unstable_now();b=B;var K=!0;try{K=S(!0,B)}finally{K?C():(M=!1,S=null)}}else M=!1}var C;if(typeof v=="function")C=function(){v(N)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,he=Z.port2;Z.port1.onmessage=N,C=function(){he.postMessage(null)}}else C=function(){k(N,0)};function Pe(B){S=B,M||(M=!0,C())}function be(B,K){w=k(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){_||y||(_=!0,Pe(L))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var ee=g;g=K;try{return B()}finally{g=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ee=g;g=B;try{return K()}finally{g=ee}},t.unstable_scheduleCallback=function(B,K,ee){var te=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?te+ee:te):ee=te,B){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=ee+se,B={id:f++,callback:K,priorityLevel:B,startTime:ee,expirationTime:se,sortIndex:-1},ee>te?(B.sortIndex=ee,e(c,B),n(u)===null&&B===n(c)&&(A?(I(w),w=-1):A=!0,be(R,ee-te))):(B.sortIndex=se,e(u,B),_||y||(_=!0,Pe(L))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var K=g;return function(){var ee=g;g=K;try{return B.apply(this,arguments)}finally{g=ee}}}})(h_);d_.exports=h_;var uT=d_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cT=O,kt=uT;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f_=new Set,So={};function as(t,e){Gs(t,e),Gs(t+"Capture",e)}function Gs(t,e){for(So[t]=e,t=0;t<e.length;t++)f_.add(e[t])}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xd=Object.prototype.hasOwnProperty,dT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ng={},rg={};function hT(t){return xd.call(rg,t)?!0:xd.call(ng,t)?!1:dT.test(t)?rg[t]=!0:(ng[t]=!0,!1)}function fT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pT(t,e,n,r){if(e===null||typeof e>"u"||fT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Je[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qh=/[\-:]([a-z])/g;function Yh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qh,Yh);Je[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qh,Yh);Je[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qh,Yh);Je[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jh(t,e,n,r){var s=Je.hasOwnProperty(e)?Je[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pT(e,n,s,r)&&(n=null),r||s===null?hT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Un=cT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ua=Symbol.for("react.element"),Ts=Symbol.for("react.portal"),Is=Symbol.for("react.fragment"),Xh=Symbol.for("react.strict_mode"),Ed=Symbol.for("react.profiler"),p_=Symbol.for("react.provider"),m_=Symbol.for("react.context"),Zh=Symbol.for("react.forward_ref"),Sd=Symbol.for("react.suspense"),Td=Symbol.for("react.suspense_list"),ef=Symbol.for("react.memo"),Kn=Symbol.for("react.lazy"),g_=Symbol.for("react.offscreen"),sg=Symbol.iterator;function Li(t){return t===null||typeof t!="object"?null:(t=sg&&t[sg]||t["@@iterator"],typeof t=="function"?t:null)}var Te=Object.assign,kc;function Qi(t){if(kc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kc=e&&e[1]||""}return`
`+kc+t}var Nc=!1;function Rc(t,e){if(!t||Nc)return"";Nc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Nc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qi(t):""}function mT(t){switch(t.tag){case 5:return Qi(t.type);case 16:return Qi("Lazy");case 13:return Qi("Suspense");case 19:return Qi("SuspenseList");case 0:case 2:case 15:return t=Rc(t.type,!1),t;case 11:return t=Rc(t.type.render,!1),t;case 1:return t=Rc(t.type,!0),t;default:return""}}function Id(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Is:return"Fragment";case Ts:return"Portal";case Ed:return"Profiler";case Xh:return"StrictMode";case Sd:return"Suspense";case Td:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case m_:return(t.displayName||"Context")+".Consumer";case p_:return(t._context.displayName||"Context")+".Provider";case Zh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ef:return e=t.displayName||null,e!==null?e:Id(t.type)||"Memo";case Kn:e=t._payload,t=t._init;try{return Id(t(e))}catch{}}return null}function gT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Id(e);case 8:return e===Xh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function y_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yT(t){var e=y_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $a(t){t._valueTracker||(t._valueTracker=yT(t))}function v_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=y_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bd(t,e){var n=e.checked;return Te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ig(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function __(t,e){e=e.checked,e!=null&&Jh(t,"checked",e,!1)}function Cd(t,e){__(t,e);var n=vr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ad(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ad(t,e.type,vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function og(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ad(t,e,n){(e!=="number"||Nl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yi=Array.isArray;function Ms(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Pd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ag(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Yi(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vr(n)}}function w_(t,e){var n=vr(e.value),r=vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function lg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function x_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?x_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ba,E_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ba=Ba||document.createElement("div"),Ba.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ba.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function To(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var so={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vT=["Webkit","ms","Moz","O"];Object.keys(so).forEach(function(t){vT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),so[e]=so[t]})});function S_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||so.hasOwnProperty(t)&&so[t]?(""+e).trim():e+"px"}function T_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=S_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var _T=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nd(t,e){if(e){if(_T[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Rd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Od=null;function tf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dd=null,Fs=null,Us=null;function ug(t){if(t=na(t)){if(typeof Dd!="function")throw Error(U(280));var e=t.stateNode;e&&(e=bu(e),Dd(t.stateNode,t.type,e))}}function I_(t){Fs?Us?Us.push(t):Us=[t]:Fs=t}function b_(){if(Fs){var t=Fs,e=Us;if(Us=Fs=null,ug(t),e)for(t=0;t<e.length;t++)ug(e[t])}}function C_(t,e){return t(e)}function A_(){}var Oc=!1;function P_(t,e,n){if(Oc)return t(e,n);Oc=!0;try{return C_(t,e,n)}finally{Oc=!1,(Fs!==null||Us!==null)&&(A_(),b_())}}function Io(t,e){var n=t.stateNode;if(n===null)return null;var r=bu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var jd=!1;if(Nn)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){jd=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{jd=!1}function wT(t,e,n,r,s,i,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var io=!1,Rl=null,Ol=!1,Ld=null,xT={onError:function(t){io=!0,Rl=t}};function ET(t,e,n,r,s,i,o,a,u){io=!1,Rl=null,wT.apply(xT,arguments)}function ST(t,e,n,r,s,i,o,a,u){if(ET.apply(this,arguments),io){if(io){var c=Rl;io=!1,Rl=null}else throw Error(U(198));Ol||(Ol=!0,Ld=c)}}function ls(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function k_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cg(t){if(ls(t)!==t)throw Error(U(188))}function TT(t){var e=t.alternate;if(!e){if(e=ls(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return cg(s),t;if(i===r)return cg(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function N_(t){return t=TT(t),t!==null?R_(t):null}function R_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=R_(t);if(e!==null)return e;t=t.sibling}return null}var O_=kt.unstable_scheduleCallback,dg=kt.unstable_cancelCallback,IT=kt.unstable_shouldYield,bT=kt.unstable_requestPaint,Ne=kt.unstable_now,CT=kt.unstable_getCurrentPriorityLevel,nf=kt.unstable_ImmediatePriority,D_=kt.unstable_UserBlockingPriority,Dl=kt.unstable_NormalPriority,AT=kt.unstable_LowPriority,j_=kt.unstable_IdlePriority,Eu=null,un=null;function PT(t){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Eu,t,void 0,(t.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:RT,kT=Math.log,NT=Math.LN2;function RT(t){return t>>>=0,t===0?32:31-(kT(t)/NT|0)|0}var za=64,Wa=4194304;function Ji(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ji(a):(i&=o,i!==0&&(r=Ji(i)))}else o=n&~s,o!==0?r=Ji(o):i!==0&&(r=Ji(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yt(e),s=1<<n,r|=t[n],e&=~s;return r}function OT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Yt(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=OT(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function Vd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function L_(){var t=za;return za<<=1,!(za&4194240)&&(za=64),t}function Dc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ea(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yt(e),t[e]=n}function jT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Yt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function rf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var de=0;function V_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var M_,sf,F_,U_,$_,Md=!1,Ha=[],or=null,ar=null,lr=null,bo=new Map,Co=new Map,Qn=[],LT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hg(t,e){switch(t){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":bo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Co.delete(e.pointerId)}}function Mi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=na(e),e!==null&&sf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function VT(t,e,n,r,s){switch(e){case"focusin":return or=Mi(or,t,e,n,r,s),!0;case"dragenter":return ar=Mi(ar,t,e,n,r,s),!0;case"mouseover":return lr=Mi(lr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return bo.set(i,Mi(bo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Co.set(i,Mi(Co.get(i)||null,t,e,n,r,s)),!0}return!1}function B_(t){var e=$r(t.target);if(e!==null){var n=ls(e);if(n!==null){if(e=n.tag,e===13){if(e=k_(n),e!==null){t.blockedOn=e,$_(t.priority,function(){F_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function dl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Od=r,n.target.dispatchEvent(r),Od=null}else return e=na(n),e!==null&&sf(e),t.blockedOn=n,!1;e.shift()}return!0}function fg(t,e,n){dl(t)&&n.delete(e)}function MT(){Md=!1,or!==null&&dl(or)&&(or=null),ar!==null&&dl(ar)&&(ar=null),lr!==null&&dl(lr)&&(lr=null),bo.forEach(fg),Co.forEach(fg)}function Fi(t,e){t.blockedOn===e&&(t.blockedOn=null,Md||(Md=!0,kt.unstable_scheduleCallback(kt.unstable_NormalPriority,MT)))}function Ao(t){function e(s){return Fi(s,t)}if(0<Ha.length){Fi(Ha[0],t);for(var n=1;n<Ha.length;n++){var r=Ha[n];r.blockedOn===t&&(r.blockedOn=null)}}for(or!==null&&Fi(or,t),ar!==null&&Fi(ar,t),lr!==null&&Fi(lr,t),bo.forEach(e),Co.forEach(e),n=0;n<Qn.length;n++)r=Qn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qn.length&&(n=Qn[0],n.blockedOn===null);)B_(n),n.blockedOn===null&&Qn.shift()}var $s=Un.ReactCurrentBatchConfig,Ll=!0;function FT(t,e,n,r){var s=de,i=$s.transition;$s.transition=null;try{de=1,of(t,e,n,r)}finally{de=s,$s.transition=i}}function UT(t,e,n,r){var s=de,i=$s.transition;$s.transition=null;try{de=4,of(t,e,n,r)}finally{de=s,$s.transition=i}}function of(t,e,n,r){if(Ll){var s=Fd(t,e,n,r);if(s===null)Wc(t,e,r,Vl,n),hg(t,r);else if(VT(s,t,e,n,r))r.stopPropagation();else if(hg(t,r),e&4&&-1<LT.indexOf(t)){for(;s!==null;){var i=na(s);if(i!==null&&M_(i),i=Fd(t,e,n,r),i===null&&Wc(t,e,r,Vl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Wc(t,e,r,null,n)}}var Vl=null;function Fd(t,e,n,r){if(Vl=null,t=tf(r),t=$r(t),t!==null)if(e=ls(t),e===null)t=null;else if(n=e.tag,n===13){if(t=k_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vl=t,null}function z_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CT()){case nf:return 1;case D_:return 4;case Dl:case AT:return 16;case j_:return 536870912;default:return 16}default:return 16}}var tr=null,af=null,hl=null;function W_(){if(hl)return hl;var t,e=af,n=e.length,r,s="value"in tr?tr.value:tr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return hl=s.slice(t,1<r?1-r:void 0)}function fl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qa(){return!0}function pg(){return!1}function Rt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qa:pg,this.isPropagationStopped=pg,this}return Te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qa)},persist:function(){},isPersistent:qa}),e}var pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lf=Rt(pi),ta=Te({},pi,{view:0,detail:0}),$T=Rt(ta),jc,Lc,Ui,Su=Te({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ui&&(Ui&&t.type==="mousemove"?(jc=t.screenX-Ui.screenX,Lc=t.screenY-Ui.screenY):Lc=jc=0,Ui=t),jc)},movementY:function(t){return"movementY"in t?t.movementY:Lc}}),mg=Rt(Su),BT=Te({},Su,{dataTransfer:0}),zT=Rt(BT),WT=Te({},ta,{relatedTarget:0}),Vc=Rt(WT),HT=Te({},pi,{animationName:0,elapsedTime:0,pseudoElement:0}),qT=Rt(HT),KT=Te({},pi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),GT=Rt(KT),QT=Te({},pi,{data:0}),gg=Rt(QT),YT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=XT[t])?!!e[t]:!1}function uf(){return ZT}var eI=Te({},ta,{key:function(t){if(t.key){var e=YT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uf,charCode:function(t){return t.type==="keypress"?fl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tI=Rt(eI),nI=Te({},Su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yg=Rt(nI),rI=Te({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uf}),sI=Rt(rI),iI=Te({},pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),oI=Rt(iI),aI=Te({},Su,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lI=Rt(aI),uI=[9,13,27,32],cf=Nn&&"CompositionEvent"in window,oo=null;Nn&&"documentMode"in document&&(oo=document.documentMode);var cI=Nn&&"TextEvent"in window&&!oo,H_=Nn&&(!cf||oo&&8<oo&&11>=oo),vg=" ",_g=!1;function q_(t,e){switch(t){case"keyup":return uI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function K_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bs=!1;function dI(t,e){switch(t){case"compositionend":return K_(e);case"keypress":return e.which!==32?null:(_g=!0,vg);case"textInput":return t=e.data,t===vg&&_g?null:t;default:return null}}function hI(t,e){if(bs)return t==="compositionend"||!cf&&q_(t,e)?(t=W_(),hl=af=tr=null,bs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return H_&&e.locale!=="ko"?null:e.data;default:return null}}var fI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!fI[t.type]:e==="textarea"}function G_(t,e,n,r){I_(r),e=Ml(e,"onChange"),0<e.length&&(n=new lf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ao=null,Po=null;function pI(t){iw(t,0)}function Tu(t){var e=Ps(t);if(v_(e))return t}function mI(t,e){if(t==="change")return e}var Q_=!1;if(Nn){var Mc;if(Nn){var Fc="oninput"in document;if(!Fc){var xg=document.createElement("div");xg.setAttribute("oninput","return;"),Fc=typeof xg.oninput=="function"}Mc=Fc}else Mc=!1;Q_=Mc&&(!document.documentMode||9<document.documentMode)}function Eg(){ao&&(ao.detachEvent("onpropertychange",Y_),Po=ao=null)}function Y_(t){if(t.propertyName==="value"&&Tu(Po)){var e=[];G_(e,Po,t,tf(t)),P_(pI,e)}}function gI(t,e,n){t==="focusin"?(Eg(),ao=e,Po=n,ao.attachEvent("onpropertychange",Y_)):t==="focusout"&&Eg()}function yI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tu(Po)}function vI(t,e){if(t==="click")return Tu(e)}function _I(t,e){if(t==="input"||t==="change")return Tu(e)}function wI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zt=typeof Object.is=="function"?Object.is:wI;function ko(t,e){if(Zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!xd.call(e,s)||!Zt(t[s],e[s]))return!1}return!0}function Sg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tg(t,e){var n=Sg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sg(n)}}function J_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?J_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function X_(){for(var t=window,e=Nl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nl(t.document)}return e}function df(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xI(t){var e=X_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&J_(n.ownerDocument.documentElement,n)){if(r!==null&&df(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Tg(n,i);var o=Tg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var EI=Nn&&"documentMode"in document&&11>=document.documentMode,Cs=null,Ud=null,lo=null,$d=!1;function Ig(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$d||Cs==null||Cs!==Nl(r)||(r=Cs,"selectionStart"in r&&df(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lo&&ko(lo,r)||(lo=r,r=Ml(Ud,"onSelect"),0<r.length&&(e=new lf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Cs)))}function Ka(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var As={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionend:Ka("Transition","TransitionEnd")},Uc={},Z_={};Nn&&(Z_=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function Iu(t){if(Uc[t])return Uc[t];if(!As[t])return t;var e=As[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Z_)return Uc[t]=e[n];return t}var ew=Iu("animationend"),tw=Iu("animationiteration"),nw=Iu("animationstart"),rw=Iu("transitionend"),sw=new Map,bg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(t,e){sw.set(t,e),as(e,[t])}for(var $c=0;$c<bg.length;$c++){var Bc=bg[$c],SI=Bc.toLowerCase(),TI=Bc[0].toUpperCase()+Bc.slice(1);Tr(SI,"on"+TI)}Tr(ew,"onAnimationEnd");Tr(tw,"onAnimationIteration");Tr(nw,"onAnimationStart");Tr("dblclick","onDoubleClick");Tr("focusin","onFocus");Tr("focusout","onBlur");Tr(rw,"onTransitionEnd");Gs("onMouseEnter",["mouseout","mouseover"]);Gs("onMouseLeave",["mouseout","mouseover"]);Gs("onPointerEnter",["pointerout","pointerover"]);Gs("onPointerLeave",["pointerout","pointerover"]);as("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));as("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));as("onBeforeInput",["compositionend","keypress","textInput","paste"]);as("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));as("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));as("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),II=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xi));function Cg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ST(r,e,void 0,t),t.currentTarget=null}function iw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;Cg(s,a,c),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;Cg(s,a,c),i=u}}}if(Ol)throw t=Ld,Ol=!1,Ld=null,t}function _e(t,e){var n=e[qd];n===void 0&&(n=e[qd]=new Set);var r=t+"__bubble";n.has(r)||(ow(e,t,2,!1),n.add(r))}function zc(t,e,n){var r=0;e&&(r|=4),ow(n,t,r,e)}var Ga="_reactListening"+Math.random().toString(36).slice(2);function No(t){if(!t[Ga]){t[Ga]=!0,f_.forEach(function(n){n!=="selectionchange"&&(II.has(n)||zc(n,!1,t),zc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ga]||(e[Ga]=!0,zc("selectionchange",!1,e))}}function ow(t,e,n,r){switch(z_(e)){case 1:var s=FT;break;case 4:s=UT;break;default:s=of}n=s.bind(null,e,n,t),s=void 0,!jd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=$r(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}P_(function(){var c=i,f=tf(n),p=[];e:{var g=sw.get(t);if(g!==void 0){var y=lf,_=t;switch(t){case"keypress":if(fl(n)===0)break e;case"keydown":case"keyup":y=tI;break;case"focusin":_="focus",y=Vc;break;case"focusout":_="blur",y=Vc;break;case"beforeblur":case"afterblur":y=Vc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=mg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=zT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=sI;break;case ew:case tw:case nw:y=qT;break;case rw:y=oI;break;case"scroll":y=$T;break;case"wheel":y=lI;break;case"copy":case"cut":case"paste":y=GT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=yg}var A=(e&4)!==0,k=!A&&t==="scroll",I=A?g!==null?g+"Capture":null:g;A=[];for(var v=c,T;v!==null;){T=v;var R=T.stateNode;if(T.tag===5&&R!==null&&(T=R,I!==null&&(R=Io(v,I),R!=null&&A.push(Ro(v,R,T)))),k)break;v=v.return}0<A.length&&(g=new y(g,_,null,n,f),p.push({event:g,listeners:A}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==Od&&(_=n.relatedTarget||n.fromElement)&&($r(_)||_[Rn]))break e;if((y||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,y?(_=n.relatedTarget||n.toElement,y=c,_=_?$r(_):null,_!==null&&(k=ls(_),_!==k||_.tag!==5&&_.tag!==6)&&(_=null)):(y=null,_=c),y!==_)){if(A=mg,R="onMouseLeave",I="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=yg,R="onPointerLeave",I="onPointerEnter",v="pointer"),k=y==null?g:Ps(y),T=_==null?g:Ps(_),g=new A(R,v+"leave",y,n,f),g.target=k,g.relatedTarget=T,R=null,$r(f)===c&&(A=new A(I,v+"enter",_,n,f),A.target=T,A.relatedTarget=k,R=A),k=R,y&&_)t:{for(A=y,I=_,v=0,T=A;T;T=ws(T))v++;for(T=0,R=I;R;R=ws(R))T++;for(;0<v-T;)A=ws(A),v--;for(;0<T-v;)I=ws(I),T--;for(;v--;){if(A===I||I!==null&&A===I.alternate)break t;A=ws(A),I=ws(I)}A=null}else A=null;y!==null&&Ag(p,g,y,A,!1),_!==null&&k!==null&&Ag(p,k,_,A,!0)}}e:{if(g=c?Ps(c):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var L=mI;else if(wg(g))if(Q_)L=_I;else{L=yI;var M=gI}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=vI);if(L&&(L=L(t,c))){G_(p,L,n,f);break e}M&&M(t,g,c),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&Ad(g,"number",g.value)}switch(M=c?Ps(c):window,t){case"focusin":(wg(M)||M.contentEditable==="true")&&(Cs=M,Ud=c,lo=null);break;case"focusout":lo=Ud=Cs=null;break;case"mousedown":$d=!0;break;case"contextmenu":case"mouseup":case"dragend":$d=!1,Ig(p,n,f);break;case"selectionchange":if(EI)break;case"keydown":case"keyup":Ig(p,n,f)}var S;if(cf)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else bs?q_(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(H_&&n.locale!=="ko"&&(bs||w!=="onCompositionStart"?w==="onCompositionEnd"&&bs&&(S=W_()):(tr=f,af="value"in tr?tr.value:tr.textContent,bs=!0)),M=Ml(c,w),0<M.length&&(w=new gg(w,t,null,n,f),p.push({event:w,listeners:M}),S?w.data=S:(S=K_(n),S!==null&&(w.data=S)))),(S=cI?dI(t,n):hI(t,n))&&(c=Ml(c,"onBeforeInput"),0<c.length&&(f=new gg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:c}),f.data=S))}iw(p,e)})}function Ro(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ml(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Io(t,n),i!=null&&r.unshift(Ro(t,i,s)),i=Io(t,e),i!=null&&r.push(Ro(t,i,s))),t=t.return}return r}function ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ag(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,s?(u=Io(n,i),u!=null&&o.unshift(Ro(n,u,a))):s||(u=Io(n,i),u!=null&&o.push(Ro(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bI=/\r\n?/g,CI=/\u0000|\uFFFD/g;function Pg(t){return(typeof t=="string"?t:""+t).replace(bI,`
`).replace(CI,"")}function Qa(t,e,n){if(e=Pg(e),Pg(t)!==e&&n)throw Error(U(425))}function Fl(){}var Bd=null,zd=null;function Wd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hd=typeof setTimeout=="function"?setTimeout:void 0,AI=typeof clearTimeout=="function"?clearTimeout:void 0,kg=typeof Promise=="function"?Promise:void 0,PI=typeof queueMicrotask=="function"?queueMicrotask:typeof kg<"u"?function(t){return kg.resolve(null).then(t).catch(kI)}:Hd;function kI(t){setTimeout(function(){throw t})}function Hc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ao(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ao(e)}function ur(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ng(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mi=Math.random().toString(36).slice(2),an="__reactFiber$"+mi,Oo="__reactProps$"+mi,Rn="__reactContainer$"+mi,qd="__reactEvents$"+mi,NI="__reactListeners$"+mi,RI="__reactHandles$"+mi;function $r(t){var e=t[an];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Rn]||n[an]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ng(t);t!==null;){if(n=t[an])return n;t=Ng(t)}return e}t=n,n=t.parentNode}return null}function na(t){return t=t[an]||t[Rn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ps(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function bu(t){return t[Oo]||null}var Kd=[],ks=-1;function Ir(t){return{current:t}}function we(t){0>ks||(t.current=Kd[ks],Kd[ks]=null,ks--)}function ye(t,e){ks++,Kd[ks]=t.current,t.current=e}var _r={},ut=Ir(_r),xt=Ir(!1),Qr=_r;function Qs(t,e){var n=t.type.contextTypes;if(!n)return _r;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Et(t){return t=t.childContextTypes,t!=null}function Ul(){we(xt),we(ut)}function Rg(t,e,n){if(ut.current!==_r)throw Error(U(168));ye(ut,e),ye(xt,n)}function aw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,gT(t)||"Unknown",s));return Te({},n,r)}function $l(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_r,Qr=ut.current,ye(ut,t),ye(xt,xt.current),!0}function Og(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=aw(t,e,Qr),r.__reactInternalMemoizedMergedChildContext=t,we(xt),we(ut),ye(ut,t)):we(xt),ye(xt,n)}var Sn=null,Cu=!1,qc=!1;function lw(t){Sn===null?Sn=[t]:Sn.push(t)}function OI(t){Cu=!0,lw(t)}function br(){if(!qc&&Sn!==null){qc=!0;var t=0,e=de;try{var n=Sn;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sn=null,Cu=!1}catch(s){throw Sn!==null&&(Sn=Sn.slice(t+1)),O_(nf,br),s}finally{de=e,qc=!1}}return null}var Ns=[],Rs=0,Bl=null,zl=0,Lt=[],Vt=0,Yr=null,In=1,bn="";function Mr(t,e){Ns[Rs++]=zl,Ns[Rs++]=Bl,Bl=t,zl=e}function uw(t,e,n){Lt[Vt++]=In,Lt[Vt++]=bn,Lt[Vt++]=Yr,Yr=t;var r=In;t=bn;var s=32-Yt(r)-1;r&=~(1<<s),n+=1;var i=32-Yt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,In=1<<32-Yt(e)+s|n<<s|r,bn=i+t}else In=1<<i|n<<s|r,bn=t}function hf(t){t.return!==null&&(Mr(t,1),uw(t,1,0))}function ff(t){for(;t===Bl;)Bl=Ns[--Rs],Ns[Rs]=null,zl=Ns[--Rs],Ns[Rs]=null;for(;t===Yr;)Yr=Lt[--Vt],Lt[Vt]=null,bn=Lt[--Vt],Lt[Vt]=null,In=Lt[--Vt],Lt[Vt]=null}var At=null,bt=null,xe=!1,Gt=null;function cw(t,e){var n=Ft(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Dg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,At=t,bt=ur(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,At=t,bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yr!==null?{id:In,overflow:bn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ft(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,At=t,bt=null,!0):!1;default:return!1}}function Gd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qd(t){if(xe){var e=bt;if(e){var n=e;if(!Dg(t,e)){if(Gd(t))throw Error(U(418));e=ur(n.nextSibling);var r=At;e&&Dg(t,e)?cw(r,n):(t.flags=t.flags&-4097|2,xe=!1,At=t)}}else{if(Gd(t))throw Error(U(418));t.flags=t.flags&-4097|2,xe=!1,At=t}}}function jg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;At=t}function Ya(t){if(t!==At)return!1;if(!xe)return jg(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wd(t.type,t.memoizedProps)),e&&(e=bt)){if(Gd(t))throw dw(),Error(U(418));for(;e;)cw(t,e),e=ur(e.nextSibling)}if(jg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bt=ur(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bt=null}}else bt=At?ur(t.stateNode.nextSibling):null;return!0}function dw(){for(var t=bt;t;)t=ur(t.nextSibling)}function Ys(){bt=At=null,xe=!1}function pf(t){Gt===null?Gt=[t]:Gt.push(t)}var DI=Un.ReactCurrentBatchConfig;function $i(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Ja(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Lg(t){var e=t._init;return e(t._payload)}function hw(t){function e(I,v){if(t){var T=I.deletions;T===null?(I.deletions=[v],I.flags|=16):T.push(v)}}function n(I,v){if(!t)return null;for(;v!==null;)e(I,v),v=v.sibling;return null}function r(I,v){for(I=new Map;v!==null;)v.key!==null?I.set(v.key,v):I.set(v.index,v),v=v.sibling;return I}function s(I,v){return I=fr(I,v),I.index=0,I.sibling=null,I}function i(I,v,T){return I.index=T,t?(T=I.alternate,T!==null?(T=T.index,T<v?(I.flags|=2,v):T):(I.flags|=2,v)):(I.flags|=1048576,v)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function a(I,v,T,R){return v===null||v.tag!==6?(v=Zc(T,I.mode,R),v.return=I,v):(v=s(v,T),v.return=I,v)}function u(I,v,T,R){var L=T.type;return L===Is?f(I,v,T.props.children,R,T.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Kn&&Lg(L)===v.type)?(R=s(v,T.props),R.ref=$i(I,v,T),R.return=I,R):(R=wl(T.type,T.key,T.props,null,I.mode,R),R.ref=$i(I,v,T),R.return=I,R)}function c(I,v,T,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==T.containerInfo||v.stateNode.implementation!==T.implementation?(v=ed(T,I.mode,R),v.return=I,v):(v=s(v,T.children||[]),v.return=I,v)}function f(I,v,T,R,L){return v===null||v.tag!==7?(v=qr(T,I.mode,R,L),v.return=I,v):(v=s(v,T),v.return=I,v)}function p(I,v,T){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Zc(""+v,I.mode,T),v.return=I,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ua:return T=wl(v.type,v.key,v.props,null,I.mode,T),T.ref=$i(I,null,v),T.return=I,T;case Ts:return v=ed(v,I.mode,T),v.return=I,v;case Kn:var R=v._init;return p(I,R(v._payload),T)}if(Yi(v)||Li(v))return v=qr(v,I.mode,T,null),v.return=I,v;Ja(I,v)}return null}function g(I,v,T,R){var L=v!==null?v.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:a(I,v,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ua:return T.key===L?u(I,v,T,R):null;case Ts:return T.key===L?c(I,v,T,R):null;case Kn:return L=T._init,g(I,v,L(T._payload),R)}if(Yi(T)||Li(T))return L!==null?null:f(I,v,T,R,null);Ja(I,T)}return null}function y(I,v,T,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return I=I.get(T)||null,a(v,I,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ua:return I=I.get(R.key===null?T:R.key)||null,u(v,I,R,L);case Ts:return I=I.get(R.key===null?T:R.key)||null,c(v,I,R,L);case Kn:var M=R._init;return y(I,v,T,M(R._payload),L)}if(Yi(R)||Li(R))return I=I.get(T)||null,f(v,I,R,L,null);Ja(v,R)}return null}function _(I,v,T,R){for(var L=null,M=null,S=v,w=v=0,E=null;S!==null&&w<T.length;w++){S.index>w?(E=S,S=null):E=S.sibling;var b=g(I,S,T[w],R);if(b===null){S===null&&(S=E);break}t&&S&&b.alternate===null&&e(I,S),v=i(b,v,w),M===null?L=b:M.sibling=b,M=b,S=E}if(w===T.length)return n(I,S),xe&&Mr(I,w),L;if(S===null){for(;w<T.length;w++)S=p(I,T[w],R),S!==null&&(v=i(S,v,w),M===null?L=S:M.sibling=S,M=S);return xe&&Mr(I,w),L}for(S=r(I,S);w<T.length;w++)E=y(S,I,w,T[w],R),E!==null&&(t&&E.alternate!==null&&S.delete(E.key===null?w:E.key),v=i(E,v,w),M===null?L=E:M.sibling=E,M=E);return t&&S.forEach(function(P){return e(I,P)}),xe&&Mr(I,w),L}function A(I,v,T,R){var L=Li(T);if(typeof L!="function")throw Error(U(150));if(T=L.call(T),T==null)throw Error(U(151));for(var M=L=null,S=v,w=v=0,E=null,b=T.next();S!==null&&!b.done;w++,b=T.next()){S.index>w?(E=S,S=null):E=S.sibling;var P=g(I,S,b.value,R);if(P===null){S===null&&(S=E);break}t&&S&&P.alternate===null&&e(I,S),v=i(P,v,w),M===null?L=P:M.sibling=P,M=P,S=E}if(b.done)return n(I,S),xe&&Mr(I,w),L;if(S===null){for(;!b.done;w++,b=T.next())b=p(I,b.value,R),b!==null&&(v=i(b,v,w),M===null?L=b:M.sibling=b,M=b);return xe&&Mr(I,w),L}for(S=r(I,S);!b.done;w++,b=T.next())b=y(S,I,w,b.value,R),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?w:b.key),v=i(b,v,w),M===null?L=b:M.sibling=b,M=b);return t&&S.forEach(function(N){return e(I,N)}),xe&&Mr(I,w),L}function k(I,v,T,R){if(typeof T=="object"&&T!==null&&T.type===Is&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Ua:e:{for(var L=T.key,M=v;M!==null;){if(M.key===L){if(L=T.type,L===Is){if(M.tag===7){n(I,M.sibling),v=s(M,T.props.children),v.return=I,I=v;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Kn&&Lg(L)===M.type){n(I,M.sibling),v=s(M,T.props),v.ref=$i(I,M,T),v.return=I,I=v;break e}n(I,M);break}else e(I,M);M=M.sibling}T.type===Is?(v=qr(T.props.children,I.mode,R,T.key),v.return=I,I=v):(R=wl(T.type,T.key,T.props,null,I.mode,R),R.ref=$i(I,v,T),R.return=I,I=R)}return o(I);case Ts:e:{for(M=T.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===T.containerInfo&&v.stateNode.implementation===T.implementation){n(I,v.sibling),v=s(v,T.children||[]),v.return=I,I=v;break e}else{n(I,v);break}else e(I,v);v=v.sibling}v=ed(T,I.mode,R),v.return=I,I=v}return o(I);case Kn:return M=T._init,k(I,v,M(T._payload),R)}if(Yi(T))return _(I,v,T,R);if(Li(T))return A(I,v,T,R);Ja(I,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,v!==null&&v.tag===6?(n(I,v.sibling),v=s(v,T),v.return=I,I=v):(n(I,v),v=Zc(T,I.mode,R),v.return=I,I=v),o(I)):n(I,v)}return k}var Js=hw(!0),fw=hw(!1),Wl=Ir(null),Hl=null,Os=null,mf=null;function gf(){mf=Os=Hl=null}function yf(t){var e=Wl.current;we(Wl),t._currentValue=e}function Yd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bs(t,e){Hl=t,mf=Os=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wt=!0),t.firstContext=null)}function $t(t){var e=t._currentValue;if(mf!==t)if(t={context:t,memoizedValue:e,next:null},Os===null){if(Hl===null)throw Error(U(308));Os=t,Hl.dependencies={lanes:0,firstContext:t}}else Os=Os.next=t;return e}var Br=null;function vf(t){Br===null?Br=[t]:Br.push(t)}function pw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,vf(e)):(n.next=s.next,s.next=n),e.interleaved=n,On(t,r)}function On(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gn=!1;function _f(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,On(t,n)}return s=r.interleaved,s===null?(e.next=e,vf(r)):(e.next=s.next,s.next=e),r.interleaved=e,On(t,n)}function pl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rf(t,n)}}function Vg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ql(t,e,n,r){var s=t.updateQueue;Gn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=c=u=null,a=i;do{var g=a.lane,y=a.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,A=a;switch(g=e,y=n,A.tag){case 1:if(_=A.payload,typeof _=="function"){p=_.call(y,p,g);break e}p=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=A.payload,g=typeof _=="function"?_.call(y,p,g):_,g==null)break e;p=Te({},p,g);break e;case 2:Gn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else y={eventTime:y,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=y,u=p):f=f.next=y,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Xr|=o,t.lanes=o,t.memoizedState=p}}function Mg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var ra={},cn=Ir(ra),Do=Ir(ra),jo=Ir(ra);function zr(t){if(t===ra)throw Error(U(174));return t}function wf(t,e){switch(ye(jo,e),ye(Do,t),ye(cn,ra),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kd(e,t)}we(cn),ye(cn,e)}function Xs(){we(cn),we(Do),we(jo)}function gw(t){zr(jo.current);var e=zr(cn.current),n=kd(e,t.type);e!==n&&(ye(Do,t),ye(cn,n))}function xf(t){Do.current===t&&(we(cn),we(Do))}var Ee=Ir(0);function Kl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kc=[];function Ef(){for(var t=0;t<Kc.length;t++)Kc[t]._workInProgressVersionPrimary=null;Kc.length=0}var ml=Un.ReactCurrentDispatcher,Gc=Un.ReactCurrentBatchConfig,Jr=0,Se=null,Me=null,$e=null,Gl=!1,uo=!1,Lo=0,jI=0;function nt(){throw Error(U(321))}function Sf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zt(t[n],e[n]))return!1;return!0}function Tf(t,e,n,r,s,i){if(Jr=i,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ml.current=t===null||t.memoizedState===null?FI:UI,t=n(r,s),uo){i=0;do{if(uo=!1,Lo=0,25<=i)throw Error(U(301));i+=1,$e=Me=null,e.updateQueue=null,ml.current=$I,t=n(r,s)}while(uo)}if(ml.current=Ql,e=Me!==null&&Me.next!==null,Jr=0,$e=Me=Se=null,Gl=!1,e)throw Error(U(300));return t}function If(){var t=Lo!==0;return Lo=0,t}function on(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Se.memoizedState=$e=t:$e=$e.next=t,$e}function Bt(){if(Me===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var e=$e===null?Se.memoizedState:$e.next;if(e!==null)$e=e,Me=t;else{if(t===null)throw Error(U(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},$e===null?Se.memoizedState=$e=t:$e=$e.next=t}return $e}function Vo(t,e){return typeof e=="function"?e(t):e}function Qc(t){var e=Bt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Me,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,c=i;do{var f=c.lane;if((Jr&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=p,o=r):u=u.next=p,Se.lanes|=f,Xr|=f}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=a,Zt(r,e.memoizedState)||(wt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Se.lanes|=i,Xr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yc(t){var e=Bt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Zt(i,e.memoizedState)||(wt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function yw(){}function vw(t,e){var n=Se,r=Bt(),s=e(),i=!Zt(r.memoizedState,s);if(i&&(r.memoizedState=s,wt=!0),r=r.queue,bf(xw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,Mo(9,ww.bind(null,n,r,s,e),void 0,null),ze===null)throw Error(U(349));Jr&30||_w(n,e,s)}return s}function _w(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ww(t,e,n,r){e.value=n,e.getSnapshot=r,Ew(e)&&Sw(t)}function xw(t,e,n){return n(function(){Ew(e)&&Sw(t)})}function Ew(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zt(t,n)}catch{return!0}}function Sw(t){var e=On(t,1);e!==null&&Jt(e,t,1,-1)}function Fg(t){var e=on();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:t},e.queue=t,t=t.dispatch=MI.bind(null,Se,t),[e.memoizedState,t]}function Mo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Tw(){return Bt().memoizedState}function gl(t,e,n,r){var s=on();Se.flags|=t,s.memoizedState=Mo(1|e,n,void 0,r===void 0?null:r)}function Au(t,e,n,r){var s=Bt();r=r===void 0?null:r;var i=void 0;if(Me!==null){var o=Me.memoizedState;if(i=o.destroy,r!==null&&Sf(r,o.deps)){s.memoizedState=Mo(e,n,i,r);return}}Se.flags|=t,s.memoizedState=Mo(1|e,n,i,r)}function Ug(t,e){return gl(8390656,8,t,e)}function bf(t,e){return Au(2048,8,t,e)}function Iw(t,e){return Au(4,2,t,e)}function bw(t,e){return Au(4,4,t,e)}function Cw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Aw(t,e,n){return n=n!=null?n.concat([t]):null,Au(4,4,Cw.bind(null,e,t),n)}function Cf(){}function Pw(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kw(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Nw(t,e,n){return Jr&21?(Zt(n,e)||(n=L_(),Se.lanes|=n,Xr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wt=!0),t.memoizedState=n)}function LI(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=Gc.transition;Gc.transition={};try{t(!1),e()}finally{de=n,Gc.transition=r}}function Rw(){return Bt().memoizedState}function VI(t,e,n){var r=hr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ow(t))Dw(e,n);else if(n=pw(t,e,n,r),n!==null){var s=mt();Jt(n,t,r,s),jw(n,e,r)}}function MI(t,e,n){var r=hr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ow(t))Dw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Zt(a,o)){var u=e.interleaved;u===null?(s.next=s,vf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=pw(t,e,s,r),n!==null&&(s=mt(),Jt(n,t,r,s),jw(n,e,r))}}function Ow(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function Dw(t,e){uo=Gl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rf(t,n)}}var Ql={readContext:$t,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},FI={readContext:$t,useCallback:function(t,e){return on().memoizedState=[t,e===void 0?null:e],t},useContext:$t,useEffect:Ug,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gl(4194308,4,Cw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gl(4194308,4,t,e)},useInsertionEffect:function(t,e){return gl(4,2,t,e)},useMemo:function(t,e){var n=on();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=on();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=VI.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=on();return t={current:t},e.memoizedState=t},useState:Fg,useDebugValue:Cf,useDeferredValue:function(t){return on().memoizedState=t},useTransition:function(){var t=Fg(!1),e=t[0];return t=LI.bind(null,t[1]),on().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,s=on();if(xe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),ze===null)throw Error(U(349));Jr&30||_w(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ug(xw.bind(null,r,i,t),[t]),r.flags|=2048,Mo(9,ww.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=on(),e=ze.identifierPrefix;if(xe){var n=bn,r=In;n=(r&~(1<<32-Yt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Lo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UI={readContext:$t,useCallback:Pw,useContext:$t,useEffect:bf,useImperativeHandle:Aw,useInsertionEffect:Iw,useLayoutEffect:bw,useMemo:kw,useReducer:Qc,useRef:Tw,useState:function(){return Qc(Vo)},useDebugValue:Cf,useDeferredValue:function(t){var e=Bt();return Nw(e,Me.memoizedState,t)},useTransition:function(){var t=Qc(Vo)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:yw,useSyncExternalStore:vw,useId:Rw,unstable_isNewReconciler:!1},$I={readContext:$t,useCallback:Pw,useContext:$t,useEffect:bf,useImperativeHandle:Aw,useInsertionEffect:Iw,useLayoutEffect:bw,useMemo:kw,useReducer:Yc,useRef:Tw,useState:function(){return Yc(Vo)},useDebugValue:Cf,useDeferredValue:function(t){var e=Bt();return Me===null?e.memoizedState=t:Nw(e,Me.memoizedState,t)},useTransition:function(){var t=Yc(Vo)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:yw,useSyncExternalStore:vw,useId:Rw,unstable_isNewReconciler:!1};function qt(t,e){if(t&&t.defaultProps){e=Te({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Te({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pu={isMounted:function(t){return(t=t._reactInternals)?ls(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mt(),s=hr(t),i=kn(r,s);i.payload=e,n!=null&&(i.callback=n),e=cr(t,i,s),e!==null&&(Jt(e,t,s,r),pl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mt(),s=hr(t),i=kn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=cr(t,i,s),e!==null&&(Jt(e,t,s,r),pl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mt(),r=hr(t),s=kn(n,r);s.tag=2,e!=null&&(s.callback=e),e=cr(t,s,r),e!==null&&(Jt(e,t,r,n),pl(e,t,r))}};function $g(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ko(n,r)||!ko(s,i):!0}function Lw(t,e,n){var r=!1,s=_r,i=e.contextType;return typeof i=="object"&&i!==null?i=$t(i):(s=Et(e)?Qr:ut.current,r=e.contextTypes,i=(r=r!=null)?Qs(t,s):_r),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Bg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pu.enqueueReplaceState(e,e.state,null)}function Xd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},_f(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$t(i):(i=Et(e)?Qr:ut.current,s.context=Qs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Jd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Pu.enqueueReplaceState(s,s.state,null),ql(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Zs(t,e){try{var n="",r=e;do n+=mT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Jc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BI=typeof WeakMap=="function"?WeakMap:Map;function Vw(t,e,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Jl||(Jl=!0,uh=r),Zd(t,e)},n}function Mw(t,e,n){n=kn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Zd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Zd(t,e),typeof r!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new BI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=nb.bind(null,t,e,n),e.then(t,t))}function Wg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kn(-1,1),e.tag=2,cr(n,e,1))),n.lanes|=1),t)}var zI=Un.ReactCurrentOwner,wt=!1;function ft(t,e,n,r){e.child=t===null?fw(e,null,n,r):Js(e,t.child,n,r)}function qg(t,e,n,r,s){n=n.render;var i=e.ref;return Bs(e,s),r=Tf(t,e,n,r,i,s),n=If(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dn(t,e,s)):(xe&&n&&hf(e),e.flags|=1,ft(t,e,r,s),e.child)}function Kg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!jf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Fw(t,e,i,r,s)):(t=wl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ko,n(o,r)&&t.ref===e.ref)return Dn(t,e,s)}return e.flags|=1,t=fr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Fw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ko(i,r)&&t.ref===e.ref)if(wt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wt=!0);else return e.lanes=t.lanes,Dn(t,e,s)}return eh(t,e,n,r,s)}function Uw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(js,It),It|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(js,It),It|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ye(js,It),It|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ye(js,It),It|=r;return ft(t,e,s,n),e.child}function $w(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function eh(t,e,n,r,s){var i=Et(n)?Qr:ut.current;return i=Qs(e,i),Bs(e,s),n=Tf(t,e,n,r,i,s),r=If(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dn(t,e,s)):(xe&&r&&hf(e),e.flags|=1,ft(t,e,n,s),e.child)}function Gg(t,e,n,r,s){if(Et(n)){var i=!0;$l(e)}else i=!1;if(Bs(e,s),e.stateNode===null)yl(t,e),Lw(e,n,r),Xd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=$t(c):(c=Et(n)?Qr:ut.current,c=Qs(e,c));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Bg(e,o,r,c),Gn=!1;var g=e.memoizedState;o.state=g,ql(e,r,o,s),u=e.memoizedState,a!==r||g!==u||xt.current||Gn?(typeof f=="function"&&(Jd(e,n,f,r),u=e.memoizedState),(a=Gn||$g(e,n,a,r,g,u,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,mw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:qt(e.type,a),o.props=c,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=$t(u):(u=Et(n)?Qr:ut.current,u=Qs(e,u));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||g!==u)&&Bg(e,o,r,u),Gn=!1,g=e.memoizedState,o.state=g,ql(e,r,o,s);var _=e.memoizedState;a!==p||g!==_||xt.current||Gn?(typeof y=="function"&&(Jd(e,n,y,r),_=e.memoizedState),(c=Gn||$g(e,n,c,r,g,_,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return th(t,e,n,r,i,s)}function th(t,e,n,r,s,i){$w(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Og(e,n,!1),Dn(t,e,i);r=e.stateNode,zI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Js(e,t.child,null,i),e.child=Js(e,null,a,i)):ft(t,e,a,i),e.memoizedState=r.state,s&&Og(e,n,!0),e.child}function Bw(t){var e=t.stateNode;e.pendingContext?Rg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Rg(t,e.context,!1),wf(t,e.containerInfo)}function Qg(t,e,n,r,s){return Ys(),pf(s),e.flags|=256,ft(t,e,n,r),e.child}var nh={dehydrated:null,treeContext:null,retryLane:0};function rh(t){return{baseLanes:t,cachePool:null,transitions:null}}function zw(t,e,n){var r=e.pendingProps,s=Ee.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ye(Ee,s&1),t===null)return Qd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ru(o,r,0,null),t=qr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=rh(n),e.memoizedState=nh,t):Af(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return WI(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=fr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=fr(a,i):(i=qr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?rh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=nh,r}return i=t.child,t=i.sibling,r=fr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Af(t,e){return e=Ru({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xa(t,e,n,r){return r!==null&&pf(r),Js(e,t.child,null,n),t=Af(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function WI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Jc(Error(U(422))),Xa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ru({mode:"visible",children:r.children},s,0,null),i=qr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Js(e,t.child,null,o),e.child.memoizedState=rh(o),e.memoizedState=nh,i);if(!(e.mode&1))return Xa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(U(419)),r=Jc(i,r,void 0),Xa(t,e,o,r)}if(a=(o&t.childLanes)!==0,wt||a){if(r=ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,On(t,s),Jt(r,t,s,-1))}return Df(),r=Jc(Error(U(421))),Xa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=rb.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,bt=ur(s.nextSibling),At=e,xe=!0,Gt=null,t!==null&&(Lt[Vt++]=In,Lt[Vt++]=bn,Lt[Vt++]=Yr,In=t.id,bn=t.overflow,Yr=e),e=Af(e,r.children),e.flags|=4096,e)}function Yg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Yd(t.return,e,n)}function Xc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ww(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ft(t,e,r.children,n),r=Ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yg(t,n,e);else if(t.tag===19)Yg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(Ee,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Kl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Xc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Kl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Xc(e,!0,n,null,i);break;case"together":Xc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function HI(t,e,n){switch(e.tag){case 3:Bw(e),Ys();break;case 5:gw(e);break;case 1:Et(e.type)&&$l(e);break;case 4:wf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ye(Wl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?zw(t,e,n):(ye(Ee,Ee.current&1),t=Dn(t,e,n),t!==null?t.sibling:null);ye(Ee,Ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ww(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(Ee,Ee.current),r)break;return null;case 22:case 23:return e.lanes=0,Uw(t,e,n)}return Dn(t,e,n)}var Hw,sh,qw,Kw;Hw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sh=function(){};qw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,zr(cn.current);var i=null;switch(n){case"input":s=bd(t,s),r=bd(t,r),i=[];break;case"select":s=Te({},s,{value:void 0}),r=Te({},r,{value:void 0}),i=[];break;case"textarea":s=Pd(t,s),r=Pd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Fl)}Nd(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(So.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(So.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&_e("scroll",t),i||a===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Kw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Bi(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qI(t,e,n){var r=e.pendingProps;switch(ff(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return Et(e.type)&&Ul(),rt(e),null;case 3:return r=e.stateNode,Xs(),we(xt),we(ut),Ef(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ya(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gt!==null&&(hh(Gt),Gt=null))),sh(t,e),rt(e),null;case 5:xf(e);var s=zr(jo.current);if(n=e.type,t!==null&&e.stateNode!=null)qw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return rt(e),null}if(t=zr(cn.current),Ya(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[an]=e,r[Oo]=i,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<Xi.length;s++)_e(Xi[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":ig(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":ag(r,i),_e("invalid",r)}Nd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Qa(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Qa(r.textContent,a,t),s=["children",""+a]):So.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":$a(r),og(r,i,!0);break;case"textarea":$a(r),lg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Fl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=x_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[an]=e,t[Oo]=r,Hw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Rd(n,r),n){case"dialog":_e("cancel",t),_e("close",t),s=r;break;case"iframe":case"object":case"embed":_e("load",t),s=r;break;case"video":case"audio":for(s=0;s<Xi.length;s++)_e(Xi[s],t);s=r;break;case"source":_e("error",t),s=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=r;break;case"details":_e("toggle",t),s=r;break;case"input":ig(t,r),s=bd(t,r),_e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Te({},r,{value:void 0}),_e("invalid",t);break;case"textarea":ag(t,r),s=Pd(t,r),_e("invalid",t);break;default:s=r}Nd(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?T_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&E_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&To(t,u):typeof u=="number"&&To(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(So.hasOwnProperty(i)?u!=null&&i==="onScroll"&&_e("scroll",t):u!=null&&Jh(t,i,u,o))}switch(n){case"input":$a(t),og(t,r,!1);break;case"textarea":$a(t),lg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ms(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ms(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Fl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)Kw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=zr(jo.current),zr(cn.current),Ya(e)){if(r=e.stateNode,n=e.memoizedProps,r[an]=e,(i=r.nodeValue!==n)&&(t=At,t!==null))switch(t.tag){case 3:Qa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=e,e.stateNode=r}return rt(e),null;case 13:if(we(Ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&bt!==null&&e.mode&1&&!(e.flags&128))dw(),Ys(),e.flags|=98560,i=!1;else if(i=Ya(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[an]=e}else Ys(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),i=!1}else Gt!==null&&(hh(Gt),Gt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?Fe===0&&(Fe=3):Df())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return Xs(),sh(t,e),t===null&&No(e.stateNode.containerInfo),rt(e),null;case 10:return yf(e.type._context),rt(e),null;case 17:return Et(e.type)&&Ul(),rt(e),null;case 19:if(we(Ee),i=e.memoizedState,i===null)return rt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Bi(i,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Kl(t),o!==null){for(e.flags|=128,Bi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Ee,Ee.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ne()>ei&&(e.flags|=128,r=!0,Bi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Kl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xe)return rt(e),null}else 2*Ne()-i.renderingStartTime>ei&&n!==1073741824&&(e.flags|=128,r=!0,Bi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ne(),e.sibling=null,n=Ee.current,ye(Ee,r?n&1|2:n&1),e):(rt(e),null);case 22:case 23:return Of(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?It&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function KI(t,e){switch(ff(e),e.tag){case 1:return Et(e.type)&&Ul(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xs(),we(xt),we(ut),Ef(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xf(e),null;case 13:if(we(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ys()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Ee),null;case 4:return Xs(),null;case 10:return yf(e.type._context),null;case 22:case 23:return Of(),null;case 24:return null;default:return null}}var Za=!1,ot=!1,GI=typeof WeakSet=="function"?WeakSet:Set,W=null;function Ds(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(t,e,r)}else n.current=null}function ih(t,e,n){try{n()}catch(r){Ae(t,e,r)}}var Jg=!1;function QI(t,e){if(Bd=Ll,t=X_(),df(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,f=0,p=t,g=null;t:for(;;){for(var y;p!==n||s!==0&&p.nodeType!==3||(a=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)g=p,p=y;for(;;){if(p===t)break t;if(g===n&&++c===s&&(a=o),g===i&&++f===r&&(u=o),(y=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=y}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(zd={focusedElem:t,selectionRange:n},Ll=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var A=_.memoizedProps,k=_.memoizedState,I=e.stateNode,v=I.getSnapshotBeforeUpdate(e.elementType===e.type?A:qt(e.type,A),k);I.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(R){Ae(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return _=Jg,Jg=!1,_}function co(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ih(e,n,i)}s=s.next}while(s!==r)}}function ku(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function oh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Gw(t){var e=t.alternate;e!==null&&(t.alternate=null,Gw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[an],delete e[Oo],delete e[qd],delete e[NI],delete e[RI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qw(t){return t.tag===5||t.tag===3||t.tag===4}function Xg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ah(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fl));else if(r!==4&&(t=t.child,t!==null))for(ah(t,e,n),t=t.sibling;t!==null;)ah(t,e,n),t=t.sibling}function lh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lh(t,e,n),t=t.sibling;t!==null;)lh(t,e,n),t=t.sibling}var He=null,Kt=!1;function Hn(t,e,n){for(n=n.child;n!==null;)Yw(t,e,n),n=n.sibling}function Yw(t,e,n){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Eu,n)}catch{}switch(n.tag){case 5:ot||Ds(n,e);case 6:var r=He,s=Kt;He=null,Hn(t,e,n),He=r,Kt=s,He!==null&&(Kt?(t=He,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&(Kt?(t=He,n=n.stateNode,t.nodeType===8?Hc(t.parentNode,n):t.nodeType===1&&Hc(t,n),Ao(t)):Hc(He,n.stateNode));break;case 4:r=He,s=Kt,He=n.stateNode.containerInfo,Kt=!0,Hn(t,e,n),He=r,Kt=s;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ih(n,e,o),s=s.next}while(s!==r)}Hn(t,e,n);break;case 1:if(!ot&&(Ds(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ae(n,e,a)}Hn(t,e,n);break;case 21:Hn(t,e,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,Hn(t,e,n),ot=r):Hn(t,e,n);break;default:Hn(t,e,n)}}function Zg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new GI),e.forEach(function(r){var s=sb.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ht(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:He=a.stateNode,Kt=!1;break e;case 3:He=a.stateNode.containerInfo,Kt=!0;break e;case 4:He=a.stateNode.containerInfo,Kt=!0;break e}a=a.return}if(He===null)throw Error(U(160));Yw(i,o,s),He=null,Kt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Ae(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jw(e,t),e=e.sibling}function Jw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ht(e,t),rn(t),r&4){try{co(3,t,t.return),ku(3,t)}catch(A){Ae(t,t.return,A)}try{co(5,t,t.return)}catch(A){Ae(t,t.return,A)}}break;case 1:Ht(e,t),rn(t),r&512&&n!==null&&Ds(n,n.return);break;case 5:if(Ht(e,t),rn(t),r&512&&n!==null&&Ds(n,n.return),t.flags&32){var s=t.stateNode;try{To(s,"")}catch(A){Ae(t,t.return,A)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&__(s,i),Rd(a,o);var c=Rd(a,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?T_(s,p):f==="dangerouslySetInnerHTML"?E_(s,p):f==="children"?To(s,p):Jh(s,f,p,c)}switch(a){case"input":Cd(s,i);break;case"textarea":w_(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Ms(s,!!i.multiple,y,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ms(s,!!i.multiple,i.defaultValue,!0):Ms(s,!!i.multiple,i.multiple?[]:"",!1))}s[Oo]=i}catch(A){Ae(t,t.return,A)}}break;case 6:if(Ht(e,t),rn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(A){Ae(t,t.return,A)}}break;case 3:if(Ht(e,t),rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ao(e.containerInfo)}catch(A){Ae(t,t.return,A)}break;case 4:Ht(e,t),rn(t);break;case 13:Ht(e,t),rn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Nf=Ne())),r&4&&Zg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(c=ot)||f,Ht(e,t),ot=c):Ht(e,t),rn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(W=t,f=t.child;f!==null;){for(p=W=f;W!==null;){switch(g=W,y=g.child,g.tag){case 0:case 11:case 14:case 15:co(4,g,g.return);break;case 1:Ds(g,g.return);var _=g.stateNode;if(typeof _.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(A){Ae(r,n,A)}}break;case 5:Ds(g,g.return);break;case 22:if(g.memoizedState!==null){ty(p);continue}}y!==null?(y.return=g,W=y):ty(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=S_("display",o))}catch(A){Ae(t,t.return,A)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(A){Ae(t,t.return,A)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ht(e,t),rn(t),r&4&&Zg(t);break;case 21:break;default:Ht(e,t),rn(t)}}function rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Qw(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(To(s,""),r.flags&=-33);var i=Xg(t);lh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Xg(t);ah(t,a,o);break;default:throw Error(U(161))}}catch(u){Ae(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YI(t,e,n){W=t,Xw(t)}function Xw(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Za;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||ot;a=Za;var c=ot;if(Za=o,(ot=u)&&!c)for(W=s;W!==null;)o=W,u=o.child,o.tag===22&&o.memoizedState!==null?ny(s):u!==null?(u.return=o,W=u):ny(s);for(;i!==null;)W=i,Xw(i),i=i.sibling;W=s,Za=a,ot=c}ey(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):ey(t)}}function ey(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||ku(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:qt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Mg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Mg(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Ao(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ot||e.flags&512&&oh(e)}catch(g){Ae(e,e.return,g)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function ty(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function ny(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ku(4,e)}catch(u){Ae(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ae(e,s,u)}}var i=e.return;try{oh(e)}catch(u){Ae(e,i,u)}break;case 5:var o=e.return;try{oh(e)}catch(u){Ae(e,o,u)}}}catch(u){Ae(e,e.return,u)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var JI=Math.ceil,Yl=Un.ReactCurrentDispatcher,Pf=Un.ReactCurrentOwner,Ut=Un.ReactCurrentBatchConfig,ae=0,ze=null,Oe=null,Qe=0,It=0,js=Ir(0),Fe=0,Fo=null,Xr=0,Nu=0,kf=0,ho=null,_t=null,Nf=0,ei=1/0,En=null,Jl=!1,uh=null,dr=null,el=!1,nr=null,Xl=0,fo=0,ch=null,vl=-1,_l=0;function mt(){return ae&6?Ne():vl!==-1?vl:vl=Ne()}function hr(t){return t.mode&1?ae&2&&Qe!==0?Qe&-Qe:DI.transition!==null?(_l===0&&(_l=L_()),_l):(t=de,t!==0||(t=window.event,t=t===void 0?16:z_(t.type)),t):1}function Jt(t,e,n,r){if(50<fo)throw fo=0,ch=null,Error(U(185));ea(t,n,r),(!(ae&2)||t!==ze)&&(t===ze&&(!(ae&2)&&(Nu|=n),Fe===4&&Yn(t,Qe)),St(t,r),n===1&&ae===0&&!(e.mode&1)&&(ei=Ne()+500,Cu&&br()))}function St(t,e){var n=t.callbackNode;DT(t,e);var r=jl(t,t===ze?Qe:0);if(r===0)n!==null&&dg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&dg(n),e===1)t.tag===0?OI(ry.bind(null,t)):lw(ry.bind(null,t)),PI(function(){!(ae&6)&&br()}),n=null;else{switch(V_(r)){case 1:n=nf;break;case 4:n=D_;break;case 16:n=Dl;break;case 536870912:n=j_;break;default:n=Dl}n=ox(n,Zw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zw(t,e){if(vl=-1,_l=0,ae&6)throw Error(U(327));var n=t.callbackNode;if(zs()&&t.callbackNode!==n)return null;var r=jl(t,t===ze?Qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Zl(t,r);else{e=r;var s=ae;ae|=2;var i=tx();(ze!==t||Qe!==e)&&(En=null,ei=Ne()+500,Hr(t,e));do try{eb();break}catch(a){ex(t,a)}while(!0);gf(),Yl.current=i,ae=s,Oe!==null?e=0:(ze=null,Qe=0,e=Fe)}if(e!==0){if(e===2&&(s=Vd(t),s!==0&&(r=s,e=dh(t,s))),e===1)throw n=Fo,Hr(t,0),Yn(t,r),St(t,Ne()),n;if(e===6)Yn(t,r);else{if(s=t.current.alternate,!(r&30)&&!XI(s)&&(e=Zl(t,r),e===2&&(i=Vd(t),i!==0&&(r=i,e=dh(t,i))),e===1))throw n=Fo,Hr(t,0),Yn(t,r),St(t,Ne()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Fr(t,_t,En);break;case 3:if(Yn(t,r),(r&130023424)===r&&(e=Nf+500-Ne(),10<e)){if(jl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){mt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Hd(Fr.bind(null,t,_t,En),e);break}Fr(t,_t,En);break;case 4:if(Yn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Yt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ne()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JI(r/1960))-r,10<r){t.timeoutHandle=Hd(Fr.bind(null,t,_t,En),r);break}Fr(t,_t,En);break;case 5:Fr(t,_t,En);break;default:throw Error(U(329))}}}return St(t,Ne()),t.callbackNode===n?Zw.bind(null,t):null}function dh(t,e){var n=ho;return t.current.memoizedState.isDehydrated&&(Hr(t,e).flags|=256),t=Zl(t,e),t!==2&&(e=_t,_t=n,e!==null&&hh(e)),t}function hh(t){_t===null?_t=t:_t.push.apply(_t,t)}function XI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Zt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yn(t,e){for(e&=~kf,e&=~Nu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yt(e),r=1<<n;t[n]=-1,e&=~r}}function ry(t){if(ae&6)throw Error(U(327));zs();var e=jl(t,0);if(!(e&1))return St(t,Ne()),null;var n=Zl(t,e);if(t.tag!==0&&n===2){var r=Vd(t);r!==0&&(e=r,n=dh(t,r))}if(n===1)throw n=Fo,Hr(t,0),Yn(t,e),St(t,Ne()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fr(t,_t,En),St(t,Ne()),null}function Rf(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(ei=Ne()+500,Cu&&br())}}function Zr(t){nr!==null&&nr.tag===0&&!(ae&6)&&zs();var e=ae;ae|=1;var n=Ut.transition,r=de;try{if(Ut.transition=null,de=1,t)return t()}finally{de=r,Ut.transition=n,ae=e,!(ae&6)&&br()}}function Of(){It=js.current,we(js)}function Hr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AI(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(ff(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ul();break;case 3:Xs(),we(xt),we(ut),Ef();break;case 5:xf(r);break;case 4:Xs();break;case 13:we(Ee);break;case 19:we(Ee);break;case 10:yf(r.type._context);break;case 22:case 23:Of()}n=n.return}if(ze=t,Oe=t=fr(t.current,null),Qe=It=e,Fe=0,Fo=null,kf=Nu=Xr=0,_t=ho=null,Br!==null){for(e=0;e<Br.length;e++)if(n=Br[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Br=null}return t}function ex(t,e){do{var n=Oe;try{if(gf(),ml.current=Ql,Gl){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Gl=!1}if(Jr=0,$e=Me=Se=null,uo=!1,Lo=0,Pf.current=null,n===null||n.return===null){Fe=1,Fo=e,Oe=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=Qe,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=a,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=Wg(o);if(y!==null){y.flags&=-257,Hg(y,o,a,i,e),y.mode&1&&zg(i,c,e),e=y,u=c;var _=e.updateQueue;if(_===null){var A=new Set;A.add(u),e.updateQueue=A}else _.add(u);break e}else{if(!(e&1)){zg(i,c,e),Df();break e}u=Error(U(426))}}else if(xe&&a.mode&1){var k=Wg(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Hg(k,o,a,i,e),pf(Zs(u,a));break e}}i=u=Zs(u,a),Fe!==4&&(Fe=2),ho===null?ho=[i]:ho.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=Vw(i,u,e);Vg(i,I);break e;case 1:a=u;var v=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(dr===null||!dr.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=Mw(i,a,e);Vg(i,R);break e}}i=i.return}while(i!==null)}rx(n)}catch(L){e=L,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(!0)}function tx(){var t=Yl.current;return Yl.current=Ql,t===null?Ql:t}function Df(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),ze===null||!(Xr&268435455)&&!(Nu&268435455)||Yn(ze,Qe)}function Zl(t,e){var n=ae;ae|=2;var r=tx();(ze!==t||Qe!==e)&&(En=null,Hr(t,e));do try{ZI();break}catch(s){ex(t,s)}while(!0);if(gf(),ae=n,Yl.current=r,Oe!==null)throw Error(U(261));return ze=null,Qe=0,Fe}function ZI(){for(;Oe!==null;)nx(Oe)}function eb(){for(;Oe!==null&&!IT();)nx(Oe)}function nx(t){var e=ix(t.alternate,t,It);t.memoizedProps=t.pendingProps,e===null?rx(t):Oe=e,Pf.current=null}function rx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=KI(n,e),n!==null){n.flags&=32767,Oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,Oe=null;return}}else if(n=qI(n,e,It),n!==null){Oe=n;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);Fe===0&&(Fe=5)}function Fr(t,e,n){var r=de,s=Ut.transition;try{Ut.transition=null,de=1,tb(t,e,n,r)}finally{Ut.transition=s,de=r}return null}function tb(t,e,n,r){do zs();while(nr!==null);if(ae&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(jT(t,i),t===ze&&(Oe=ze=null,Qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||el||(el=!0,ox(Dl,function(){return zs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ut.transition,Ut.transition=null;var o=de;de=1;var a=ae;ae|=4,Pf.current=null,QI(t,n),Jw(n,t),xI(zd),Ll=!!Bd,zd=Bd=null,t.current=n,YI(n),bT(),ae=a,de=o,Ut.transition=i}else t.current=n;if(el&&(el=!1,nr=t,Xl=s),i=t.pendingLanes,i===0&&(dr=null),PT(n.stateNode),St(t,Ne()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Jl)throw Jl=!1,t=uh,uh=null,t;return Xl&1&&t.tag!==0&&zs(),i=t.pendingLanes,i&1?t===ch?fo++:(fo=0,ch=t):fo=0,br(),null}function zs(){if(nr!==null){var t=V_(Xl),e=Ut.transition,n=de;try{if(Ut.transition=null,de=16>t?16:t,nr===null)var r=!1;else{if(t=nr,nr=null,Xl=0,ae&6)throw Error(U(331));var s=ae;for(ae|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(W=c;W!==null;){var f=W;switch(f.tag){case 0:case 11:case 15:co(8,f,i)}var p=f.child;if(p!==null)p.return=f,W=p;else for(;W!==null;){f=W;var g=f.sibling,y=f.return;if(Gw(f),f===c){W=null;break}if(g!==null){g.return=y,W=g;break}W=y}}}var _=i.alternate;if(_!==null){var A=_.child;if(A!==null){_.child=null;do{var k=A.sibling;A.sibling=null,A=k}while(A!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:co(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,W=I;break e}W=i.return}}var v=t.current;for(W=v;W!==null;){o=W;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,W=T;else e:for(o=v;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ku(9,a)}}catch(L){Ae(a,a.return,L)}if(a===o){W=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,W=R;break e}W=a.return}}if(ae=s,br(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Eu,t)}catch{}r=!0}return r}finally{de=n,Ut.transition=e}}return!1}function sy(t,e,n){e=Zs(n,e),e=Vw(t,e,1),t=cr(t,e,1),e=mt(),t!==null&&(ea(t,1,e),St(t,e))}function Ae(t,e,n){if(t.tag===3)sy(t,t,n);else for(;e!==null;){if(e.tag===3){sy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(dr===null||!dr.has(r))){t=Zs(n,t),t=Mw(e,t,1),e=cr(e,t,1),t=mt(),e!==null&&(ea(e,1,t),St(e,t));break}}e=e.return}}function nb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mt(),t.pingedLanes|=t.suspendedLanes&n,ze===t&&(Qe&n)===n&&(Fe===4||Fe===3&&(Qe&130023424)===Qe&&500>Ne()-Nf?Hr(t,0):kf|=n),St(t,e)}function sx(t,e){e===0&&(t.mode&1?(e=Wa,Wa<<=1,!(Wa&130023424)&&(Wa=4194304)):e=1);var n=mt();t=On(t,e),t!==null&&(ea(t,e,n),St(t,n))}function rb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sx(t,n)}function sb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),sx(t,n)}var ix;ix=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xt.current)wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wt=!1,HI(t,e,n);wt=!!(t.flags&131072)}else wt=!1,xe&&e.flags&1048576&&uw(e,zl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yl(t,e),t=e.pendingProps;var s=Qs(e,ut.current);Bs(e,n),s=Tf(null,e,r,t,s,n);var i=If();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Et(r)?(i=!0,$l(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_f(e),s.updater=Pu,e.stateNode=s,s._reactInternals=e,Xd(e,r,t,n),e=th(null,e,r,!0,i,n)):(e.tag=0,xe&&i&&hf(e),ft(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=ob(r),t=qt(r,t),s){case 0:e=eh(null,e,r,t,n);break e;case 1:e=Gg(null,e,r,t,n);break e;case 11:e=qg(null,e,r,t,n);break e;case 14:e=Kg(null,e,r,qt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qt(r,s),eh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qt(r,s),Gg(t,e,r,s,n);case 3:e:{if(Bw(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,mw(t,e),ql(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Zs(Error(U(423)),e),e=Qg(t,e,r,n,s);break e}else if(r!==s){s=Zs(Error(U(424)),e),e=Qg(t,e,r,n,s);break e}else for(bt=ur(e.stateNode.containerInfo.firstChild),At=e,xe=!0,Gt=null,n=fw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ys(),r===s){e=Dn(t,e,n);break e}ft(t,e,r,n)}e=e.child}return e;case 5:return gw(e),t===null&&Qd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Wd(r,s)?o=null:i!==null&&Wd(r,i)&&(e.flags|=32),$w(t,e),ft(t,e,o,n),e.child;case 6:return t===null&&Qd(e),null;case 13:return zw(t,e,n);case 4:return wf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Js(e,null,r,n):ft(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qt(r,s),qg(t,e,r,s,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ye(Wl,r._currentValue),r._currentValue=o,i!==null)if(Zt(i.value,o)){if(i.children===s.children&&!xt.current){e=Dn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=kn(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Yd(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Yd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ft(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Bs(e,n),s=$t(s),r=r(s),e.flags|=1,ft(t,e,r,n),e.child;case 14:return r=e.type,s=qt(r,e.pendingProps),s=qt(r.type,s),Kg(t,e,r,s,n);case 15:return Fw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qt(r,s),yl(t,e),e.tag=1,Et(r)?(t=!0,$l(e)):t=!1,Bs(e,n),Lw(e,r,s),Xd(e,r,s,n),th(null,e,r,!0,t,n);case 19:return Ww(t,e,n);case 22:return Uw(t,e,n)}throw Error(U(156,e.tag))};function ox(t,e){return O_(t,e)}function ib(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(t,e,n,r){return new ib(t,e,n,r)}function jf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ob(t){if(typeof t=="function")return jf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zh)return 11;if(t===ef)return 14}return 2}function fr(t,e){var n=t.alternate;return n===null?(n=Ft(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")jf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Is:return qr(n.children,s,i,e);case Xh:o=8,s|=8;break;case Ed:return t=Ft(12,n,e,s|2),t.elementType=Ed,t.lanes=i,t;case Sd:return t=Ft(13,n,e,s),t.elementType=Sd,t.lanes=i,t;case Td:return t=Ft(19,n,e,s),t.elementType=Td,t.lanes=i,t;case g_:return Ru(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case p_:o=10;break e;case m_:o=9;break e;case Zh:o=11;break e;case ef:o=14;break e;case Kn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Ft(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function qr(t,e,n,r){return t=Ft(7,t,r,e),t.lanes=n,t}function Ru(t,e,n,r){return t=Ft(22,t,r,e),t.elementType=g_,t.lanes=n,t.stateNode={isHidden:!1},t}function Zc(t,e,n){return t=Ft(6,t,null,e),t.lanes=n,t}function ed(t,e,n){return e=Ft(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ab(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dc(0),this.expirationTimes=Dc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lf(t,e,n,r,s,i,o,a,u){return t=new ab(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ft(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_f(i),t}function lb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ts,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ax(t){if(!t)return _r;t=t._reactInternals;e:{if(ls(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Et(n))return aw(t,n,e)}return e}function lx(t,e,n,r,s,i,o,a,u){return t=Lf(n,r,!0,t,s,i,o,a,u),t.context=ax(null),n=t.current,r=mt(),s=hr(n),i=kn(r,s),i.callback=e??null,cr(n,i,s),t.current.lanes=s,ea(t,s,r),St(t,r),t}function Ou(t,e,n,r){var s=e.current,i=mt(),o=hr(s);return n=ax(n),e.context===null?e.context=n:e.pendingContext=n,e=kn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=cr(s,e,o),t!==null&&(Jt(t,s,o,i),pl(t,s,o)),o}function eu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function iy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vf(t,e){iy(t,e),(t=t.alternate)&&iy(t,e)}function ub(){return null}var ux=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mf(t){this._internalRoot=t}Du.prototype.render=Mf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Ou(t,e,null,null)};Du.prototype.unmount=Mf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zr(function(){Ou(null,t,null,null)}),e[Rn]=null}};function Du(t){this._internalRoot=t}Du.prototype.unstable_scheduleHydration=function(t){if(t){var e=U_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qn.length&&e!==0&&e<Qn[n].priority;n++);Qn.splice(n,0,t),n===0&&B_(t)}};function Ff(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ju(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function oy(){}function cb(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=eu(o);i.call(c)}}var o=lx(e,r,t,0,null,!1,!1,"",oy);return t._reactRootContainer=o,t[Rn]=o.current,No(t.nodeType===8?t.parentNode:t),Zr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=eu(u);a.call(c)}}var u=Lf(t,0,!1,null,null,!1,!1,"",oy);return t._reactRootContainer=u,t[Rn]=u.current,No(t.nodeType===8?t.parentNode:t),Zr(function(){Ou(e,u,n,r)}),u}function Lu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=eu(o);a.call(u)}}Ou(e,o,t,s)}else o=cb(n,e,t,s,r);return eu(o)}M_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ji(e.pendingLanes);n!==0&&(rf(e,n|1),St(e,Ne()),!(ae&6)&&(ei=Ne()+500,br()))}break;case 13:Zr(function(){var r=On(t,1);if(r!==null){var s=mt();Jt(r,t,1,s)}}),Vf(t,1)}};sf=function(t){if(t.tag===13){var e=On(t,134217728);if(e!==null){var n=mt();Jt(e,t,134217728,n)}Vf(t,134217728)}};F_=function(t){if(t.tag===13){var e=hr(t),n=On(t,e);if(n!==null){var r=mt();Jt(n,t,e,r)}Vf(t,e)}};U_=function(){return de};$_=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};Dd=function(t,e,n){switch(e){case"input":if(Cd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=bu(r);if(!s)throw Error(U(90));v_(r),Cd(r,s)}}}break;case"textarea":w_(t,n);break;case"select":e=n.value,e!=null&&Ms(t,!!n.multiple,e,!1)}};C_=Rf;A_=Zr;var db={usingClientEntryPoint:!1,Events:[na,Ps,bu,I_,b_,Rf]},zi={findFiberByHostInstance:$r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hb={bundleType:zi.bundleType,version:zi.version,rendererPackageName:zi.rendererPackageName,rendererConfig:zi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Un.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=N_(t),t===null?null:t.stateNode},findFiberByHostInstance:zi.findFiberByHostInstance||ub,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tl.isDisabled&&tl.supportsFiber)try{Eu=tl.inject(hb),un=tl}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=db;Nt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ff(e))throw Error(U(200));return lb(t,e,null,n)};Nt.createRoot=function(t,e){if(!Ff(t))throw Error(U(299));var n=!1,r="",s=ux;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lf(t,1,!1,null,null,n,!1,r,s),t[Rn]=e.current,No(t.nodeType===8?t.parentNode:t),new Mf(e)};Nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=N_(e),t=t===null?null:t.stateNode,t};Nt.flushSync=function(t){return Zr(t)};Nt.hydrate=function(t,e,n){if(!ju(e))throw Error(U(200));return Lu(null,t,e,!0,n)};Nt.hydrateRoot=function(t,e,n){if(!Ff(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ux;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=lx(e,null,t,1,n??null,s,!1,i,o),t[Rn]=e.current,No(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Du(e)};Nt.render=function(t,e,n){if(!ju(e))throw Error(U(200));return Lu(null,t,e,!1,n)};Nt.unmountComponentAtNode=function(t){if(!ju(t))throw Error(U(40));return t._reactRootContainer?(Zr(function(){Lu(null,null,t,!1,function(){t._reactRootContainer=null,t[Rn]=null})}),!0):!1};Nt.unstable_batchedUpdates=Rf;Nt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ju(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Lu(t,e,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function cx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cx)}catch(t){console.error(t)}}cx(),c_.exports=Nt;var fb=c_.exports,ay=fb;wd.createRoot=ay.createRoot,wd.hydrateRoot=ay.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uo(){return Uo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uo.apply(this,arguments)}var rr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(rr||(rr={}));const ly="popstate";function pb(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return fh("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:dx(s)}return gb(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Uf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mb(){return Math.random().toString(36).substr(2,8)}function uy(t,e){return{usr:t.state,key:t.key,idx:e}}function fh(t,e,n,r){return n===void 0&&(n=null),Uo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?gi(e):e,{state:n,key:e&&e.key||r||mb()})}function dx(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function gi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function gb(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=rr.Pop,u=null,c=f();c==null&&(c=0,o.replaceState(Uo({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function p(){a=rr.Pop;let k=f(),I=k==null?null:k-c;c=k,u&&u({action:a,location:A.location,delta:I})}function g(k,I){a=rr.Push;let v=fh(A.location,k,I);c=f()+1;let T=uy(v,c),R=A.createHref(v);try{o.pushState(T,"",R)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(R)}i&&u&&u({action:a,location:A.location,delta:1})}function y(k,I){a=rr.Replace;let v=fh(A.location,k,I);c=f();let T=uy(v,c),R=A.createHref(v);o.replaceState(T,"",R),i&&u&&u({action:a,location:A.location,delta:0})}function _(k){let I=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof k=="string"?k:dx(k);return v=v.replace(/ $/,"%20"),je(I,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,I)}let A={get action(){return a},get location(){return t(s,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(ly,p),u=k,()=>{s.removeEventListener(ly,p),u=null}},createHref(k){return e(s,k)},createURL:_,encodeLocation(k){let I=_(k);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:g,replace:y,go(k){return o.go(k)}};return A}var cy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(cy||(cy={}));function yb(t,e,n){return n===void 0&&(n="/"),vb(t,e,n)}function vb(t,e,n,r){let s=typeof e=="string"?gi(e):e,i=px(s.pathname||"/",n);if(i==null)return null;let o=hx(t);_b(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=Nb(i);a=Ab(o[u],c)}return a}function hx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let u={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(je(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Kr([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),hx(i.children,e,f,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:bb(c,i.index),routesMeta:f})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let u of fx(i.path))s(i,o,u)}),e}function fx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=fx(r.join("/")),a=[];return a.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function _b(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Cb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const wb=/^:[\w-]+$/,xb=3,Eb=2,Sb=1,Tb=10,Ib=-2,dy=t=>t==="*";function bb(t,e){let n=t.split("/"),r=n.length;return n.some(dy)&&(r+=Ib),e&&(r+=Eb),n.filter(s=>!dy(s)).reduce((s,i)=>s+(wb.test(i)?xb:i===""?Sb:Tb),r)}function Cb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Ab(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=Pb({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),g=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Kr([i,p.pathname]),pathnameBase:Lb(Kr([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=Kr([i,p.pathnameBase]))}return o}function Pb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kb(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,f,p)=>{let{paramName:g,isOptional:y}=f;if(g==="*"){let A=a[p]||"";o=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const _=a[p];return y&&!_?c[g]=void 0:c[g]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function kb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Uf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Nb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Uf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function px(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Rb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ob=t=>Rb.test(t);function Db(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?gi(t):t,i;if(n)if(Ob(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Uf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=hy(n.substring(1),"/"):i=hy(n,e)}else i=e;return{pathname:i,search:Vb(r),hash:Mb(s)}}function hy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function td(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function mx(t,e){let n=jb(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function gx(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=gi(t):(s=Uo({},t),je(!s.pathname||!s.pathname.includes("?"),td("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),td("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),td("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}a=p>=0?e[p]:"/"}let u=Db(s,a),c=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}const Kr=t=>t.join("/").replace(/\/\/+/g,"/"),Lb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Vb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Mb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Fb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yx=["post","put","patch","delete"];new Set(yx);const Ub=["get",...yx];new Set(Ub);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $o(){return $o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$o.apply(this,arguments)}const $f=O.createContext(null),$b=O.createContext(null),sa=O.createContext(null),Vu=O.createContext(null),Cr=O.createContext({outlet:null,matches:[],isDataRoute:!1}),vx=O.createContext(null);function ia(){return O.useContext(Vu)!=null}function us(){return ia()||je(!1),O.useContext(Vu).location}function _x(t){O.useContext(sa).static||O.useLayoutEffect(t)}function zt(){let{isDataRoute:t}=O.useContext(Cr);return t?t1():Bb()}function Bb(){ia()||je(!1);let t=O.useContext($f),{basename:e,future:n,navigator:r}=O.useContext(sa),{matches:s}=O.useContext(Cr),{pathname:i}=us(),o=JSON.stringify(mx(s,n.v7_relativeSplatPath)),a=O.useRef(!1);return _x(()=>{a.current=!0}),O.useCallback(function(c,f){if(f===void 0&&(f={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let p=gx(c,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Kr([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}function zb(){let{matches:t}=O.useContext(Cr),e=t[t.length-1];return e?e.params:{}}function Wb(t,e){return Hb(t,e)}function Hb(t,e,n,r){ia()||je(!1);let{navigator:s}=O.useContext(sa),{matches:i}=O.useContext(Cr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=us(),f;if(e){var p;let k=typeof e=="string"?gi(e):e;u==="/"||(p=k.pathname)!=null&&p.startsWith(u)||je(!1),f=k}else f=c;let g=f.pathname||"/",y=g;if(u!=="/"){let k=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let _=yb(t,{pathname:y}),A=Yb(_&&_.map(k=>Object.assign({},k,{params:Object.assign({},a,k.params),pathname:Kr([u,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:Kr([u,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,n,r);return e&&A?O.createElement(Vu.Provider,{value:{location:$o({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:rr.Pop}},A):A}function qb(){let t=e1(),e=Fb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,null)}const Kb=O.createElement(qb,null);class Gb extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(Cr.Provider,{value:this.props.routeContext},O.createElement(vx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Qb(t){let{routeContext:e,match:n,children:r}=t,s=O.useContext($f);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Cr.Provider,{value:e},r)}function Yb(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let f=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);f>=0||je(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=f),p.route.id){let{loaderData:g,errors:y}=n,_=p.route.loader&&g[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||_){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let y,_=!1,A=null,k=null;n&&(y=a&&p.route.id?a[p.route.id]:void 0,A=p.route.errorElement||Kb,u&&(c<0&&g===0?(n1("route-fallback"),_=!0,k=null):c===g&&(_=!0,k=p.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,g+1)),v=()=>{let T;return y?T=A:_?T=k:p.route.Component?T=O.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=f,O.createElement(Qb,{match:p,routeContext:{outlet:f,matches:I,isDataRoute:n!=null},children:T})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?O.createElement(Gb,{location:n.location,revalidation:n.revalidation,component:A,error:y,children:v(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):v()},null)}var wx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wx||{}),xx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(xx||{});function Jb(t){let e=O.useContext($f);return e||je(!1),e}function Xb(t){let e=O.useContext($b);return e||je(!1),e}function Zb(t){let e=O.useContext(Cr);return e||je(!1),e}function Ex(t){let e=Zb(),n=e.matches[e.matches.length-1];return n.route.id||je(!1),n.route.id}function e1(){var t;let e=O.useContext(vx),n=Xb(),r=Ex();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function t1(){let{router:t}=Jb(wx.UseNavigateStable),e=Ex(xx.UseNavigateStable),n=O.useRef(!1);return _x(()=>{n.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,$o({fromRouteId:e},i)))},[t,e])}const fy={};function n1(t,e,n){fy[t]||(fy[t]=!0)}function r1(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function sn(t){let{to:e,replace:n,state:r,relative:s}=t;ia()||je(!1);let{future:i,static:o}=O.useContext(sa),{matches:a}=O.useContext(Cr),{pathname:u}=us(),c=zt(),f=gx(e,mx(a,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return O.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:s}),[c,p,s,n,r]),null}function jt(t){je(!1)}function s1(t){let{basename:e="/",children:n=null,location:r,navigationType:s=rr.Pop,navigator:i,static:o=!1,future:a}=t;ia()&&je(!1);let u=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:u,navigator:i,static:o,future:$o({v7_relativeSplatPath:!1},a)}),[u,a,i,o]);typeof r=="string"&&(r=gi(r));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:_="default"}=r,A=O.useMemo(()=>{let k=px(f,u);return k==null?null:{location:{pathname:k,search:p,hash:g,state:y,key:_},navigationType:s}},[u,f,p,g,y,_,s]);return A==null?null:O.createElement(sa.Provider,{value:c},O.createElement(Vu.Provider,{children:n,value:A}))}function i1(t){let{children:e,location:n}=t;return Wb(ph(e),n)}new Promise(()=>{});function ph(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,ph(r.props.children,i));return}r.type!==jt&&je(!1),!r.props.index||!r.props.children||je(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ph(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const o1="6";try{window.__reactRouterVersion=o1}catch{}const a1="startTransition",py=nT[a1];function l1(t){let{basename:e,children:n,future:r,window:s}=t,i=O.useRef();i.current==null&&(i.current=pb({window:s,v5Compat:!0}));let o=i.current,[a,u]=O.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},f=O.useCallback(p=>{c&&py?py(()=>u(p)):u(p)},[u,c]);return O.useLayoutEffect(()=>o.listen(f),[o,f]),O.useEffect(()=>r1(r),[r]),O.createElement(s1,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var my;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(my||(my={}));var gy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gy||(gy={}));var yy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},u1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Tx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|a>>4;let g=(a&15)<<2|c>>6,y=c&63;u||(y=64,o||(g=64)),r.push(n[f],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Sx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||p==null)throw new c1;const g=i<<2|a>>4;if(r.push(g),c!==64){const y=a<<4&240|c>>2;if(r.push(y),p!==64){const _=c<<6&192|p;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class c1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d1=function(t){const e=Sx(t);return Tx.encodeByteArray(e,!0)},tu=function(t){return d1(t).replace(/\./g,"")},Ix=function(t){try{return Tx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=()=>h1().__FIREBASE_DEFAULTS__,p1=()=>{if(typeof process>"u"||typeof yy>"u")return;const t=yy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},m1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ix(t[1]);return e&&JSON.parse(e)},Mu=()=>{try{return f1()||p1()||m1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bx=t=>{var e,n;return(n=(e=Mu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},g1=t=>{const e=bx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Cx=()=>{var t;return(t=Mu())===null||t===void 0?void 0:t.config},Ax=t=>{var e;return(e=Mu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[tu(JSON.stringify(n)),tu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function w1(){var t;const e=(t=Mu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function x1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function E1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function S1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function T1(){const t=ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function I1(){return!w1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b1(){try{return typeof indexedDB=="object"}catch{return!1}}function C1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="FirebaseError";class $n extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=A1,Object.setPrototypeOf(this,$n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oa.prototype.create)}}class oa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?P1(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new $n(s,a,r)}}function P1(t,e){return t.replace(k1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const k1=/\{\$([^}]+)}/g;function N1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ti(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(vy(i)&&vy(o)){if(!ti(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function vy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function eo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function R1(t,e){const n=new O1(t,e);return n.subscribe.bind(n)}class O1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");D1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=nd),s.error===void 0&&(s.error=nd),s.complete===void 0&&(s.complete=nd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function D1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t){return t&&t._delegate?t._delegate:t}class es{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new y1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V1(e))try{this.getOrInitializeService({instanceIdentifier:Ur})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ur){return this.instances.has(e)}getOptions(e=Ur){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:L1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ur){return this.component?this.component.multipleInstances?e:Ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function L1(t){return t===Ur?void 0:t}function V1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new j1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const F1={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},U1=ie.INFO,$1={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},B1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=$1[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Bf=class{constructor(e){this.name=e,this._logLevel=U1,this._logHandler=B1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}};const z1=(t,e)=>e.some(n=>t instanceof n);let _y,wy;function W1(){return _y||(_y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H1(){return wy||(wy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Px=new WeakMap,mh=new WeakMap,kx=new WeakMap,rd=new WeakMap,zf=new WeakMap;function q1(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(pr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Px.set(n,t)}).catch(()=>{}),zf.set(e,t),e}function K1(t){if(mh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});mh.set(t,e)}let gh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function G1(t){gh=t(gh)}function Q1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sd(this),e,...n);return kx.set(r,e.sort?e.sort():[e]),pr(r)}:H1().includes(t)?function(...e){return t.apply(sd(this),e),pr(Px.get(this))}:function(...e){return pr(t.apply(sd(this),e))}}function Y1(t){return typeof t=="function"?Q1(t):(t instanceof IDBTransaction&&K1(t),z1(t,W1())?new Proxy(t,gh):t)}function pr(t){if(t instanceof IDBRequest)return q1(t);if(rd.has(t))return rd.get(t);const e=Y1(t);return e!==t&&(rd.set(t,e),zf.set(e,t)),e}const sd=t=>zf.get(t);function J1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=pr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(pr(o.result),u.oldVersion,u.newVersion,pr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const X1=["get","getKey","getAll","getAllKeys","count"],Z1=["put","add","delete","clear"],id=new Map;function xy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(id.get(e))return id.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Z1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||X1.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return id.set(e,i),i}G1(t=>({...t,get:(e,n,r)=>xy(e,n)||t.get(e,n,r),has:(e,n)=>!!xy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yh="@firebase/app",Ey="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new Bf("@firebase/app"),nC="@firebase/app-compat",rC="@firebase/analytics-compat",sC="@firebase/analytics",iC="@firebase/app-check-compat",oC="@firebase/app-check",aC="@firebase/auth",lC="@firebase/auth-compat",uC="@firebase/database",cC="@firebase/data-connect",dC="@firebase/database-compat",hC="@firebase/functions",fC="@firebase/functions-compat",pC="@firebase/installations",mC="@firebase/installations-compat",gC="@firebase/messaging",yC="@firebase/messaging-compat",vC="@firebase/performance",_C="@firebase/performance-compat",wC="@firebase/remote-config",xC="@firebase/remote-config-compat",EC="@firebase/storage",SC="@firebase/storage-compat",TC="@firebase/firestore",IC="@firebase/vertexai-preview",bC="@firebase/firestore-compat",CC="firebase",AC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh="[DEFAULT]",PC={[yh]:"fire-core",[nC]:"fire-core-compat",[sC]:"fire-analytics",[rC]:"fire-analytics-compat",[oC]:"fire-app-check",[iC]:"fire-app-check-compat",[aC]:"fire-auth",[lC]:"fire-auth-compat",[uC]:"fire-rtdb",[cC]:"fire-data-connect",[dC]:"fire-rtdb-compat",[hC]:"fire-fn",[fC]:"fire-fn-compat",[pC]:"fire-iid",[mC]:"fire-iid-compat",[gC]:"fire-fcm",[yC]:"fire-fcm-compat",[vC]:"fire-perf",[_C]:"fire-perf-compat",[wC]:"fire-rc",[xC]:"fire-rc-compat",[EC]:"fire-gcs",[SC]:"fire-gcs-compat",[TC]:"fire-fst",[bC]:"fire-fst-compat",[IC]:"fire-vertex","fire-js":"fire-js",[CC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=new Map,kC=new Map,_h=new Map;function Sy(t,e){try{t.container.addComponent(e)}catch(n){jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ni(t){const e=t.name;if(_h.has(e))return jn.debug(`There were multiple attempts to register component ${e}.`),!1;_h.set(e,t);for(const n of nu.values())Sy(n,t);for(const n of kC.values())Sy(n,t);return!0}function Wf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qt(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new oa("app","Firebase",NC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=AC;function Nx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:vh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw mr.create("bad-app-name",{appName:String(s)});if(n||(n=Cx()),!n)throw mr.create("no-options");const i=nu.get(s);if(i){if(ti(n,i.options)&&ti(r,i.config))return i;throw mr.create("duplicate-app",{appName:s})}const o=new M1(s);for(const u of _h.values())o.addComponent(u);const a=new RC(n,r,o);return nu.set(s,a),a}function Rx(t=vh){const e=nu.get(t);if(!e&&t===vh&&Cx())return Nx();if(!e)throw mr.create("no-app",{appName:t});return e}function gr(t,e,n){var r;let s=(r=PC[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jn.warn(a.join(" "));return}ni(new es(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="firebase-heartbeat-database",DC=1,Bo="firebase-heartbeat-store";let od=null;function Ox(){return od||(od=J1(OC,DC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bo)}catch(n){console.warn(n)}}}}).catch(t=>{throw mr.create("idb-open",{originalErrorMessage:t.message})})),od}async function jC(t){try{const n=(await Ox()).transaction(Bo),r=await n.objectStore(Bo).get(Dx(t));return await n.done,r}catch(e){if(e instanceof $n)jn.warn(e.message);else{const n=mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jn.warn(n.message)}}}async function Ty(t,e){try{const r=(await Ox()).transaction(Bo,"readwrite");await r.objectStore(Bo).put(e,Dx(t)),await r.done}catch(n){if(n instanceof $n)jn.warn(n.message);else{const r=mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});jn.warn(r.message)}}}function Dx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=1024,VC=30*24*60*60*1e3;class MC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new UC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Iy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=VC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){jn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Iy(),{heartbeatsToSend:r,unsentEntries:s}=FC(this._heartbeatsCache.heartbeats),i=tu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return jn.warn(n),""}}}function Iy(){return new Date().toISOString().substring(0,10)}function FC(t,e=LC){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),by(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),by(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class UC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b1()?C1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ty(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ty(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function by(t){return tu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t){ni(new es("platform-logger",e=>new eC(e),"PRIVATE")),ni(new es("heartbeat",e=>new MC(e),"PRIVATE")),gr(yh,Ey,t),gr(yh,Ey,"esm2017"),gr("fire-js","")}$C("");function Hf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function jx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BC=jx,Lx=new oa("auth","Firebase",jx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new Bf("@firebase/auth");function zC(t,...e){ru.logLevel<=ie.WARN&&ru.warn(`Auth (${yi}): ${t}`,...e)}function xl(t,...e){ru.logLevel<=ie.ERROR&&ru.error(`Auth (${yi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t,...e){throw qf(t,...e)}function dn(t,...e){return qf(t,...e)}function Vx(t,e,n){const r=Object.assign(Object.assign({},BC()),{[e]:n});return new oa("auth","Firebase",r).create(e,{appName:t.name})}function hn(t){return Vx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Lx.create(t,...e)}function Y(t,e,...n){if(!t)throw qf(e,...n)}function Cn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw xl(e),new Error(e)}function Ln(t,e){t||Cn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function WC(){return Cy()==="http:"||Cy()==="https:"}function Cy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WC()||E1()||"connection"in navigator)?navigator.onLine:!0}function qC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ln(n>e,"Short delay should be less than long delay!"),this.isMobile=_1()||S1()}get(){return HC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t,e){Ln(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=new la(3e4,6e4);function Ar(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Pr(t,e,n,r,s={}){return Fx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=aa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return x1()||(c.referrerPolicy="no-referrer"),Mx.fetch()(Ux(t,t.config.apiHost,n,a),c)})}async function Fx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},KC),e);try{const s=new YC(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw nl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw nl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw nl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw nl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Vx(t,f,c);en(t,f)}}catch(s){if(s instanceof $n)throw s;en(t,"network-request-failed",{message:String(s)})}}async function ua(t,e,n,r,s={}){const i=await Pr(t,e,n,r,s);return"mfaPendingCredential"in i&&en(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Ux(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Kf(t.config,s):`${t.config.apiScheme}://${s}`}function QC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class YC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dn(this.auth,"network-request-failed")),GC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=dn(t,e,r);return s.customData._tokenResponse=n,s}function Ay(t){return t!==void 0&&t.enterprise!==void 0}class JC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return QC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function XC(t,e){return Pr(t,"GET","/v2/recaptchaConfig",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZC(t,e){return Pr(t,"POST","/v1/accounts:delete",e)}async function $x(t,e){return Pr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eA(t,e=!1){const n=Ve(t),r=await n.getIdToken(e),s=Gf(r);Y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:po(ad(s.auth_time)),issuedAtTime:po(ad(s.iat)),expirationTime:po(ad(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ad(t){return Number(t)*1e3}function Gf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return xl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ix(n);return s?JSON.parse(s):(xl("Failed to decode base64 JWT payload"),null)}catch(s){return xl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Py(t){const e=Gf(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $n&&tA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function tA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=po(this.lastLoginAt),this.creationTime=po(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(t){var e;const n=t.auth,r=await t.getIdToken(),s=await zo(t,$x(n,{idToken:r}));Y(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Bx(i.providerUserInfo):[],a=sA(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),f=u?c:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new xh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function rA(t){const e=Ve(t);await su(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Bx(t){return t.map(e=>{var{providerId:n}=e,r=Hf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(t,e){const n=await Fx(t,{},async()=>{const r=aa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Ux(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Mx.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oA(t,e){return Pr(t,"POST","/v2/accounts:revokeToken",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Py(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const n=Py(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await iA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ws;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Y(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Y(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ws,this.toJSON())}_performRefresh(){return Cn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class An{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Hf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await zo(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eA(this,e)}reload(){return rA(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new An(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await su(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qt(this.auth.app))return Promise.reject(hn(this.auth));const e=await this.getIdToken();return await zo(this,ZC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,u,c,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,k=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,I=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:T,emailVerified:R,isAnonymous:L,providerData:M,stsTokenManager:S}=n;Y(T&&S,e,"internal-error");const w=Ws.fromJSON(this.name,S);Y(typeof T=="string",e,"internal-error"),qn(p,e.name),qn(g,e.name),Y(typeof R=="boolean",e,"internal-error"),Y(typeof L=="boolean",e,"internal-error"),qn(y,e.name),qn(_,e.name),qn(A,e.name),qn(k,e.name),qn(I,e.name),qn(v,e.name);const E=new An({uid:T,auth:e,email:g,emailVerified:R,displayName:p,isAnonymous:L,photoURL:_,phoneNumber:y,tenantId:A,stsTokenManager:w,createdAt:I,lastLoginAt:v});return M&&Array.isArray(M)&&(E.providerData=M.map(b=>Object.assign({},b))),k&&(E._redirectEventId=k),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ws;s.updateFromServerResponse(n);const i=new An({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await su(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Y(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Bx(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ws;a.updateFromIdToken(r);const u=new An({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new xh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=new Map;function Pn(t){Ln(t instanceof Function,"Expected a class definition");let e=ky.get(t);return e?(Ln(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ky.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zx.type="NONE";const Ny=zx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t,e,n){return`firebase:${t}:${e}:${n}`}class Hs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=El(this.userKey,s.apiKey,i),this.fullPersistenceKey=El("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?An._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Hs(Pn(Ny),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Pn(Ny);const o=El(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const f=await c._get(o);if(f){const p=An._fromJSON(e,f);c!==i&&(a=p),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Hs(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Hs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Kx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Wx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Qx(e))return"Blackberry";if(Yx(e))return"Webos";if(Hx(e))return"Safari";if((e.includes("chrome/")||qx(e))&&!e.includes("edge/"))return"Chrome";if(Gx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Wx(t=ct()){return/firefox\//i.test(t)}function Hx(t=ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qx(t=ct()){return/crios\//i.test(t)}function Kx(t=ct()){return/iemobile/i.test(t)}function Gx(t=ct()){return/android/i.test(t)}function Qx(t=ct()){return/blackberry/i.test(t)}function Yx(t=ct()){return/webos/i.test(t)}function Qf(t=ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aA(t=ct()){var e;return Qf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lA(){return T1()&&document.documentMode===10}function Jx(t=ct()){return Qf(t)||Gx(t)||Yx(t)||Qx(t)||/windows phone/i.test(t)||Kx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t,e=[]){let n;switch(t){case"Browser":n=Ry(ct());break;case"Worker":n=`${Ry(ct())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(t,e={}){return Pr(t,"GET","/v2/passwordPolicy",Ar(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=6;class hA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:dA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oy(this),this.idTokenSubscription=new Oy(this),this.beforeStateQueue=new uA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Hs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $x(this,{idToken:e}),r=await An._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await su(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qt(this.app))return Promise.reject(hn(this));const n=e?Ve(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qt(this.app)?Promise.reject(hn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qt(this.app)?Promise.reject(hn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cA(this),n=new hA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new oa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pn(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await Hs.create(this,[Pn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function kr(t){return Ve(t)}class Oy{constructor(e){this.auth=e,this.observer=null,this.addObserver=R1(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pA(t){Fu=t}function Zx(t){return Fu.loadJS(t)}function mA(){return Fu.recaptchaEnterpriseScript}function gA(){return Fu.gapiScript}function yA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const vA="recaptcha-enterprise",_A="NO_RECAPTCHA";class wA{constructor(e){this.type=vA,this.auth=kr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{XC(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new JC(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function s(i,o,a){const u=window.grecaptcha;Ay(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(_A)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Ay(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=mA();u.length!==0&&(u+=a),Zx(u).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Dy(t,e,n,r=!1){const s=new wA(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Eh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Dy(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Dy(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t,e){const n=Wf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ti(i,e??{}))return s;en(s,"already-initialized")}return n.initialize({options:e})}function EA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function SA(t,e,n){const r=kr(t);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=e0(e),{host:o,port:a}=TA(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),IA()}function e0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TA(t){const e=e0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:jy(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:jy(o)}}}function jy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function IA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Cn("not implemented")}_getIdTokenResponse(e){return Cn("not implemented")}_linkToIdToken(e,n){return Cn("not implemented")}_getReauthenticationResolver(e){return Cn("not implemented")}}async function bA(t,e){return Pr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(t,e){return ua(t,"POST","/v1/accounts:signInWithPassword",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))}async function PA(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo extends Yf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Wo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Wo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Eh(e,n,"signInWithPassword",CA);case"emailLink":return AA(e,{email:this._email,oobCode:this._password});default:en(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Eh(e,r,"signUpPassword",bA);case"emailLink":return PA(e,{idToken:n,email:this._email,oobCode:this._password});default:en(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(t,e){return ua(t,"POST","/v1/accounts:signInWithIdp",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="http://localhost";class ts extends Yf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):en("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Hf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ts(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qs(e,n)}buildRequest(){const e={requestUri:kA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=aa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RA(t){const e=Zi(eo(t)).link,n=e?Zi(eo(e)).deep_link_id:null,r=Zi(eo(t)).deep_link_id;return(r?Zi(eo(r)).link:null)||r||n||e||t}class Jf{constructor(e){var n,r,s,i,o,a;const u=Zi(eo(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=NA((s=u.mode)!==null&&s!==void 0?s:null);Y(c&&f&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=RA(e);try{return new Jf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.providerId=vi.PROVIDER_ID}static credential(e,n){return Wo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Jf.parseLink(n);return Y(r,"argument-error"),Wo._fromEmailAndCode(e,r.code,r.tenantId)}}vi.PROVIDER_ID="password";vi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends t0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends ca{constructor(){super("facebook.com")}static credential(e){return ts._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jn.credential(e.oauthAccessToken)}catch{return null}}}Jn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends ca{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ts._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xn.credential(n,r)}catch{return null}}}Xn.GOOGLE_SIGN_IN_METHOD="google.com";Xn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends ca{constructor(){super("github.com")}static credential(e){return ts._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zn.credential(e.oauthAccessToken)}catch{return null}}}Zn.GITHUB_SIGN_IN_METHOD="github.com";Zn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends ca{constructor(){super("twitter.com")}static credential(e,n){return ts._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return er.credential(n,r)}catch{return null}}}er.TWITTER_SIGN_IN_METHOD="twitter.com";er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n0(t,e){return ua(t,"POST","/v1/accounts:signUp",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await An._fromIdTokenResponse(e,r,s),o=Ly(r);return new Vn({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Ly(r);return new Vn({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Ly(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(t){var e;if(Qt(t.app))return Promise.reject(hn(t));const n=kr(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Vn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await n0(n,{returnSecureToken:!0}),s=await Vn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends $n{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,iu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new iu(e,n,r,s)}}function r0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?iu._fromErrorAndOperation(t,i,e,r):i})}async function DA(t,e,n=!1){const r=await zo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vn._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(t,e,n=!1){const{auth:r}=t;if(Qt(r.app))return Promise.reject(hn(r));const s="reauthenticate";try{const i=await zo(t,r0(r,s,e,t),n);Y(i.idToken,r,"internal-error");const o=Gf(i.idToken);Y(o,r,"internal-error");const{sub:a}=o;return Y(t.uid===a,r,"user-mismatch"),Vn._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&en(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s0(t,e,n=!1){if(Qt(t.app))return Promise.reject(hn(t));const r="signIn",s=await r0(t,r,e),i=await Vn._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function LA(t,e){return s0(kr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i0(t){const e=kr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VA(t,e,n){if(Qt(t.app))return Promise.reject(hn(t));const r=kr(t),o=await Eh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",n0).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&i0(t),u}),a=await Vn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function MA(t,e,n){return Qt(t.app)?Promise.reject(hn(t)):LA(Ve(t),vi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&i0(t),r})}function FA(t,e,n,r){return Ve(t).onIdTokenChanged(e,n,r)}function UA(t,e,n){return Ve(t).beforeAuthStateChanged(e,n)}function $A(t,e,n,r){return Ve(t).onAuthStateChanged(e,n,r)}function BA(t){return Ve(t).signOut()}const ou="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ou,"1"),this.storage.removeItem(ou),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=1e3,WA=10;class a0 extends o0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Jx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);lA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,WA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},zA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}a0.type="LOCAL";const HA=a0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0 extends o0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}l0.type="SESSION";const u0=l0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Uu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await qA(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=Xf("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return window}function GA(t){fn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(){return typeof fn().WorkerGlobalScope<"u"&&typeof fn().importScripts=="function"}async function QA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function JA(){return c0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="firebaseLocalStorageDb",XA=1,au="firebaseLocalStorage",h0="fbase_key";class da{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $u(t,e){return t.transaction([au],e?"readwrite":"readonly").objectStore(au)}function ZA(){const t=indexedDB.deleteDatabase(d0);return new da(t).toPromise()}function Sh(){const t=indexedDB.open(d0,XA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(au,{keyPath:h0})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(au)?e(r):(r.close(),await ZA(),e(await Sh()))})})}async function Vy(t,e,n){const r=$u(t,!0).put({[h0]:e,value:n});return new da(r).toPromise()}async function eP(t,e){const n=$u(t,!1).get(e),r=await new da(n).toPromise();return r===void 0?null:r.value}function My(t,e){const n=$u(t,!0).delete(e);return new da(n).toPromise()}const tP=800,nP=3;class f0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>nP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return c0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uu._getInstance(JA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await QA(),!this.activeServiceWorker)return;this.sender=new KA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sh();return await Vy(e,ou,"1"),await My(e,ou),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Vy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>eP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>My(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=$u(s,!1).getAll();return new da(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}f0.type="LOCAL";const rP=f0;new la(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(t,e){return e?Pn(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf extends Yf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function iP(t){return s0(t.auth,new Zf(t),t.bypassAuthState)}function oP(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),jA(n,new Zf(t),t.bypassAuthState)}async function aP(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),DA(n,new Zf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iP;case"linkViaPopup":case"linkViaRedirect":return aP;case"reauthViaPopup":case"reauthViaRedirect":return oP;default:en(this.auth,"internal-error")}}resolve(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new la(2e3,1e4);class Ls extends p0{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ls.currentPopupAction&&Ls.currentPopupAction.cancel(),Ls.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){Ln(this.filter.length===1,"Popup operations only handle one event");const e=Xf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ls.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lP.get())};e()}}Ls.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="pendingRedirect",Sl=new Map;class cP extends p0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Sl.get(this.auth._key());if(!e){try{const r=await dP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sl.set(this.auth._key(),e)}return this.bypassAuthState||Sl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dP(t,e){const n=pP(e),r=fP(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function hP(t,e){Sl.set(t._key(),e)}function fP(t){return Pn(t._redirectPersistence)}function pP(t){return El(uP,t.config.apiKey,t.name)}async function mP(t,e,n=!1){if(Qt(t.app))return Promise.reject(hn(t));const r=kr(t),s=sP(r,e),o=await new cP(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=10*60*1e3;class yP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!m0(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(dn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fy(e))}saveEventToCache(e){this.cachedEventUids.add(Fy(e)),this.lastProcessedEventTime=Date.now()}}function Fy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function m0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return m0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(t,e={}){return Pr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xP=/^https?/;async function EP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _P(t);for(const n of e)try{if(SP(n))return}catch{}en(t,"unauthorized-domain")}function SP(t){const e=wh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xP.test(n))return!1;if(wP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=new la(3e4,6e4);function Uy(){const t=fn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function IP(t){return new Promise((e,n)=>{var r,s,i;function o(){Uy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Uy(),n(dn(t,"network-request-failed"))},timeout:TP.get()})}if(!((s=(r=fn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=fn().gapi)===null||i===void 0)&&i.load)o();else{const a=yA("iframefcb");return fn()[a]=()=>{gapi.load?o():n(dn(t,"network-request-failed"))},Zx(`${gA()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Tl=null,e})}let Tl=null;function bP(t){return Tl=Tl||IP(t),Tl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=new la(5e3,15e3),AP="__/auth/iframe",PP="emulator/auth/iframe",kP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RP(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Kf(e,PP):`https://${t.config.authDomain}/${AP}`,r={apiKey:e.apiKey,appName:t.name,v:yi},s=NP.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${aa(r).slice(1)}`}async function OP(t){const e=await bP(t),n=fn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:RP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kP,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=dn(t,"network-request-failed"),a=fn().setTimeout(()=>{i(o)},CP.get());function u(){fn().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jP=500,LP=600,VP="_blank",MP="http://localhost";class $y{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FP(t,e,n,r=jP,s=LP){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},DP),{width:r.toString(),height:s.toString(),top:i,left:o}),c=ct().toLowerCase();n&&(a=qx(c)?VP:n),Wx(c)&&(e=e||MP,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[y,_])=>`${g}${y}=${_},`,"");if(aA(c)&&a!=="_self")return UP(e||"",a),new $y(null);const p=window.open(e||"",a,f);Y(p,t,"popup-blocked");try{p.focus()}catch{}return new $y(p)}function UP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="__/auth/handler",BP="emulator/auth/handler",zP=encodeURIComponent("fac");async function By(t,e,n,r,s,i){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yi,eventId:s};if(e instanceof t0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",N1(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof ca){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const u=await t._getAppCheckToken(),c=u?`#${zP}=${encodeURIComponent(u)}`:"";return`${WP(t)}?${aa(a).slice(1)}${c}`}function WP({config:t}){return t.emulator?Kf(t,BP):`https://${t.authDomain}/${$P}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="webStorageSupport";class HP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=u0,this._completeRedirectFn=mP,this._overrideRedirectResult=hP}async _openPopup(e,n,r,s){var i;Ln((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await By(e,n,r,wh(),s);return FP(e,o,Xf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await By(e,n,r,wh(),s);return GA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ln(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await OP(e),r=new yP(e);return n.register("authEvent",s=>(Y(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ld,{type:ld},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[ld];o!==void 0&&n(!!o),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Jx()||Hx()||Qf()}}const qP=HP;var zy="@firebase/auth",Wy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QP(t){ni(new es("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xx(t)},c=new fA(r,s,i,u);return EA(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ni(new es("auth-internal",e=>{const n=kr(e.getProvider("auth").getImmediate());return(r=>new KP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(zy,Wy,GP(t)),gr(zy,Wy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=5*60,JP=Ax("authIdTokenMaxAge")||YP;let Hy=null;const XP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>JP)return;const s=n==null?void 0:n.token;Hy!==s&&(Hy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ZP(t=Rx()){const e=Wf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xA(t,{popupRedirectResolver:qP,persistence:[rP,HA,u0]}),r=Ax("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=XP(i.toString());UA(n,o,()=>o(n.currentUser)),FA(n,a=>o(a))}}const s=bx("auth");return s&&SA(n,`http://${s}`),n}function ek(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}pA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=dn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",ek().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QP("Browser");const J=t=>typeof t=="string",Wi=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},qy=t=>t==null?"":""+t,tk=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},nk=/###/g,Ky=t=>t&&t.indexOf("###")>-1?t.replace(nk,"."):t,Gy=t=>!t||J(t),mo=(t,e,n)=>{const r=J(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(Gy(t))return{};const i=Ky(r[s]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++s}return Gy(t)?{}:{obj:t,k:Ky(r[s])}},Qy=(t,e,n)=>{const{obj:r,k:s}=mo(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),a=mo(t,o,Object);for(;a.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=mo(t,o,Object),a!=null&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},rk=(t,e,n,r)=>{const{obj:s,k:i}=mo(t,e,Object);s[i]=s[i]||[],s[i].push(n)},lu=(t,e)=>{const{obj:n,k:r}=mo(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},sk=(t,e,n)=>{const r=lu(t,n);return r!==void 0?r:lu(e,n)},g0=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?J(t[r])||t[r]instanceof String||J(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):g0(t[r],e[r],n):t[r]=e[r]);return t},Vr=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var ik={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const ok=t=>J(t)?t.replace(/[&<>"'\/]/g,e=>ik[e]):t;class ak{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const lk=[" ",",","?","!",";"],uk=new ak(20),ck=(t,e,n)=>{e=e||"",n=n||"";const r=lk.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const s=uk.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!s.test(t);if(!i){const o=t.indexOf(n);o>0&&!s.test(t.substring(0,o))&&(i=!0)}return i},Th=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let s=t;for(let i=0;i<r.length;){if(!s||typeof s!="object")return;let o,a="";for(let u=i;u<r.length;++u)if(u!==i&&(a+=n),a+=r[u],o=s[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&u<r.length-1)continue;i+=u-i+1;break}s=o}return s},Ho=t=>t==null?void 0:t.replace("_","-"),dk={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class uu{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||dk,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(J(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new uu(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new uu(this.logger,e)}}var ln=new uu;class Bu{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,i])=>{for(let o=0;o<i;o++)s(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,i])=>{for(let o=0;o<i;o++)s.apply(s,[e,...n])})}}class Yy extends Bu{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,s={}){var c,f;const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,o=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):J(r)&&i?a.push(...r.split(i)):a.push(r)));const u=lu(this.data,a);return!u&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),u||!o||!J(r)?u:Th((f=(c=this.data)==null?void 0:c[e])==null?void 0:f[n],r,i)}addResource(e,n,r,s,i={silent:!1}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),s=n,n=a[1]),this.addNamespaces(n),Qy(this.data,a,s),i.silent||this.emit("added",e,n,r,s)}addResources(e,n,r,s={silent:!1}){for(const i in r)(J(r[i])||Array.isArray(r[i]))&&this.addResource(e,n,i,r[i],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,i,o={silent:!1,skipCopy:!1}){let a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),s=r,r=n,n=a[1]),this.addNamespaces(n);let u=lu(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?g0(u,r,i):u={...u,...r},Qy(this.data,a,u),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var y0={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(i=>{var o;e=((o=this.processors[i])==null?void 0:o.process(e,n,r,s))??e}),e}};const v0=Symbol("i18next/PATH_KEY");function hk(){const t=[],e=Object.create(null);let n;return e.get=(r,s)=>{var i;return(i=n==null?void 0:n.revoke)==null||i.call(n),s===v0?t:(t.push(s),n=Proxy.revocable(r,e),n.proxy)},Proxy.revocable(Object.create(null),e).proxy}function Ih(t,e){const{[v0]:n}=t(hk());return n.join((e==null?void 0:e.keySeparator)??".")}const Jy={},ud=t=>!J(t)&&typeof t!="boolean"&&typeof t!="number";class cu extends Bu{constructor(e,n={}){super(),tk(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ln.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const s=this.resolve(e,r);if((s==null?void 0:s.res)===void 0)return!1;const i=ud(s.res);return!(r.returnObjects===!1&&i)}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!ck(e,r,s);if(o&&!a){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:J(i)?[i]:i};const c=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(c[0])>-1)&&(i=c.shift()),e=c.join(s)}return{key:e,namespaces:J(i)?[i]:i}}translate(e,n,r){let s=typeof n=="object"?{...n}:n;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=Ih(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const i=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:a,namespaces:u}=this.extractFromKey(e[e.length-1],s),c=u[u.length-1];let f=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");const p=s.lng||this.language,g=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((p==null?void 0:p.toLowerCase())==="cimode")return g?i?{res:`${c}${f}${a}`,usedKey:a,exactUsedKey:a,usedLng:p,usedNS:c,usedParams:this.getUsedParamsDetails(s)}:`${c}${f}${a}`:i?{res:a,usedKey:a,exactUsedKey:a,usedLng:p,usedNS:c,usedParams:this.getUsedParamsDetails(s)}:a;const y=this.resolve(e,s);let _=y==null?void 0:y.res;const A=(y==null?void 0:y.usedKey)||a,k=(y==null?void 0:y.exactUsedKey)||a,I=["[object Number]","[object Function]","[object RegExp]"],v=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,T=!this.i18nFormat||this.i18nFormat.handleAsObject,R=s.count!==void 0&&!J(s.count),L=cu.hasDefaultValue(s),M=R?this.pluralResolver.getSuffix(p,s.count,s):"",S=s.ordinal&&R?this.pluralResolver.getSuffix(p,s.count,{ordinal:!1}):"",w=R&&!s.ordinal&&s.count===0,E=w&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${M}`]||s[`defaultValue${S}`]||s.defaultValue;let b=_;T&&!_&&L&&(b=E);const P=ud(b),N=Object.prototype.toString.apply(b);if(T&&b&&P&&I.indexOf(N)<0&&!(J(v)&&Array.isArray(b))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(A,b,{...s,ns:u}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(y.res=C,y.usedParams=this.getUsedParamsDetails(s),y):C}if(o){const C=Array.isArray(b),Z=C?[]:{},he=C?k:A;for(const Pe in b)if(Object.prototype.hasOwnProperty.call(b,Pe)){const be=`${he}${o}${Pe}`;L&&!_?Z[Pe]=this.translate(be,{...s,defaultValue:ud(E)?E[Pe]:void 0,joinArrays:!1,ns:u}):Z[Pe]=this.translate(be,{...s,joinArrays:!1,ns:u}),Z[Pe]===be&&(Z[Pe]=b[Pe])}_=Z}}else if(T&&J(v)&&Array.isArray(_))_=_.join(v),_&&(_=this.extendTranslation(_,e,s,r));else{let C=!1,Z=!1;!this.isValidLookup(_)&&L&&(C=!0,_=E),this.isValidLookup(_)||(Z=!0,_=a);const Pe=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Z?void 0:_,be=L&&E!==_&&this.options.updateMissing;if(Z||C||be){if(this.logger.log(be?"updateKey":"missingKey",p,c,a,be?E:_),o){const te=this.resolve(a,{...s,keySeparator:!1});te&&te.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let B=[];const K=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&K&&K[0])for(let te=0;te<K.length;te++)B.push(K[te]);else this.options.saveMissingTo==="all"?B=this.languageUtils.toResolveHierarchy(s.lng||this.language):B.push(s.lng||this.language);const ee=(te,se,pe)=>{var Dt;const Ot=L&&pe!==_?pe:Pe;this.options.missingKeyHandler?this.options.missingKeyHandler(te,c,se,Ot,be,s):(Dt=this.backendConnector)!=null&&Dt.saveMissing&&this.backendConnector.saveMissing(te,c,se,Ot,be,s),this.emit("missingKey",te,c,se,_)};this.options.saveMissing&&(this.options.saveMissingPlurals&&R?B.forEach(te=>{const se=this.pluralResolver.getSuffixes(te,s);w&&s[`defaultValue${this.options.pluralSeparator}zero`]&&se.indexOf(`${this.options.pluralSeparator}zero`)<0&&se.push(`${this.options.pluralSeparator}zero`),se.forEach(pe=>{ee([te],a+pe,s[`defaultValue${pe}`]||E)})}):ee(B,a,E))}_=this.extendTranslation(_,e,s,y,r),Z&&_===a&&this.options.appendNamespaceToMissingKey&&(_=`${c}${f}${a}`),(Z||C)&&this.options.parseMissingKeyHandler&&(_=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${f}${a}`:a,C?_:void 0,s))}return i?(y.res=_,y.usedParams=this.getUsedParamsDetails(s),y):_}extendTranslation(e,n,r,s,i){var u,c;if((u=this.i18nFormat)!=null&&u.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const f=J(e)&&(((c=r==null?void 0:r.interpolation)==null?void 0:c.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let p;if(f){const y=e.match(this.interpolator.nestingRegexp);p=y&&y.length}let g=r.replace&&!J(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,r.lng||this.language||s.usedLng,r),f){const y=e.match(this.interpolator.nestingRegexp),_=y&&y.length;p<_&&(r.nest=!1)}!r.lng&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...y)=>(i==null?void 0:i[0])===y[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${n[0]}`),null):this.translate(...y,n),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,a=J(o)?[o]:o;return e!=null&&(a!=null&&a.length)&&r.applyPostProcessor!==!1&&(e=y0.handle(a,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,s,i,o,a;return J(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(u,n),f=c.key;s=f;let p=c.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const g=n.count!==void 0&&!J(n.count),y=g&&!n.ordinal&&n.count===0,_=n.context!==void 0&&(J(n.context)||typeof n.context=="number")&&n.context!=="",A=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);p.forEach(k=>{var I,v;this.isValidLookup(r)||(a=k,!Jy[`${A[0]}-${k}`]&&((I=this.utils)!=null&&I.hasLoadedNamespace)&&!((v=this.utils)!=null&&v.hasLoadedNamespace(a))&&(Jy[`${A[0]}-${k}`]=!0,this.logger.warn(`key "${s}" for languages "${A.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),A.forEach(T=>{var M;if(this.isValidLookup(r))return;o=T;const R=[f];if((M=this.i18nFormat)!=null&&M.addLookupKeys)this.i18nFormat.addLookupKeys(R,f,T,k,n);else{let S;g&&(S=this.pluralResolver.getSuffix(T,n.count,n));const w=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(g&&(n.ordinal&&S.indexOf(E)===0&&R.push(f+S.replace(E,this.options.pluralSeparator)),R.push(f+S),y&&R.push(f+w)),_){const b=`${f}${this.options.contextSeparator||"_"}${n.context}`;R.push(b),g&&(n.ordinal&&S.indexOf(E)===0&&R.push(b+S.replace(E,this.options.pluralSeparator)),R.push(b+S),y&&R.push(b+w))}}let L;for(;L=R.pop();)this.isValidLookup(r)||(i=L,r=this.getResource(T,k,L,n))}))})}),{res:r,usedKey:s,exactUsedKey:i,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,s={}){var i;return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!J(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const i of n)delete s[i]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class Xy{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ln.create("languageUtils")}getScriptPartFromCode(e){if(e=Ho(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Ho(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(J(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getScriptPartFromCode(r);if(this.isSupportedCode(s))return n=s;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),J(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),s=[],i=o=>{o&&(this.isSupportedCode(o)?s.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return J(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):J(e)&&i(this.formatLanguageCode(e)),r.forEach(o=>{s.indexOf(o)<0&&i(this.formatLanguageCode(o))}),s}}const Zy={zero:0,one:1,two:2,few:3,many:4,other:5},ev={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class fk{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=ln.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=Ho(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:s})}catch{if(typeof Intl>"u")return this.logger.error("No Intl support, please use an Intl polyfill!"),ev;if(!e.match(/-|_/))return ev;const u=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(u,n)}return this.pluralRulesCache[i]=o,o}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((s,i)=>Zy[s]-Zy[i]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,n,r={}){const s=this.getRule(e,r);return s?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const tv=(t,e,n,r=".",s=!0)=>{let i=sk(t,e,n);return!i&&s&&J(n)&&(i=Th(t,n,r),i===void 0&&(i=Th(e,n,r))),i},cd=t=>t.replace(/\$/g,"$$$$");class nv{constructor(e={}){var n;this.logger=ln.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:i,prefixEscaped:o,suffix:a,suffixEscaped:u,formatSeparator:c,unescapeSuffix:f,unescapePrefix:p,nestingPrefix:g,nestingPrefixEscaped:y,nestingSuffix:_,nestingSuffixEscaped:A,nestingOptionsSeparator:k,maxReplaces:I,alwaysFormat:v}=e.interpolation;this.escape=n!==void 0?n:ok,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?Vr(i):o||"{{",this.suffix=a?Vr(a):u||"}}",this.formatSeparator=c||",",this.unescapePrefix=f?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=g?Vr(g):y||Vr("$t("),this.nestingSuffix=_?Vr(_):A||Vr(")"),this.nestingOptionsSeparator=k||",",this.maxReplaces=I||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,s){var y;let i,o,a;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=_=>{if(_.indexOf(this.formatSeparator)<0){const v=tv(n,u,_,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(v,void 0,r,{...s,...n,interpolationkey:_}):v}const A=_.split(this.formatSeparator),k=A.shift().trim(),I=A.join(this.formatSeparator).trim();return this.format(tv(n,u,k,this.options.keySeparator,this.options.ignoreJSONStructure),I,r,{...s,...n,interpolationkey:k})};this.resetRegExp();const f=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,p=((y=s==null?void 0:s.interpolation)==null?void 0:y.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:_=>cd(_)},{regex:this.regexp,safeValue:_=>this.escapeValue?cd(this.escape(_)):cd(_)}].forEach(_=>{for(a=0;i=_.regex.exec(e);){const A=i[1].trim();if(o=c(A),o===void 0)if(typeof f=="function"){const I=f(e,i,s);o=J(I)?I:""}else if(s&&Object.prototype.hasOwnProperty.call(s,A))o="";else if(p){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${A} for interpolating ${e}`),o="";else!J(o)&&!this.useRawValueToEscape&&(o=qy(o));const k=_.safeValue(o);if(e=e.replace(i[0],k),p?(_.regex.lastIndex+=o.length,_.regex.lastIndex-=i[0].length):_.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n,r={}){let s,i,o;const a=(u,c)=>{const f=this.nestingOptionsSeparator;if(u.indexOf(f)<0)return u;const p=u.split(new RegExp(`${Vr(f)}[ ]*{`));let g=`{${p[1]}`;u=p[0],g=this.interpolate(g,o);const y=g.match(/'/g),_=g.match(/"/g);(((y==null?void 0:y.length)??0)%2===0&&!_||((_==null?void 0:_.length)??0)%2!==0)&&(g=g.replace(/'/g,'"'));try{o=JSON.parse(g),c&&(o={...c,...o})}catch(A){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,A),`${u}${f}${g}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,u};for(;s=this.nestingRegexp.exec(e);){let u=[];o={...r},o=o.replace&&!J(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const c=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(c!==-1&&(u=s[1].slice(c).split(this.formatSeparator).map(f=>f.trim()).filter(Boolean),s[1]=s[1].slice(0,c)),i=n(a.call(this,s[1].trim(),o),o),i&&s[0]===e&&!J(i))return i;J(i)||(i=qy(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),u.length&&(i=u.reduce((f,p)=>this.format(f,p,r.lng,{...r,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const pk=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(o=>{if(o){const[a,...u]=o.split(":"),c=u.join(":").trim().replace(/^'+|'+$/g,""),f=a.trim();n[f]||(n[f]=c),c==="false"&&(n[f]=!1),c==="true"&&(n[f]=!0),isNaN(c)||(n[f]=parseInt(c,10))}})}return{formatName:e,formatOptions:n}},rv=t=>{const e={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const o=r+JSON.stringify(i);let a=e[o];return a||(a=t(Ho(r),s),e[o]=a),a(n)}},mk=t=>(e,n,r)=>t(Ho(n),r)(e);class gk{constructor(e={}){this.logger=ln.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?rv:mk;this.formats={number:r((s,i)=>{const o=new Intl.NumberFormat(s,{...i});return a=>o.format(a)}),currency:r((s,i)=>{const o=new Intl.NumberFormat(s,{...i,style:"currency"});return a=>o.format(a)}),datetime:r((s,i)=>{const o=new Intl.DateTimeFormat(s,{...i});return a=>o.format(a)}),relativetime:r((s,i)=>{const o=new Intl.RelativeTimeFormat(s,{...i});return a=>o.format(a,i.range||"day")}),list:r((s,i)=>{const o=new Intl.ListFormat(s,{...i});return a=>o.format(a)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=rv(n)}format(e,n,r,s={}){const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){const a=i.findIndex(u=>u.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,u)=>{var p;const{formatName:c,formatOptions:f}=pk(u);if(this.formats[c]){let g=a;try{const y=((p=s==null?void 0:s.formatParams)==null?void 0:p[s.interpolationkey])||{},_=y.locale||y.lng||s.locale||s.lng||r;g=this.formats[c](a,_,{...f,...s,...y})}catch(y){this.logger.warn(y)}return g}else this.logger.warn(`there was no format function for ${c}`);return a},e)}}const yk=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class vk extends Bu{constructor(e,n,r,s={}){var i,o;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=ln.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(o=(i=this.backend)==null?void 0:i.init)==null||o.call(i,r,s.backend,s)}queueLoad(e,n,r,s){const i={},o={},a={},u={};return e.forEach(c=>{let f=!0;n.forEach(p=>{const g=`${c}|${p}`;!r.reload&&this.store.hasResourceBundle(c,p)?this.state[g]=2:this.state[g]<0||(this.state[g]===1?o[g]===void 0&&(o[g]=!0):(this.state[g]=1,f=!1,o[g]===void 0&&(o[g]=!0),i[g]===void 0&&(i[g]=!0),u[p]===void 0&&(u[p]=!0)))}),f||(a[c]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(u)}}loaded(e,n,r){const s=e.split("|"),i=s[0],o=s[1];n&&this.emit("failedLoading",i,o,n),!n&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(u=>{rk(u.loaded,[i],o),yk(u,e),n&&u.errors.push(n),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(c=>{a[c]||(a[c]={});const f=u.loaded[c];f.length&&f.forEach(p=>{a[c][p]===void 0&&(a[c][p]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(u=>!u.done)}read(e,n,r,s=0,i=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:i,callback:o});return}this.readingCalls++;const a=(c,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(c&&f&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,i*2,o)},i);return}o(c,f)},u=this.backend[r].bind(this.backend);if(u.length===2){try{const c=u(e,n);c&&typeof c.then=="function"?c.then(f=>a(null,f)).catch(a):a(null,c)}catch(c){a(c)}return}return u(e,n,a)}prepareLoading(e,n,r={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();J(e)&&(e=this.languageUtils.toResolveHierarchy(e)),J(n)&&(n=[n]);const i=this.queueLoad(e,n,r,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),s=r[0],i=r[1];this.read(s,i,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${s} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${i} for language ${s}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,s,i,o={},a=()=>{}){var u,c,f,p,g;if((c=(u=this.services)==null?void 0:u.utils)!=null&&c.hasLoadedNamespace&&!((p=(f=this.services)==null?void 0:f.utils)!=null&&p.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((g=this.backend)!=null&&g.create){const y={...o,isUpdate:i},_=this.backend.create.bind(this.backend);if(_.length<6)try{let A;_.length===5?A=_(e,n,r,s,y):A=_(e,n,r,s),A&&typeof A.then=="function"?A.then(k=>a(null,k)).catch(a):a(null,A)}catch(A){a(A)}else _(e,n,r,s,a,y)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const dd=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),J(t[1])&&(e.defaultValue=t[1]),J(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),sv=t=>{var e,n;return J(t.ns)&&(t.ns=[t.ns]),J(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),J(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},rl=()=>{},_k=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};let iv=!1;const wk=t=>{var e,n,r,s,i,o,a,u,c;return!!(((r=(n=(e=t==null?void 0:t.modules)==null?void 0:e.backend)==null?void 0:n.name)==null?void 0:r.indexOf("Locize"))>0||((a=(o=(i=(s=t==null?void 0:t.modules)==null?void 0:s.backend)==null?void 0:i.constructor)==null?void 0:o.name)==null?void 0:a.indexOf("Locize"))>0||(c=(u=t==null?void 0:t.options)==null?void 0:u.backend)!=null&&c.backends&&t.options.backend.backends.some(f=>{var p,g,y;return((p=f==null?void 0:f.name)==null?void 0:p.indexOf("Locize"))>0||((y=(g=f==null?void 0:f.constructor)==null?void 0:g.name)==null?void 0:y.indexOf("Locize"))>0}))};class go extends Bu{constructor(e={},n){if(super(),this.options=sv(e),this.services={},this.logger=ln,this.modules={external:[]},_k(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(J(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=dd();this.options={...r,...this.options,...sv(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler),this.options.showSupportNotice!==!1&&!wk(this)&&!iv&&(typeof console<"u"&&typeof console.info<"u"&&console.info(" i18next is maintained with support from Locize  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com "),iv=!0);const s=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?ln.init(s(this.modules.logger),this.options):ln.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=gk;const f=new Xy(this.options);this.store=new Yy(this.options.resources,this.options);const p=this.services;p.logger=ln,p.resourceStore=this.store,p.languageUtils=f,p.pluralResolver=new fk(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),c&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(p.formatter=s(c),p.formatter.init&&p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new nv(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new vk(s(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",(y,..._)=>{this.emit(y,..._)}),this.modules.languageDetector&&(p.languageDetector=s(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=s(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new cu(this.services,this.options),this.translator.on("*",(y,..._)=>{this.emit(y,..._)}),this.modules.external.forEach(y=>{y.init&&y.init(this)})}if(this.format=this.options.interpolation.format,n||(n=rl),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=(...f)=>this.store[c](...f)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=(...f)=>(this.store[c](...f),this)});const a=Wi(),u=()=>{const c=(f,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(p),n(f,p)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),a}loadResources(e,n=rl){var i,o;let r=n;const s=J(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],u=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(p=>{p!=="cimode"&&a.indexOf(p)<0&&a.push(p)})};s?u(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(f=>u(f)),(o=(i=this.options.preload)==null?void 0:i.forEach)==null||o.call(i,c=>u(c)),this.services.backendConnector.load(a,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(c)})}else r(null)}reloadResources(e,n,r){const s=Wi();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=rl),this.services.backendConnector.reload(e,n,i=>{s.resolve(),r(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&y0.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Wi();this.emit("languageChanging",e);const s=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},i=(a,u)=>{u?this.isLanguageChangingTo===e&&(s(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve((...c)=>this.t(...c)),n&&n(a,(...c)=>this.t(...c))},o=a=>{var f,p;!e&&!a&&this.services.languageDetector&&(a=[]);const u=J(a)?a:a&&a[0],c=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(J(a)?[a]:a);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),(p=(f=this.services.languageDetector)==null?void 0:f.cacheUserLanguage)==null||p.call(f,c)),this.loadResources(c,g=>{i(g,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),r}getFixedT(e,n,r){const s=(i,o,...a)=>{let u;typeof o!="object"?u=this.options.overloadTranslationOptionHandler([i,o].concat(a)):u={...o},u.lng=u.lng||s.lng,u.lngs=u.lngs||s.lngs,u.ns=u.ns||s.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||r||s.keyPrefix);const c=this.options.keySeparator||".";let f;return u.keyPrefix&&Array.isArray(i)?f=i.map(p=>(typeof p=="function"&&(p=Ih(p,{...this.options,...o})),`${u.keyPrefix}${c}${p}`)):(typeof i=="function"&&(i=Ih(i,{...this.options,...o})),f=u.keyPrefix?`${u.keyPrefix}${c}${i}`:i),this.t(f,u)};return J(e)?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,u)=>{const c=this.services.backendConnector.state[`${a}|${u}`];return c===-1||c===0||c===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!s||o(i,e)))}loadNamespaces(e,n){const r=Wi();return this.options.ns?(J(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Wi();J(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(o=>s.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=s.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){var s,i;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const o=new Intl.Locale(e);if(o&&o.getTextInfo){const a=o.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((i=this.services)==null?void 0:i.languageUtils)||new Xy(dd());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){const r=new go(e,n);return r.createInstance=go.createInstance,r}cloneInstance(e={},n=rl){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new go(s);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const a=Object.keys(this.store.data).reduce((u,c)=>(u[c]={...this.store.data[c]},u[c]=Object.keys(u[c]).reduce((f,p)=>(f[p]={...u[c][p]},f),u[c]),u),{});i.store=new Yy(a,s),i.services.resourceStore=i.store}if(e.interpolation){const u={...dd().interpolation,...this.options.interpolation,...e.interpolation},c={...s,interpolation:u};i.services.interpolator=new nv(c)}return i.translator=new cu(i.services,s),i.translator.on("*",(a,...u)=>{i.emit(a,...u)}),i.init(s,n),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const vt=go.createInstance();vt.createInstance;vt.dir;vt.init;vt.loadResources;vt.reloadResources;vt.use;vt.changeLanguage;vt.getFixedT;vt.t;vt.exists;vt.setDefaultNamespace;vt.hasLoadedNamespace;vt.loadNamespaces;vt.loadLanguages;const xk=(t,e,n,r)=>{var i,o,a,u;const s=[n,{code:e,...r||{}}];if((o=(i=t==null?void 0:t.services)==null?void 0:i.logger)!=null&&o.forward)return t.services.logger.forward(s,"warn","react-i18next::",!0);ns(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),(u=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&u.warn?t.services.logger.warn(...s):console!=null&&console.warn&&console.warn(...s)},ov={},_0=(t,e,n,r)=>{ns(n)&&ov[n]||(ns(n)&&(ov[n]=new Date),xk(t,e,n,r))},w0=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},bh=(t,e,n)=>{t.loadNamespaces(e,w0(t,n))},av=(t,e,n,r)=>{if(ns(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return bh(t,n,r);n.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,w0(t,r))},Ek=(t,e,n={})=>!e.languages||!e.languages.length?(_0(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!s(r.isLanguageChangingTo,t))return!1}}),ns=t=>typeof t=="string",Sk=t=>typeof t=="object"&&t!==null,Tk=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Ik={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},bk=t=>Ik[t],Ck=t=>t.replace(Tk,bk);let Ch={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Ck,transDefaultProps:void 0};const Ak=(t={})=>{Ch={...Ch,...t}},Pk=()=>Ch;let x0;const kk=t=>{x0=t},Nk=()=>x0,Rk={type:"3rdParty",init(t){Ak(t.options.react),kk(t)}},Ok=O.createContext();class Dk{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var E0={exports:{}},S0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ri=O;function jk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Lk=typeof Object.is=="function"?Object.is:jk,Vk=ri.useState,Mk=ri.useEffect,Fk=ri.useLayoutEffect,Uk=ri.useDebugValue;function $k(t,e){var n=e(),r=Vk({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Fk(function(){s.value=n,s.getSnapshot=e,hd(s)&&i({inst:s})},[t,n,e]),Mk(function(){return hd(s)&&i({inst:s}),t(function(){hd(s)&&i({inst:s})})},[t]),Uk(n),n}function hd(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Lk(t,n)}catch{return!0}}function Bk(t,e){return e()}var zk=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Bk:$k;S0.useSyncExternalStore=ri.useSyncExternalStore!==void 0?ri.useSyncExternalStore:zk;E0.exports=S0;var Wk=E0.exports;const Hk=(t,e)=>ns(e)?e:Sk(e)&&ns(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,qk={t:Hk,ready:!1},Kk=()=>()=>{},cs=(t,e={})=>{var E,b,P;const{i18n:n}=e,{i18n:r,defaultNS:s}=O.useContext(Ok)||{},i=n||r||Nk();i&&!i.reportNamespaces&&(i.reportNamespaces=new Dk),i||_0(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const o=O.useMemo(()=>{var N;return{...Pk(),...(N=i==null?void 0:i.options)==null?void 0:N.react,...e}},[i,e]),{useSuspense:a,keyPrefix:u}=o,c=s||((E=i==null?void 0:i.options)==null?void 0:E.defaultNS),f=ns(c)?[c]:c||["translation"],p=O.useMemo(()=>f,f);(P=(b=i==null?void 0:i.reportNamespaces)==null?void 0:b.addUsedNamespaces)==null||P.call(b,p);const g=O.useRef(0),y=O.useCallback(N=>{if(!i)return Kk;const{bindI18n:C,bindI18nStore:Z}=o,he=()=>{g.current+=1,N()};return C&&i.on(C,he),Z&&i.store.on(Z,he),()=>{C&&C.split(" ").forEach(Pe=>i.off(Pe,he)),Z&&Z.split(" ").forEach(Pe=>i.store.off(Pe,he))}},[i,o]),_=O.useRef(),A=O.useCallback(()=>{if(!i)return qk;const N=!!(i.isInitialized||i.initializedStoreOnce)&&p.every(B=>Ek(B,i,o)),C=e.lng||i.language,Z=g.current,he=_.current;if(he&&he.ready===N&&he.lng===C&&he.keyPrefix===u&&he.revision===Z)return he;const be={t:i.getFixedT(C,o.nsMode==="fallback"?p:p[0],u),ready:N,lng:C,keyPrefix:u,revision:Z};return _.current=be,be},[i,p,u,o,e.lng]),[k,I]=O.useState(0),{t:v,ready:T}=Wk.useSyncExternalStore(y,A,A);O.useEffect(()=>{if(i&&!T&&!a){const N=()=>I(C=>C+1);e.lng?av(i,e.lng,p,N):bh(i,p,N)}},[i,e.lng,p,T,a,k]);const R=i||{},L=O.useRef(null),M=O.useRef(),S=N=>{const C=Object.getOwnPropertyDescriptors(N);C.__original&&delete C.__original;const Z=Object.create(Object.getPrototypeOf(N),C);if(!Object.prototype.hasOwnProperty.call(Z,"__original"))try{Object.defineProperty(Z,"__original",{value:N,writable:!1,enumerable:!1,configurable:!1})}catch{}return Z},w=O.useMemo(()=>{const N=R,C=N==null?void 0:N.language;let Z=N;N&&(L.current&&L.current.__original===N?M.current!==C?(Z=S(N),L.current=Z,M.current=C):Z=L.current:(Z=S(N),L.current=Z,M.current=C));const he=[v,Z,T];return he.t=v,he.i18n=Z,he.ready=T,he},[v,R,T,R.resolvedLanguage,R.language,R.languages]);if(i&&a&&!T)throw new Promise(N=>{const C=()=>N();e.lng?av(i,e.lng,p,C):bh(i,p,C)});return w};var lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gr,T0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,w){function E(){}E.prototype=w.prototype,S.D=w.prototype,S.prototype=new E,S.prototype.constructor=S,S.C=function(b,P,N){for(var C=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)C[Z-2]=arguments[Z];return w.prototype[P].apply(b,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,w,E){E||(E=0);var b=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)b[P]=w.charCodeAt(E++)|w.charCodeAt(E++)<<8|w.charCodeAt(E++)<<16|w.charCodeAt(E++)<<24;else for(P=0;16>P;++P)b[P]=w[E++]|w[E++]<<8|w[E++]<<16|w[E++]<<24;w=S.g[0],E=S.g[1],P=S.g[2];var N=S.g[3],C=w+(N^E&(P^N))+b[0]+3614090360&4294967295;w=E+(C<<7&4294967295|C>>>25),C=N+(P^w&(E^P))+b[1]+3905402710&4294967295,N=w+(C<<12&4294967295|C>>>20),C=P+(E^N&(w^E))+b[2]+606105819&4294967295,P=N+(C<<17&4294967295|C>>>15),C=E+(w^P&(N^w))+b[3]+3250441966&4294967295,E=P+(C<<22&4294967295|C>>>10),C=w+(N^E&(P^N))+b[4]+4118548399&4294967295,w=E+(C<<7&4294967295|C>>>25),C=N+(P^w&(E^P))+b[5]+1200080426&4294967295,N=w+(C<<12&4294967295|C>>>20),C=P+(E^N&(w^E))+b[6]+2821735955&4294967295,P=N+(C<<17&4294967295|C>>>15),C=E+(w^P&(N^w))+b[7]+4249261313&4294967295,E=P+(C<<22&4294967295|C>>>10),C=w+(N^E&(P^N))+b[8]+1770035416&4294967295,w=E+(C<<7&4294967295|C>>>25),C=N+(P^w&(E^P))+b[9]+2336552879&4294967295,N=w+(C<<12&4294967295|C>>>20),C=P+(E^N&(w^E))+b[10]+4294925233&4294967295,P=N+(C<<17&4294967295|C>>>15),C=E+(w^P&(N^w))+b[11]+2304563134&4294967295,E=P+(C<<22&4294967295|C>>>10),C=w+(N^E&(P^N))+b[12]+1804603682&4294967295,w=E+(C<<7&4294967295|C>>>25),C=N+(P^w&(E^P))+b[13]+4254626195&4294967295,N=w+(C<<12&4294967295|C>>>20),C=P+(E^N&(w^E))+b[14]+2792965006&4294967295,P=N+(C<<17&4294967295|C>>>15),C=E+(w^P&(N^w))+b[15]+1236535329&4294967295,E=P+(C<<22&4294967295|C>>>10),C=w+(P^N&(E^P))+b[1]+4129170786&4294967295,w=E+(C<<5&4294967295|C>>>27),C=N+(E^P&(w^E))+b[6]+3225465664&4294967295,N=w+(C<<9&4294967295|C>>>23),C=P+(w^E&(N^w))+b[11]+643717713&4294967295,P=N+(C<<14&4294967295|C>>>18),C=E+(N^w&(P^N))+b[0]+3921069994&4294967295,E=P+(C<<20&4294967295|C>>>12),C=w+(P^N&(E^P))+b[5]+3593408605&4294967295,w=E+(C<<5&4294967295|C>>>27),C=N+(E^P&(w^E))+b[10]+38016083&4294967295,N=w+(C<<9&4294967295|C>>>23),C=P+(w^E&(N^w))+b[15]+3634488961&4294967295,P=N+(C<<14&4294967295|C>>>18),C=E+(N^w&(P^N))+b[4]+3889429448&4294967295,E=P+(C<<20&4294967295|C>>>12),C=w+(P^N&(E^P))+b[9]+568446438&4294967295,w=E+(C<<5&4294967295|C>>>27),C=N+(E^P&(w^E))+b[14]+3275163606&4294967295,N=w+(C<<9&4294967295|C>>>23),C=P+(w^E&(N^w))+b[3]+4107603335&4294967295,P=N+(C<<14&4294967295|C>>>18),C=E+(N^w&(P^N))+b[8]+1163531501&4294967295,E=P+(C<<20&4294967295|C>>>12),C=w+(P^N&(E^P))+b[13]+2850285829&4294967295,w=E+(C<<5&4294967295|C>>>27),C=N+(E^P&(w^E))+b[2]+4243563512&4294967295,N=w+(C<<9&4294967295|C>>>23),C=P+(w^E&(N^w))+b[7]+1735328473&4294967295,P=N+(C<<14&4294967295|C>>>18),C=E+(N^w&(P^N))+b[12]+2368359562&4294967295,E=P+(C<<20&4294967295|C>>>12),C=w+(E^P^N)+b[5]+4294588738&4294967295,w=E+(C<<4&4294967295|C>>>28),C=N+(w^E^P)+b[8]+2272392833&4294967295,N=w+(C<<11&4294967295|C>>>21),C=P+(N^w^E)+b[11]+1839030562&4294967295,P=N+(C<<16&4294967295|C>>>16),C=E+(P^N^w)+b[14]+4259657740&4294967295,E=P+(C<<23&4294967295|C>>>9),C=w+(E^P^N)+b[1]+2763975236&4294967295,w=E+(C<<4&4294967295|C>>>28),C=N+(w^E^P)+b[4]+1272893353&4294967295,N=w+(C<<11&4294967295|C>>>21),C=P+(N^w^E)+b[7]+4139469664&4294967295,P=N+(C<<16&4294967295|C>>>16),C=E+(P^N^w)+b[10]+3200236656&4294967295,E=P+(C<<23&4294967295|C>>>9),C=w+(E^P^N)+b[13]+681279174&4294967295,w=E+(C<<4&4294967295|C>>>28),C=N+(w^E^P)+b[0]+3936430074&4294967295,N=w+(C<<11&4294967295|C>>>21),C=P+(N^w^E)+b[3]+3572445317&4294967295,P=N+(C<<16&4294967295|C>>>16),C=E+(P^N^w)+b[6]+76029189&4294967295,E=P+(C<<23&4294967295|C>>>9),C=w+(E^P^N)+b[9]+3654602809&4294967295,w=E+(C<<4&4294967295|C>>>28),C=N+(w^E^P)+b[12]+3873151461&4294967295,N=w+(C<<11&4294967295|C>>>21),C=P+(N^w^E)+b[15]+530742520&4294967295,P=N+(C<<16&4294967295|C>>>16),C=E+(P^N^w)+b[2]+3299628645&4294967295,E=P+(C<<23&4294967295|C>>>9),C=w+(P^(E|~N))+b[0]+4096336452&4294967295,w=E+(C<<6&4294967295|C>>>26),C=N+(E^(w|~P))+b[7]+1126891415&4294967295,N=w+(C<<10&4294967295|C>>>22),C=P+(w^(N|~E))+b[14]+2878612391&4294967295,P=N+(C<<15&4294967295|C>>>17),C=E+(N^(P|~w))+b[5]+4237533241&4294967295,E=P+(C<<21&4294967295|C>>>11),C=w+(P^(E|~N))+b[12]+1700485571&4294967295,w=E+(C<<6&4294967295|C>>>26),C=N+(E^(w|~P))+b[3]+2399980690&4294967295,N=w+(C<<10&4294967295|C>>>22),C=P+(w^(N|~E))+b[10]+4293915773&4294967295,P=N+(C<<15&4294967295|C>>>17),C=E+(N^(P|~w))+b[1]+2240044497&4294967295,E=P+(C<<21&4294967295|C>>>11),C=w+(P^(E|~N))+b[8]+1873313359&4294967295,w=E+(C<<6&4294967295|C>>>26),C=N+(E^(w|~P))+b[15]+4264355552&4294967295,N=w+(C<<10&4294967295|C>>>22),C=P+(w^(N|~E))+b[6]+2734768916&4294967295,P=N+(C<<15&4294967295|C>>>17),C=E+(N^(P|~w))+b[13]+1309151649&4294967295,E=P+(C<<21&4294967295|C>>>11),C=w+(P^(E|~N))+b[4]+4149444226&4294967295,w=E+(C<<6&4294967295|C>>>26),C=N+(E^(w|~P))+b[11]+3174756917&4294967295,N=w+(C<<10&4294967295|C>>>22),C=P+(w^(N|~E))+b[2]+718787259&4294967295,P=N+(C<<15&4294967295|C>>>17),C=E+(N^(P|~w))+b[9]+3951481745&4294967295,S.g[0]=S.g[0]+w&4294967295,S.g[1]=S.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.u=function(S,w){w===void 0&&(w=S.length);for(var E=w-this.blockSize,b=this.B,P=this.h,N=0;N<w;){if(P==0)for(;N<=E;)s(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<w;)if(b[P++]=S.charCodeAt(N++),P==this.blockSize){s(this,b),P=0;break}}else for(;N<w;)if(b[P++]=S[N++],P==this.blockSize){s(this,b),P=0;break}}this.h=P,this.o+=w},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var w=1;w<S.length-8;++w)S[w]=0;var E=8*this.o;for(w=S.length-8;w<S.length;++w)S[w]=E&255,E/=256;for(this.u(S),S=Array(16),w=E=0;4>w;++w)for(var b=0;32>b;b+=8)S[E++]=this.g[w]>>>b&255;return S};function i(S,w){var E=a;return Object.prototype.hasOwnProperty.call(E,S)?E[S]:E[S]=w(S)}function o(S,w){this.h=w;for(var E=[],b=!0,P=S.length-1;0<=P;P--){var N=S[P]|0;b&&N==w||(E[P]=N,b=!1)}this.g=E}var a={};function u(S){return-128<=S&&128>S?i(S,function(w){return new o([w|0],0>w?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return k(c(-S));for(var w=[],E=1,b=0;S>=E;b++)w[b]=S/E|0,E*=4294967296;return new o(w,0)}function f(S,w){if(S.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S.charAt(0)=="-")return k(f(S.substring(1),w));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(w,8)),b=p,P=0;P<S.length;P+=8){var N=Math.min(8,S.length-P),C=parseInt(S.substring(P,P+N),w);8>N?(N=c(Math.pow(w,N)),b=b.j(N).add(c(C))):(b=b.j(E),b=b.add(c(C)))}return b}var p=u(0),g=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-k(this).m();for(var S=0,w=1,E=0;E<this.g.length;E++){var b=this.i(E);S+=(0<=b?b:4294967296+b)*w,w*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_(this))return"0";if(A(this))return"-"+k(this).toString(S);for(var w=c(Math.pow(S,6)),E=this,b="";;){var P=R(E,w).g;E=I(E,P.j(w));var N=((0<E.g.length?E.g[0]:E.h)>>>0).toString(S);if(E=P,_(E))return N+b;for(;6>N.length;)N="0"+N;b=N+b}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function _(S){if(S.h!=0)return!1;for(var w=0;w<S.g.length;w++)if(S.g[w]!=0)return!1;return!0}function A(S){return S.h==-1}t.l=function(S){return S=I(this,S),A(S)?-1:_(S)?0:1};function k(S){for(var w=S.g.length,E=[],b=0;b<w;b++)E[b]=~S.g[b];return new o(E,~S.h).add(g)}t.abs=function(){return A(this)?k(this):this},t.add=function(S){for(var w=Math.max(this.g.length,S.g.length),E=[],b=0,P=0;P<=w;P++){var N=b+(this.i(P)&65535)+(S.i(P)&65535),C=(N>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);b=C>>>16,N&=65535,C&=65535,E[P]=C<<16|N}return new o(E,E[E.length-1]&-2147483648?-1:0)};function I(S,w){return S.add(k(w))}t.j=function(S){if(_(this)||_(S))return p;if(A(this))return A(S)?k(this).j(k(S)):k(k(this).j(S));if(A(S))return k(this.j(k(S)));if(0>this.l(y)&&0>S.l(y))return c(this.m()*S.m());for(var w=this.g.length+S.g.length,E=[],b=0;b<2*w;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(var P=0;P<S.g.length;P++){var N=this.i(b)>>>16,C=this.i(b)&65535,Z=S.i(P)>>>16,he=S.i(P)&65535;E[2*b+2*P]+=C*he,v(E,2*b+2*P),E[2*b+2*P+1]+=N*he,v(E,2*b+2*P+1),E[2*b+2*P+1]+=C*Z,v(E,2*b+2*P+1),E[2*b+2*P+2]+=N*Z,v(E,2*b+2*P+2)}for(b=0;b<w;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=w;b<2*w;b++)E[b]=0;return new o(E,0)};function v(S,w){for(;(S[w]&65535)!=S[w];)S[w+1]+=S[w]>>>16,S[w]&=65535,w++}function T(S,w){this.g=S,this.h=w}function R(S,w){if(_(w))throw Error("division by zero");if(_(S))return new T(p,p);if(A(S))return w=R(k(S),w),new T(k(w.g),k(w.h));if(A(w))return w=R(S,k(w)),new T(k(w.g),w.h);if(30<S.g.length){if(A(S)||A(w))throw Error("slowDivide_ only works with positive integers.");for(var E=g,b=w;0>=b.l(S);)E=L(E),b=L(b);var P=M(E,1),N=M(b,1);for(b=M(b,2),E=M(E,2);!_(b);){var C=N.add(b);0>=C.l(S)&&(P=P.add(E),N=C),b=M(b,1),E=M(E,1)}return w=I(S,P.j(w)),new T(P,w)}for(P=p;0<=S.l(w);){for(E=Math.max(1,Math.floor(S.m()/w.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),N=c(E),C=N.j(w);A(C)||0<C.l(S);)E-=b,N=c(E),C=N.j(w);_(N)&&(N=g),P=P.add(N),S=I(S,C)}return new T(P,S)}t.A=function(S){return R(this,S).h},t.and=function(S){for(var w=Math.max(this.g.length,S.g.length),E=[],b=0;b<w;b++)E[b]=this.i(b)&S.i(b);return new o(E,this.h&S.h)},t.or=function(S){for(var w=Math.max(this.g.length,S.g.length),E=[],b=0;b<w;b++)E[b]=this.i(b)|S.i(b);return new o(E,this.h|S.h)},t.xor=function(S){for(var w=Math.max(this.g.length,S.g.length),E=[],b=0;b<w;b++)E[b]=this.i(b)^S.i(b);return new o(E,this.h^S.h)};function L(S){for(var w=S.g.length+1,E=[],b=0;b<w;b++)E[b]=S.i(b)<<1|S.i(b-1)>>>31;return new o(E,S.h)}function M(S,w){var E=w>>5;w%=32;for(var b=S.g.length-E,P=[],N=0;N<b;N++)P[N]=0<w?S.i(N+E)>>>w|S.i(N+E+1)<<32-w:S.i(N+E);return new o(P,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,T0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,Gr=o}).apply(typeof lv<"u"?lv:typeof self<"u"?self:typeof window<"u"?window:{});var sl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var I0,to,b0,Il,Ah,C0,A0,P0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,m){return l==Array.prototype||l==Object.prototype||(l[h]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof sl=="object"&&sl];for(var h=0;h<l.length;++h){var m=l[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var m=r;l=l.split(".");for(var x=0;x<l.length-1;x++){var D=l[x];if(!(D in m))break e;m=m[D]}l=l[l.length-1],x=m[l],h=h(x),h!=x&&h!=null&&e(m,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var m=0,x=!1,D={next:function(){if(!x&&m<l.length){var j=m++;return{value:h(j,l[j]),done:!1}}return x=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,m){return l.call.apply(l.bind,arguments)}function p(l,h,m){if(!l)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,x),l.apply(h,D)}}return function(){return l.apply(h,arguments)}}function g(l,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function y(l,h){var m=Array.prototype.slice.call(arguments,1);return function(){var x=m.slice();return x.push.apply(x,arguments),l.apply(this,x)}}function _(l,h){function m(){}m.prototype=h.prototype,l.aa=h.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(x,D,j){for(var $=Array(arguments.length-2),me=2;me<arguments.length;me++)$[me-2]=arguments[me];return h.prototype[D].apply(x,$)}}function A(l){const h=l.length;if(0<h){const m=Array(h);for(let x=0;x<h;x++)m[x]=l[x];return m}return[]}function k(l,h){for(let m=1;m<arguments.length;m++){const x=arguments[m];if(u(x)){const D=l.length||0,j=x.length||0;l.length=D+j;for(let $=0;$<j;$++)l[D+$]=x[$]}else l.push(x)}}class I{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function v(l){return/^[\s\xa0]*$/.test(l)}function T(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function R(l){return R[" "](l),l}R[" "]=function(){};var L=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function M(l,h,m){for(const x in l)h.call(m,l[x],x,l)}function S(l,h){for(const m in l)h.call(void 0,l[m],m,l)}function w(l){const h={};for(const m in l)h[m]=l[m];return h}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(l,h){let m,x;for(let D=1;D<arguments.length;D++){x=arguments[D];for(m in x)l[m]=x[m];for(let j=0;j<E.length;j++)m=E[j],Object.prototype.hasOwnProperty.call(x,m)&&(l[m]=x[m])}}function P(l){var h=1;l=l.split(":");const m=[];for(;0<h&&l.length;)m.push(l.shift()),h--;return l.length&&m.push(l.join(":")),m}function N(l){a.setTimeout(()=>{throw l},0)}function C(){var l=K;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Z{constructor(){this.h=this.g=null}add(h,m){const x=he.get();x.set(h,m),this.h?this.h.next=x:this.g=x,this.h=x}}var he=new I(()=>new Pe,l=>l.reset());class Pe{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let be,B=!1,K=new Z,ee=()=>{const l=a.Promise.resolve(void 0);be=()=>{l.then(te)}};var te=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(m){N(m)}var h=he;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}B=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Ot=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,h),a.removeEventListener("test",m,h)}catch{}return l}();function Dt(l,h){if(pe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,x=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(L){e:{try{R(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else m=="mouseover"?h=l.fromElement:m=="mouseout"&&(h=l.toElement);this.relatedTarget=h,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:vn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Dt.aa.h.call(this)}}_(Dt,pe);var vn={2:"touch",3:"pen",4:"mouse"};Dt.prototype.h=function(){Dt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var _n="closure_listenable_"+(1e6*Math.random()|0),lS=0;function uS(l,h,m,x,D){this.listener=l,this.proxy=null,this.src=h,this.type=m,this.capture=!!x,this.ha=D,this.key=++lS,this.da=this.fa=!1}function xa(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ea(l){this.src=l,this.g={},this.h=0}Ea.prototype.add=function(l,h,m,x,D){var j=l.toString();l=this.g[j],l||(l=this.g[j]=[],this.h++);var $=ac(l,h,x,D);return-1<$?(h=l[$],m||(h.fa=!1)):(h=new uS(h,this.src,j,!!x,D),h.fa=m,l.push(h)),h};function oc(l,h){var m=h.type;if(m in l.g){var x=l.g[m],D=Array.prototype.indexOf.call(x,h,void 0),j;(j=0<=D)&&Array.prototype.splice.call(x,D,1),j&&(xa(h),l.g[m].length==0&&(delete l.g[m],l.h--))}}function ac(l,h,m,x){for(var D=0;D<l.length;++D){var j=l[D];if(!j.da&&j.listener==h&&j.capture==!!m&&j.ha==x)return D}return-1}var lc="closure_lm_"+(1e6*Math.random()|0),uc={};function em(l,h,m,x,D){if(Array.isArray(h)){for(var j=0;j<h.length;j++)em(l,h[j],m,x,D);return null}return m=rm(m),l&&l[_n]?l.K(h,m,c(x)?!!x.capture:!1,D):cS(l,h,m,!1,x,D)}function cS(l,h,m,x,D,j){if(!h)throw Error("Invalid event type");var $=c(D)?!!D.capture:!!D,me=dc(l);if(me||(l[lc]=me=new Ea(l)),m=me.add(h,m,x,$,j),m.proxy)return m;if(x=dS(),m.proxy=x,x.src=l,x.listener=m,l.addEventListener)Ot||(D=$),D===void 0&&(D=!1),l.addEventListener(h.toString(),x,D);else if(l.attachEvent)l.attachEvent(nm(h.toString()),x);else if(l.addListener&&l.removeListener)l.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return m}function dS(){function l(m){return h.call(l.src,l.listener,m)}const h=hS;return l}function tm(l,h,m,x,D){if(Array.isArray(h))for(var j=0;j<h.length;j++)tm(l,h[j],m,x,D);else x=c(x)?!!x.capture:!!x,m=rm(m),l&&l[_n]?(l=l.i,h=String(h).toString(),h in l.g&&(j=l.g[h],m=ac(j,m,x,D),-1<m&&(xa(j[m]),Array.prototype.splice.call(j,m,1),j.length==0&&(delete l.g[h],l.h--)))):l&&(l=dc(l))&&(h=l.g[h.toString()],l=-1,h&&(l=ac(h,m,x,D)),(m=-1<l?h[l]:null)&&cc(m))}function cc(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[_n])oc(h.i,l);else{var m=l.type,x=l.proxy;h.removeEventListener?h.removeEventListener(m,x,l.capture):h.detachEvent?h.detachEvent(nm(m),x):h.addListener&&h.removeListener&&h.removeListener(x),(m=dc(h))?(oc(m,l),m.h==0&&(m.src=null,h[lc]=null)):xa(l)}}}function nm(l){return l in uc?uc[l]:uc[l]="on"+l}function hS(l,h){if(l.da)l=!0;else{h=new Dt(h,this);var m=l.listener,x=l.ha||l.src;l.fa&&cc(l),l=m.call(x,h)}return l}function dc(l){return l=l[lc],l instanceof Ea?l:null}var hc="__closure_events_fn_"+(1e9*Math.random()>>>0);function rm(l){return typeof l=="function"?l:(l[hc]||(l[hc]=function(h){return l.handleEvent(h)}),l[hc])}function Ze(){se.call(this),this.i=new Ea(this),this.M=this,this.F=null}_(Ze,se),Ze.prototype[_n]=!0,Ze.prototype.removeEventListener=function(l,h,m,x){tm(this,l,h,m,x)};function dt(l,h){var m,x=l.F;if(x)for(m=[];x;x=x.F)m.push(x);if(l=l.M,x=h.type||h,typeof h=="string")h=new pe(h,l);else if(h instanceof pe)h.target=h.target||l;else{var D=h;h=new pe(x,l),b(h,D)}if(D=!0,m)for(var j=m.length-1;0<=j;j--){var $=h.g=m[j];D=Sa($,x,!0,h)&&D}if($=h.g=l,D=Sa($,x,!0,h)&&D,D=Sa($,x,!1,h)&&D,m)for(j=0;j<m.length;j++)$=h.g=m[j],D=Sa($,x,!1,h)&&D}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var m=l.g[h],x=0;x<m.length;x++)xa(m[x]);delete l.g[h],l.h--}}this.F=null},Ze.prototype.K=function(l,h,m,x){return this.i.add(String(l),h,!1,m,x)},Ze.prototype.L=function(l,h,m,x){return this.i.add(String(l),h,!0,m,x)};function Sa(l,h,m,x){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,j=0;j<h.length;++j){var $=h[j];if($&&!$.da&&$.capture==m){var me=$.listener,We=$.ha||$.src;$.fa&&oc(l.i,$),D=me.call(We,x)!==!1&&D}}return D&&!x.defaultPrevented}function sm(l,h,m){if(typeof l=="function")m&&(l=g(l,m));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function im(l){l.g=sm(()=>{l.g=null,l.i&&(l.i=!1,im(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class fS extends se{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:im(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Si(l){se.call(this),this.h=l,this.g={}}_(Si,se);var om=[];function am(l){M(l.g,function(h,m){this.g.hasOwnProperty(m)&&cc(h)},l),l.g={}}Si.prototype.N=function(){Si.aa.N.call(this),am(this)},Si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fc=a.JSON.stringify,pS=a.JSON.parse,mS=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function pc(){}pc.prototype.h=null;function lm(l){return l.h||(l.h=l.i())}function um(){}var Ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mc(){pe.call(this,"d")}_(mc,pe);function gc(){pe.call(this,"c")}_(gc,pe);var Or={},cm=null;function Ta(){return cm=cm||new Ze}Or.La="serverreachability";function dm(l){pe.call(this,Or.La,l)}_(dm,pe);function Ii(l){const h=Ta();dt(h,new dm(h))}Or.STAT_EVENT="statevent";function hm(l,h){pe.call(this,Or.STAT_EVENT,l),this.stat=h}_(hm,pe);function ht(l){const h=Ta();dt(h,new hm(h,l))}Or.Ma="timingevent";function fm(l,h){pe.call(this,Or.Ma,l),this.size=h}_(fm,pe);function bi(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Ci(){this.g=!0}Ci.prototype.xa=function(){this.g=!1};function gS(l,h,m,x,D,j){l.info(function(){if(l.g)if(j)for(var $="",me=j.split("&"),We=0;We<me.length;We++){var ue=me[We].split("=");if(1<ue.length){var et=ue[0];ue=ue[1];var tt=et.split("_");$=2<=tt.length&&tt[1]=="type"?$+(et+"="+ue+"&"):$+(et+"=redacted&")}}else $=null;else $=j;return"XMLHTTP REQ ("+x+") [attempt "+D+"]: "+h+`
`+m+`
`+$})}function yS(l,h,m,x,D,j,$){l.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+D+"]: "+h+`
`+m+`
`+j+" "+$})}function gs(l,h,m,x){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+_S(l,m)+(x?" "+x:"")})}function vS(l,h){l.info(function(){return"TIMEOUT: "+h})}Ci.prototype.info=function(){};function _S(l,h){if(!l.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var x=m[l];if(!(2>x.length)){var D=x[1];if(Array.isArray(D)&&!(1>D.length)){var j=D[0];if(j!="noop"&&j!="stop"&&j!="close")for(var $=1;$<D.length;$++)D[$]=""}}}}return fc(m)}catch{return h}}var Ia={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yc;function ba(){}_(ba,pc),ba.prototype.g=function(){return new XMLHttpRequest},ba.prototype.i=function(){return{}},yc=new ba;function Bn(l,h,m,x){this.j=l,this.i=h,this.l=m,this.R=x||1,this.U=new Si(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mm}function mm(){this.i=null,this.g="",this.h=!1}var gm={},vc={};function _c(l,h,m){l.L=1,l.v=ka(wn(h)),l.m=m,l.P=!0,ym(l,null)}function ym(l,h){l.F=Date.now(),Ca(l),l.A=wn(l.v);var m=l.A,x=l.R;Array.isArray(x)||(x=[String(x)]),Nm(m.i,"t",x),l.C=0,m=l.j.J,l.h=new mm,l.g=Qm(l.j,m?h:null,!l.m),0<l.O&&(l.M=new fS(g(l.Y,l,l.g),l.O)),h=l.U,m=l.g,x=l.ca;var D="readystatechange";Array.isArray(D)||(D&&(om[0]=D.toString()),D=om);for(var j=0;j<D.length;j++){var $=em(m,D[j],x||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Ii(),gS(l.i,l.u,l.A,l.l,l.R,l.m)}Bn.prototype.ca=function(l){l=l.target;const h=this.M;h&&xn(l)==3?h.j():this.Y(l)},Bn.prototype.Y=function(l){try{if(l==this.g)e:{const tt=xn(this.g);var h=this.g.Ba();const _s=this.g.Z();if(!(3>tt)&&(tt!=3||this.g&&(this.h.h||this.g.oa()||Mm(this.g)))){this.J||tt!=4||h==7||(h==8||0>=_s?Ii(3):Ii(2)),wc(this);var m=this.g.Z();this.X=m;t:if(vm(this)){var x=Mm(this.g);l="";var D=x.length,j=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Dr(this),Ai(this);var $="";break t}this.h.i=new a.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,l+=this.h.i.decode(x[h],{stream:!(j&&h==D-1)});x.length=0,this.h.g+=l,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=m==200,yS(this.i,this.u,this.A,this.l,this.R,tt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var me,We=this.g;if((me=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(me)){var ue=me;break t}}ue=null}if(m=ue)gs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xc(this,m);else{this.o=!1,this.s=3,ht(12),Dr(this),Ai(this);break e}}if(this.P){m=!0;let Wt;for(;!this.J&&this.C<$.length;)if(Wt=wS(this,$),Wt==vc){tt==4&&(this.s=4,ht(14),m=!1),gs(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==gm){this.s=4,ht(15),gs(this.i,this.l,$,"[Invalid Chunk]"),m=!1;break}else gs(this.i,this.l,Wt,null),xc(this,Wt);if(vm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||$.length!=0||this.h.h||(this.s=1,ht(16),m=!1),this.o=this.o&&m,!m)gs(this.i,this.l,$,"[Invalid Chunked Response]"),Dr(this),Ai(this);else if(0<$.length&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.ba&&!et.M&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Cc(et),et.M=!0,ht(11))}}else gs(this.i,this.l,$,null),xc(this,$);tt==4&&Dr(this),this.o&&!this.J&&(tt==4?Hm(this.j,this):(this.o=!1,Ca(this)))}else VS(this.g),m==400&&0<$.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),Dr(this),Ai(this)}}}catch{}finally{}};function vm(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function wS(l,h){var m=l.C,x=h.indexOf(`
`,m);return x==-1?vc:(m=Number(h.substring(m,x)),isNaN(m)?gm:(x+=1,x+m>h.length?vc:(h=h.slice(x,x+m),l.C=x+m,h)))}Bn.prototype.cancel=function(){this.J=!0,Dr(this)};function Ca(l){l.S=Date.now()+l.I,_m(l,l.I)}function _m(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=bi(g(l.ba,l),h)}function wc(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Bn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(vS(this.i,this.A),this.L!=2&&(Ii(),ht(17)),Dr(this),this.s=2,Ai(this)):_m(this,this.S-l)};function Ai(l){l.j.G==0||l.J||Hm(l.j,l)}function Dr(l){wc(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,am(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function xc(l,h){try{var m=l.j;if(m.G!=0&&(m.g==l||Ec(m.h,l))){if(!l.K&&Ec(m.h,l)&&m.G==3){try{var x=m.Da.g.parse(h)}catch{x=null}if(Array.isArray(x)&&x.length==3){var D=x;if(D[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)La(m),Da(m);else break e;bc(m),ht(18)}}else m.za=D[1],0<m.za-m.T&&37500>D[2]&&m.F&&m.v==0&&!m.C&&(m.C=bi(g(m.Za,m),6e3));if(1>=Em(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Lr(m,11)}else if((l.K||m.g==l)&&La(m),!v(h))for(D=m.Da.g.parse(h),h=0;h<D.length;h++){let ue=D[h];if(m.T=ue[0],ue=ue[1],m.G==2)if(ue[0]=="c"){m.K=ue[1],m.ia=ue[2];const et=ue[3];et!=null&&(m.la=et,m.j.info("VER="+m.la));const tt=ue[4];tt!=null&&(m.Aa=tt,m.j.info("SVER="+m.Aa));const _s=ue[5];_s!=null&&typeof _s=="number"&&0<_s&&(x=1.5*_s,m.L=x,m.j.info("backChannelRequestTimeoutMs_="+x)),x=m;const Wt=l.g;if(Wt){const Ma=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ma){var j=x.h;j.g||Ma.indexOf("spdy")==-1&&Ma.indexOf("quic")==-1&&Ma.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Sc(j,j.h),j.h=null))}if(x.D){const Ac=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ac&&(x.ya=Ac,ve(x.I,x.D,Ac))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),x=m;var $=l;if(x.qa=Gm(x,x.J?x.ia:null,x.W),$.K){Sm(x.h,$);var me=$,We=x.L;We&&(me.I=We),me.B&&(wc(me),Ca(me)),x.g=$}else zm(x);0<m.i.length&&ja(m)}else ue[0]!="stop"&&ue[0]!="close"||Lr(m,7);else m.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?Lr(m,7):Ic(m):ue[0]!="noop"&&m.l&&m.l.ta(ue),m.v=0)}}Ii(4)}catch{}}var xS=class{constructor(l,h){this.g=l,this.map=h}};function wm(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Em(l){return l.h?1:l.g?l.g.size:0}function Ec(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Sc(l,h){l.g?l.g.add(h):l.h=h}function Sm(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}wm.prototype.cancel=function(){if(this.i=Tm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Tm(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const m of l.g.values())h=h.concat(m.D);return h}return A(l.i)}function ES(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],m=l.length,x=0;x<m;x++)h.push(l[x]);return h}h=[],m=0;for(x in l)h[m++]=l[x];return h}function SS(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var m=0;m<l;m++)h.push(m);return h}h=[],m=0;for(const x in l)h[m++]=x;return h}}}function Im(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var m=SS(l),x=ES(l),D=x.length,j=0;j<D;j++)h.call(void 0,x[j],m&&m[j],l)}var bm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TS(l,h){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var x=l[m].indexOf("="),D=null;if(0<=x){var j=l[m].substring(0,x);D=l[m].substring(x+1)}else j=l[m];h(j,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function jr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof jr){this.h=l.h,Aa(this,l.j),this.o=l.o,this.g=l.g,Pa(this,l.s),this.l=l.l;var h=l.i,m=new Ni;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),Cm(this,m),this.m=l.m}else l&&(h=String(l).match(bm))?(this.h=!1,Aa(this,h[1]||"",!0),this.o=Pi(h[2]||""),this.g=Pi(h[3]||"",!0),Pa(this,h[4]),this.l=Pi(h[5]||"",!0),Cm(this,h[6]||"",!0),this.m=Pi(h[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}jr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(ki(h,Am,!0),":");var m=this.g;return(m||h=="file")&&(l.push("//"),(h=this.o)&&l.push(ki(h,Am,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(ki(m,m.charAt(0)=="/"?CS:bS,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",ki(m,PS)),l.join("")};function wn(l){return new jr(l)}function Aa(l,h,m){l.j=m?Pi(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Pa(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Cm(l,h,m){h instanceof Ni?(l.i=h,kS(l.i,l.h)):(m||(h=ki(h,AS)),l.i=new Ni(h,l.h))}function ve(l,h,m){l.i.set(h,m)}function ka(l){return ve(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Pi(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ki(l,h,m){return typeof l=="string"?(l=encodeURI(l).replace(h,IS),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function IS(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Am=/[#\/\?@]/g,bS=/[#\?:]/g,CS=/[#\?]/g,AS=/[#\?@]/g,PS=/#/g;function Ni(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function zn(l){l.g||(l.g=new Map,l.h=0,l.i&&TS(l.i,function(h,m){l.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Ni.prototype,t.add=function(l,h){zn(this),this.i=null,l=ys(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(h),this.h+=1,this};function Pm(l,h){zn(l),h=ys(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function km(l,h){return zn(l),h=ys(l,h),l.g.has(h)}t.forEach=function(l,h){zn(this),this.g.forEach(function(m,x){m.forEach(function(D){l.call(h,D,x,this)},this)},this)},t.na=function(){zn(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let x=0;x<h.length;x++){const D=l[x];for(let j=0;j<D.length;j++)m.push(h[x])}return m},t.V=function(l){zn(this);let h=[];if(typeof l=="string")km(this,l)&&(h=h.concat(this.g.get(ys(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)h=h.concat(l[m])}return h},t.set=function(l,h){return zn(this),this.i=null,l=ys(this,l),km(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Nm(l,h,m){Pm(l,h),0<m.length&&(l.i=null,l.g.set(ys(l,h),A(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var x=h[m];const j=encodeURIComponent(String(x)),$=this.V(x);for(x=0;x<$.length;x++){var D=j;$[x]!==""&&(D+="="+encodeURIComponent(String($[x]))),l.push(D)}}return this.i=l.join("&")};function ys(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function kS(l,h){h&&!l.j&&(zn(l),l.i=null,l.g.forEach(function(m,x){var D=x.toLowerCase();x!=D&&(Pm(this,x),Nm(this,D,m))},l)),l.j=h}function NS(l,h){const m=new Ci;if(a.Image){const x=new Image;x.onload=y(Wn,m,"TestLoadImage: loaded",!0,h,x),x.onerror=y(Wn,m,"TestLoadImage: error",!1,h,x),x.onabort=y(Wn,m,"TestLoadImage: abort",!1,h,x),x.ontimeout=y(Wn,m,"TestLoadImage: timeout",!1,h,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=l}else h(!1)}function RS(l,h){const m=new Ci,x=new AbortController,D=setTimeout(()=>{x.abort(),Wn(m,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:x.signal}).then(j=>{clearTimeout(D),j.ok?Wn(m,"TestPingServer: ok",!0,h):Wn(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),Wn(m,"TestPingServer: error",!1,h)})}function Wn(l,h,m,x,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),x(m)}catch{}}function OS(){this.g=new mS}function DS(l,h,m){const x=m||"";try{Im(l,function(D,j){let $=D;c(D)&&($=fc(D)),h.push(x+j+"="+encodeURIComponent($))})}catch(D){throw h.push(x+"type="+encodeURIComponent("_badmap")),D}}function Na(l){this.l=l.Ub||null,this.j=l.eb||!1}_(Na,pc),Na.prototype.g=function(){return new Ra(this.l,this.j)},Na.prototype.i=function(l){return function(){return l}}({});function Ra(l,h){Ze.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Ra,Ze),t=Ra.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Oi(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ri(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rm(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rm(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ri(this):Oi(this),this.readyState==3&&Rm(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ri(this))},t.Qa=function(l){this.g&&(this.response=l,Ri(this))},t.ga=function(){this.g&&Ri(this)};function Ri(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Oi(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=h.next();return l.join(`\r
`)};function Oi(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Om(l){let h="";return M(l,function(m,x){h+=x,h+=":",h+=m,h+=`\r
`}),h}function Tc(l,h,m){e:{for(x in m){var x=!1;break e}x=!0}x||(m=Om(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):ve(l,h,m))}function Ce(l){Ze.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Ce,Ze);var jS=/^https?$/i,LS=["POST","PUT"];t=Ce.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,m,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yc.g(),this.v=this.o?lm(this.o):lm(yc),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(j){Dm(this,j);return}if(l=m||"",m=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var D in x)m.set(D,x[D]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const j of x.keys())m.set(j,x.get(j));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(m.keys()).find(j=>j.toLowerCase()=="content-type"),D=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(LS,h,void 0))||x||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,$]of m)this.g.setRequestHeader(j,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vm(this),this.u=!0,this.g.send(l),this.u=!1}catch(j){Dm(this,j)}};function Dm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,jm(l),Oa(l)}function jm(l){l.A||(l.A=!0,dt(l,"complete"),dt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,dt(this,"complete"),dt(this,"abort"),Oa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oa(this,!0)),Ce.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Lm(this):this.bb())},t.bb=function(){Lm(this)};function Lm(l){if(l.h&&typeof o<"u"&&(!l.v[1]||xn(l)!=4||l.Z()!=2)){if(l.u&&xn(l)==4)sm(l.Ea,0,l);else if(dt(l,"readystatechange"),xn(l)==4){l.h=!1;try{const $=l.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var x;if(x=$===0){var D=String(l.D).match(bm)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),x=!jS.test(D?D.toLowerCase():"")}m=x}if(m)dt(l,"complete"),dt(l,"success");else{l.m=6;try{var j=2<xn(l)?l.g.statusText:""}catch{j=""}l.l=j+" ["+l.Z()+"]",jm(l)}}finally{Oa(l)}}}}function Oa(l,h){if(l.g){Vm(l);const m=l.g,x=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||dt(l,"ready");try{m.onreadystatechange=x}catch{}}}function Vm(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function xn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),pS(h)}};function Mm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function VS(l){const h={};l=(l.g&&2<=xn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<l.length;x++){if(v(l[x]))continue;var m=P(l[x]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const j=h[D]||[];h[D]=j,j.push(m)}S(h,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Di(l,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||h}function Fm(l){this.Aa=0,this.i=[],this.j=new Ci,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Di("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Di("baseRetryDelayMs",5e3,l),this.cb=Di("retryDelaySeedMs",1e4,l),this.Wa=Di("forwardChannelMaxRetries",2,l),this.wa=Di("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new wm(l&&l.concurrentRequestLimit),this.Da=new OS,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Fm.prototype,t.la=8,t.G=1,t.connect=function(l,h,m,x){ht(0),this.W=l,this.H=h||{},m&&x!==void 0&&(this.H.OSID=m,this.H.OAID=x),this.F=this.X,this.I=Gm(this,null,this.W),ja(this)};function Ic(l){if(Um(l),l.G==3){var h=l.U++,m=wn(l.I);if(ve(m,"SID",l.K),ve(m,"RID",h),ve(m,"TYPE","terminate"),ji(l,m),h=new Bn(l,l.j,h),h.L=2,h.v=ka(wn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=h.v,m=!0),m||(h.g=Qm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ca(h)}Km(l)}function Da(l){l.g&&(Cc(l),l.g.cancel(),l.g=null)}function Um(l){Da(l),l.u&&(a.clearTimeout(l.u),l.u=null),La(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function ja(l){if(!xm(l.h)&&!l.s){l.s=!0;var h=l.Ga;be||ee(),B||(be(),B=!0),K.add(h,l),l.B=0}}function MS(l,h){return Em(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=bi(g(l.Ga,l,h),qm(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const D=new Bn(this,this.j,l);let j=this.o;if(this.S&&(j?(j=w(j),b(j,this.S)):j=this.S),this.m!==null||this.O||(D.H=j,j=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var x=this.i[m];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(h+=x,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Bm(this,D,h),m=wn(this.I),ve(m,"RID",l),ve(m,"CVER",22),this.D&&ve(m,"X-HTTP-Session-Id",this.D),ji(this,m),j&&(this.O?h="headers="+encodeURIComponent(String(Om(j)))+"&"+h:this.m&&Tc(m,this.m,j)),Sc(this.h,D),this.Ua&&ve(m,"TYPE","init"),this.P?(ve(m,"$req",h),ve(m,"SID","null"),D.T=!0,_c(D,m,null)):_c(D,m,h),this.G=2}}else this.G==3&&(l?$m(this,l):this.i.length==0||xm(this.h)||$m(this))};function $m(l,h){var m;h?m=h.l:m=l.U++;const x=wn(l.I);ve(x,"SID",l.K),ve(x,"RID",m),ve(x,"AID",l.T),ji(l,x),l.m&&l.o&&Tc(x,l.m,l.o),m=new Bn(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Bm(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Sc(l.h,m),_c(m,x,h)}function ji(l,h){l.H&&M(l.H,function(m,x){ve(h,x,m)}),l.l&&Im({},function(m,x){ve(h,x,m)})}function Bm(l,h,m){m=Math.min(l.i.length,m);var x=l.l?g(l.l.Na,l.l,l):null;e:{var D=l.i;let j=-1;for(;;){const $=["count="+m];j==-1?0<m?(j=D[0].g,$.push("ofs="+j)):j=0:$.push("ofs="+j);let me=!0;for(let We=0;We<m;We++){let ue=D[We].g;const et=D[We].map;if(ue-=j,0>ue)j=Math.max(0,D[We].g-100),me=!1;else try{DS(et,$,"req"+ue+"_")}catch{x&&x(et)}}if(me){x=$.join("&");break e}}}return l=l.i.splice(0,m),h.D=l,x}function zm(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;be||ee(),B||(be(),B=!0),K.add(h,l),l.v=0}}function bc(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=bi(g(l.Fa,l),qm(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Wm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=bi(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),Da(this),Wm(this))};function Cc(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Wm(l){l.g=new Bn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=wn(l.qa);ve(h,"RID","rpc"),ve(h,"SID",l.K),ve(h,"AID",l.T),ve(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&ve(h,"TO",l.ja),ve(h,"TYPE","xmlhttp"),ji(l,h),l.m&&l.o&&Tc(h,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=ka(wn(h)),m.m=null,m.P=!0,ym(m,l)}t.Za=function(){this.C!=null&&(this.C=null,Da(this),bc(this),ht(19))};function La(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Hm(l,h){var m=null;if(l.g==h){La(l),Cc(l),l.g=null;var x=2}else if(Ec(l.h,h))m=h.D,Sm(l.h,h),x=1;else return;if(l.G!=0){if(h.o)if(x==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var D=l.B;x=Ta(),dt(x,new fm(x,m)),ja(l)}else zm(l);else if(D=h.s,D==3||D==0&&0<h.X||!(x==1&&MS(l,h)||x==2&&bc(l)))switch(m&&0<m.length&&(h=l.h,h.i=h.i.concat(m)),D){case 1:Lr(l,5);break;case 4:Lr(l,10);break;case 3:Lr(l,6);break;default:Lr(l,2)}}}function qm(l,h){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*h}function Lr(l,h){if(l.j.info("Error code "+h),h==2){var m=g(l.fb,l),x=l.Xa;const D=!x;x=new jr(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Aa(x,"https"),ka(x),D?NS(x.toString(),m):RS(x.toString(),m)}else ht(2);l.G=0,l.l&&l.l.sa(h),Km(l),Um(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Km(l){if(l.G=0,l.ka=[],l.l){const h=Tm(l.h);(h.length!=0||l.i.length!=0)&&(k(l.ka,h),k(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function Gm(l,h,m){var x=m instanceof jr?wn(m):new jr(m);if(x.g!="")h&&(x.g=h+"."+x.g),Pa(x,x.s);else{var D=a.location;x=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var j=new jr(null);x&&Aa(j,x),h&&(j.g=h),D&&Pa(j,D),m&&(j.l=m),x=j}return m=l.D,h=l.ya,m&&h&&ve(x,m,h),ve(x,"VER",l.la),ji(l,x),x}function Qm(l,h,m){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Ce(new Na({eb:m})):new Ce(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ym(){}t=Ym.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Va(){}Va.prototype.g=function(l,h){return new Tt(l,h)};function Tt(l,h){Ze.call(this),this.g=new Fm(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!v(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new vs(this)}_(Tt,Ze),Tt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tt.prototype.close=function(){Ic(this.g)},Tt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=fc(l),l=m);h.i.push(new xS(h.Ya++,l)),h.G==3&&ja(h)},Tt.prototype.N=function(){this.g.l=null,delete this.j,Ic(this.g),delete this.g,Tt.aa.N.call(this)};function Jm(l){mc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const m in h){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}_(Jm,mc);function Xm(){gc.call(this),this.status=1}_(Xm,gc);function vs(l){this.g=l}_(vs,Ym),vs.prototype.ua=function(){dt(this.g,"a")},vs.prototype.ta=function(l){dt(this.g,new Jm(l))},vs.prototype.sa=function(l){dt(this.g,new Xm)},vs.prototype.ra=function(){dt(this.g,"b")},Va.prototype.createWebChannel=Va.prototype.g,Tt.prototype.send=Tt.prototype.o,Tt.prototype.open=Tt.prototype.m,Tt.prototype.close=Tt.prototype.close,P0=function(){return new Va},A0=function(){return Ta()},C0=Or,Ah={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ia.NO_ERROR=0,Ia.TIMEOUT=8,Ia.HTTP_ERROR=6,Il=Ia,pm.COMPLETE="complete",b0=pm,um.EventType=Ti,Ti.OPEN="a",Ti.CLOSE="b",Ti.ERROR="c",Ti.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,to=um,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,I0=Ce}).apply(typeof sl<"u"?sl:typeof self<"u"?self:typeof window<"u"?window:{});const uv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _i="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Bf("@firebase/firestore");function Hi(){return rs.logLevel}function H(t,...e){if(rs.logLevel<=ie.DEBUG){const n=e.map(ep);rs.debug(`Firestore (${_i}): ${t}`,...n)}}function Mn(t,...e){if(rs.logLevel<=ie.ERROR){const n=e.map(ep);rs.error(`Firestore (${_i}): ${t}`,...n)}}function si(t,...e){if(rs.logLevel<=ie.WARN){const n=e.map(ep);rs.warn(`Firestore (${_i}): ${t}`,...n)}}function ep(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t="Unexpected state"){const e=`FIRESTORE (${_i}) INTERNAL ASSERTION FAILED: `+t;throw Mn(e),new Error(e)}function le(t,e){t||G()}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends $n{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Gk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}}class Qk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Yk{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new pn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new pn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new pn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new k0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new it(e)}}class Jk{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Xk{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Jk(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){le(this.o===void 0);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new Zk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=tN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function ii(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Le(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Q(e)}static min(){return new Q(new Le(0,0))}static max(){return new Q(new Le(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(),r===void 0?r=e.length-n:r>e.length-n&&G(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return qo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ge extends qo{construct(e,n,r){return new ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ge(n)}static emptyPath(){return new ge([])}}const nN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ge extends qo{construct(e,n,r){return new Ge(e,n,r)}static isValidIdentifier(e){return nN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ge.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ge(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new z(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new z(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new z(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ge(n)}static emptyPath(){return new Ge([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(ge.fromString(e))}static fromName(e){return new q(ge.fromString(e).popFirst(5))}static empty(){return new q(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new ge(e.slice()))}}function rN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Q.fromTimestamp(r===1e9?new Le(n+1,0):new Le(n,r));return new wr(s,q.empty(),e)}function sN(t){return new wr(t.readTime,t.key,-1)}class wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wr(Q.min(),q.empty(),-1)}static max(){return new wr(Q.max(),q.empty(),-1)}}function iN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==oN)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(f=>{o[c]=f,++a,a===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function lN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tp.oe=-1;function pa(t){return t==null}function du(t){return t===0&&1/t==-1/0}function uN(t){return typeof t=="number"&&Number.isInteger(t)&&!du(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ds(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function R0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new Ie(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new Ie(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new il(this.root,e,this.comparator,!1)}getReverseIterator(){return new il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new il(this.root,e,this.comparator,!0)}}class il{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=s??Ke.EMPTY,this.right=i??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ke(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ke.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();const e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dv(this.data.getIterator())}getIteratorFrom(e){return new dv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class dv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.fields=e,e.sort(Ge.comparator)}static empty(){return new Ct([])}unionWith(e){let n=new Ye(Ge.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ct(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ii(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new O0("Invalid base64 string: "+i):i}}(e);return new Xe(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Xe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const cN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(t){if(le(!!t),typeof t=="string"){let e=0;const n=cN.exec(t);if(le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(t.seconds),nanos:ke(t.nanos)}}function ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ss(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function rp(t){const e=t.mapValue.fields.__previous_value__;return np(e)?rp(e):e}function Ko(t){const e=xr(t.mapValue.fields.__local_write_time__.timestampValue);return new Le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n,r,s,i,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Go{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Go("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Go&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol={mapValue:{}};function is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?np(t)?4:fN(t)?9007199254740991:hN(t)?10:11:G()}function gn(t,e){if(t===e)return!0;const n=is(t);if(n!==is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ko(t).isEqual(Ko(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=xr(s.timestampValue),a=xr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ss(s.bytesValue).isEqual(ss(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ke(s.geoPointValue.latitude)===ke(i.geoPointValue.latitude)&&ke(s.geoPointValue.longitude)===ke(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ke(s.integerValue)===ke(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ke(s.doubleValue),a=ke(i.doubleValue);return o===a?du(o)===du(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ii(t.arrayValue.values||[],e.arrayValue.values||[],gn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(cv(o)!==cv(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!gn(o[u],a[u])))return!1;return!0}(t,e);default:return G()}}function Qo(t,e){return(t.values||[]).find(n=>gn(n,e))!==void 0}function oi(t,e){if(t===e)return 0;const n=is(t),r=is(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=ke(i.integerValue||i.doubleValue),u=ke(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return hv(t.timestampValue,e.timestampValue);case 4:return hv(Ko(t),Ko(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ss(i),u=ss(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const f=ce(a[c],u[c]);if(f!==0)return f}return ce(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ce(ke(i.latitude),ke(o.latitude));return a!==0?a:ce(ke(i.longitude),ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,u,c,f;const p=i.fields||{},g=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,_=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=ce(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((f=_==null?void 0:_.values)===null||f===void 0?void 0:f.length)||0);return A!==0?A:fv(y,_)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ol.mapValue&&o===ol.mapValue)return 0;if(i===ol.mapValue)return 1;if(o===ol.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),c=o.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=ce(u[p],f[p]);if(g!==0)return g;const y=oi(a[u[p]],c[f[p]]);if(y!==0)return y}return ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw G()}}function hv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=xr(t),r=xr(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function fv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=oi(n[s],r[s]);if(i)return i}return ce(n.length,r.length)}function ai(t){return Ph(t)}function Ph(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=xr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ph(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ph(n.fields[o])}`;return s+"}"}(t.mapValue):G()}function pv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kh(t){return!!t&&"integerValue"in t}function sp(t){return!!t&&"arrayValue"in t}function mv(t){return!!t&&"nullValue"in t}function gv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bl(t){return!!t&&"mapValue"in t}function hN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function yo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ds(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function fN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.value=e}static empty(){return new pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yo(n)}setAll(e){let n=Ge.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=yo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());bl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];bl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ds(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new pt(yo(this.value))}}function D0(t){const e=[];return ds(t.fields,(n,r)=>{const s=new Ge([n]);if(bl(r)){const i=D0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ct(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Be(e,0,Q.min(),Q.min(),Q.min(),pt.empty(),0)}static newFoundDocument(e,n,r,s){return new Be(e,1,n,Q.min(),r,s,0)}static newNoDocument(e,n){return new Be(e,2,n,Q.min(),Q.min(),pt.empty(),0)}static newUnknownDocument(e,n){return new Be(e,3,n,Q.min(),Q.min(),pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Be&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Be(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.position=e,this.inclusive=n}}function yv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=oi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function vv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n="asc"){this.field=e,this.dir=n}}function pN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{}class De extends j0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gN(e,n,r):n==="array-contains"?new _N(e,r):n==="in"?new wN(e,r):n==="not-in"?new xN(e,r):n==="array-contains-any"?new EN(e,r):new De(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yN(e,r):new vN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(oi(n,this.value)):n!==null&&is(this.value)===is(n)&&this.matchesComparison(oi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tn extends j0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new tn(e,n)}matches(e){return L0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function L0(t){return t.op==="and"}function V0(t){return mN(t)&&L0(t)}function mN(t){for(const e of t.filters)if(e instanceof tn)return!1;return!0}function Nh(t){if(t instanceof De)return t.field.canonicalString()+t.op.toString()+ai(t.value);if(V0(t))return t.filters.map(e=>Nh(e)).join(",");{const e=t.filters.map(n=>Nh(n)).join(",");return`${t.op}(${e})`}}function M0(t,e){return t instanceof De?function(r,s){return s instanceof De&&r.op===s.op&&r.field.isEqual(s.field)&&gn(r.value,s.value)}(t,e):t instanceof tn?function(r,s){return s instanceof tn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&M0(o,s.filters[a]),!0):!1}(t,e):void G()}function F0(t){return t instanceof De?function(n){return`${n.field.canonicalString()} ${n.op} ${ai(n.value)}`}(t):t instanceof tn?function(n){return n.op.toString()+" {"+n.getFilters().map(F0).join(" ,")+"}"}(t):"Filter"}class gN extends De{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class yN extends De{constructor(e,n){super(e,"in",n),this.keys=U0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vN extends De{constructor(e,n){super(e,"not-in",n),this.keys=U0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function U0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class _N extends De{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sp(n)&&Qo(n.arrayValue,this.value)}}class wN extends De{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qo(this.value.arrayValue,n)}}class xN extends De{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Qo(this.value.arrayValue,n)}}class EN extends De{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function _v(t,e=null,n=[],r=[],s=null,i=null,o=null){return new SN(t,e,n,r,s,i,o)}function ip(t){const e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Nh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),pa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ai(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ai(r)).join(",")),e.ue=n}return e.ue}function op(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!M0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vv(t.startAt,e.startAt)&&vv(t.endAt,e.endAt)}function Rh(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function TN(t,e,n,r,s,i,o,a){return new wi(t,e,n,r,s,i,o,a)}function ap(t){return new wi(t)}function wv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $0(t){return t.collectionGroup!==null}function vo(t){const e=X(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ye(Ge.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Yo(i,r))}),n.has(Ge.keyField().canonicalString())||e.ce.push(new Yo(Ge.keyField(),r))}return e.ce}function mn(t){const e=X(t);return e.le||(e.le=IN(e,vo(t))),e.le}function IN(t,e){if(t.limitType==="F")return _v(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Yo(s.field,i)});const n=t.endAt?new hu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new hu(t.startAt.position,t.startAt.inclusive):null;return _v(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Oh(t,e){const n=t.filters.concat([e]);return new wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function fu(t,e,n){return new wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zu(t,e){return op(mn(t),mn(e))&&t.limitType===e.limitType}function B0(t){return`${ip(mn(t))}|lt:${t.limitType}`}function xs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>F0(s)).join(", ")}]`),pa(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ai(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ai(s)).join(",")),`Target(${r})`}(mn(t))}; limitType=${t.limitType})`}function Wu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of vo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const c=yv(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,vo(r),s)||r.endAt&&!function(o,a,u){const c=yv(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,vo(r),s))}(t,e)}function bN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function z0(t){return(e,n)=>{let r=!1;for(const s of vo(t)){const i=CN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function CN(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),c=a.data.field(i);return u!==null&&c!==null?oi(u,c):G()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return R0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=new Ie(q.comparator);function Fn(){return AN}const W0=new Ie(q.comparator);function no(...t){let e=W0;for(const n of t)e=e.insert(n.key,n);return e}function H0(t){let e=W0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wr(){return _o()}function q0(){return _o()}function _o(){return new xi(t=>t.toString(),(t,e)=>t.isEqual(e))}const PN=new Ie(q.comparator),kN=new Ye(q.comparator);function re(...t){let e=kN;for(const n of t)e=e.add(n);return e}const NN=new Ye(ce);function RN(){return NN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:du(e)?"-0":e}}function K0(t){return{integerValue:""+t}}function G0(t,e){return uN(e)?K0(e):lp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(){this._=void 0}}function ON(t,e,n){return t instanceof Jo?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&np(i)&&(i=rp(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof li?Y0(t,e):t instanceof ui?J0(t,e):function(s,i){const o=Q0(s,i),a=xv(o)+xv(s.Pe);return kh(o)&&kh(s.Pe)?K0(a):lp(s.serializer,a)}(t,e)}function DN(t,e,n){return t instanceof li?Y0(t,e):t instanceof ui?J0(t,e):n}function Q0(t,e){return t instanceof Xo?function(r){return kh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Jo extends Hu{}class li extends Hu{constructor(e){super(),this.elements=e}}function Y0(t,e){const n=X0(e);for(const r of t.elements)n.some(s=>gn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ui extends Hu{constructor(e){super(),this.elements=e}}function J0(t,e){let n=X0(e);for(const r of t.elements)n=n.filter(s=>!gn(s,r));return{arrayValue:{values:n}}}class Xo extends Hu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function xv(t){return ke(t.integerValue||t.doubleValue)}function X0(t){return sp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n){this.field=e,this.transform=n}}function jN(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof li&&s instanceof li||r instanceof ui&&s instanceof ui?ii(r.elements,s.elements,gn):r instanceof Xo&&s instanceof Xo?gn(r.Pe,s.Pe):r instanceof Jo&&s instanceof Jo}(t.transform,e.transform)}class LN{constructor(e,n){this.version=e,this.transformResults=n}}class at{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new at}static exists(e){return new at(void 0,e)}static updateTime(e){return new at(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ku{}function Z0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new up(t.key,at.none()):new ma(t.key,t.data,at.none());{const n=t.data,r=pt.empty();let s=new Ye(Ge.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Nr(t.key,r,new Ct(s.toArray()),at.none())}}function VN(t,e,n){t instanceof ma?function(s,i,o){const a=s.value.clone(),u=Sv(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Nr?function(s,i,o){if(!Cl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Sv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(eE(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wo(t,e,n,r){return t instanceof ma?function(i,o,a,u){if(!Cl(i.precondition,o))return a;const c=i.value.clone(),f=Tv(i.fieldTransforms,u,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Nr?function(i,o,a,u){if(!Cl(i.precondition,o))return a;const c=Tv(i.fieldTransforms,u,o),f=o.data;return f.setAll(eE(i)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,a){return Cl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function MN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Q0(r.transform,s||null);i!=null&&(n===null&&(n=pt.empty()),n.set(r.field,i))}return n||null}function Ev(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ii(r,s,(i,o)=>jN(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ma extends Ku{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Nr extends Ku{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function eE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Sv(t,e,n){const r=new Map;le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,DN(o,a,n[s]))}return r}function Tv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,ON(i,o,e))}return r}class up extends Ku{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tE extends Ku{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&VN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=q0();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=Z0(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&ii(this.mutations,e.mutations,(n,r)=>Ev(n,r))&&ii(this.baseMutations,e.baseMutations,(n,r)=>Ev(n,r))}}class cp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){le(e.mutations.length===r.length);let s=function(){return PN}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new cp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,oe;function nE(t){switch(t){default:return G();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function rE(t){if(t===void 0)return Mn("GRPC error has no .code"),V.UNKNOWN;switch(t){case Re.OK:return V.OK;case Re.CANCELLED:return V.CANCELLED;case Re.UNKNOWN:return V.UNKNOWN;case Re.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Re.INTERNAL:return V.INTERNAL;case Re.UNAVAILABLE:return V.UNAVAILABLE;case Re.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Re.NOT_FOUND:return V.NOT_FOUND;case Re.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Re.ABORTED:return V.ABORTED;case Re.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Re.DATA_LOSS:return V.DATA_LOSS;default:return G()}}(oe=Re||(Re={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new Gr([4294967295,4294967295],0);function Iv(t){const e=BN().encode(t),n=new T0;return n.update(e),new Uint8Array(n.digest())}function bv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Gr([n,r],0),new Gr([s,i],0)]}class dp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ro(`Invalid padding: ${n}`);if(r<0)throw new ro(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ro(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ro(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Gr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Gr.fromNumber(r)));return s.compare(zN)===1&&(s=new Gr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Iv(e),[r,s]=bv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new dp(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Iv(e),[r,s]=bv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ro extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ga.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gu(Q.min(),s,new Ie(ce),Fn(),re())}}class ga{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ga(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class sE{constructor(e,n){this.targetId=e,this.me=n}}class iE{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Cv{constructor(){this.fe=0,this.ge=Pv(),this.pe=Xe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=re(),n=re(),r=re();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:G()}}),new ga(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Pv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class WN{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fn(),this.qe=Av(),this.Qe=new Ie(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Rh(i))if(r===0){const o=new q(i.path);this.Ue(n,o,Be.newNoDocument(o,Q.min()))}else le(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ss(r).toUint8Array()}catch(u){if(u instanceof O0)return si("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new dp(o,s,i)}catch(u){return si(u instanceof ro?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Rh(a.target)){const u=new q(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Be.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=re();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Gu(e,n,this.Qe,this.ke,r);return this.ke=Fn(),this.qe=Av(),this.Qe=new Ie(ce),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Cv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ye(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Cv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Av(){return new Ie(q.comparator)}function Pv(){return new Ie(q.comparator)}const HN={asc:"ASCENDING",desc:"DESCENDING"},qN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KN={and:"AND",or:"OR"};class GN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dh(t,e){return t.useProto3Json||pa(e)?e:{value:e}}function pu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QN(t,e){return pu(t,e.toTimestamp())}function Pt(t){return le(!!t),Q.fromTimestamp(function(n){const r=xr(n);return new Le(r.seconds,r.nanos)}(t))}function hp(t,e){return jh(t,e).canonicalString()}function jh(t,e){const n=function(s){return new ge(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function aE(t){const e=ge.fromString(t);return le(fE(e)),e}function mu(t,e){return hp(t.databaseId,e.path)}function xo(t,e){const n=aE(e);if(n.get(1)!==t.databaseId.projectId)throw new z(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(uE(n))}function lE(t,e){return hp(t.databaseId,e)}function YN(t){const e=aE(t);return e.length===4?ge.emptyPath():uE(e)}function Lh(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uE(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function kv(t,e,n){return{name:mu(t,e),fields:n.value.mapValue.fields}}function JN(t,e){return"found"in e?function(r,s){le(!!s.found),s.found.name,s.found.updateTime;const i=xo(r,s.found.name),o=Pt(s.found.updateTime),a=s.found.createTime?Pt(s.found.createTime):Q.min(),u=new pt({mapValue:{fields:s.found.fields}});return Be.newFoundDocument(i,o,a,u)}(t,e):"missing"in e?function(r,s){le(!!s.missing),le(!!s.readTime);const i=xo(r,s.missing),o=Pt(s.readTime);return Be.newNoDocument(i,o)}(t,e):G()}function XN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,f){return c.useProto3Json?(le(f===void 0||typeof f=="string"),Xe.fromBase64String(f||"")):(le(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Xe.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const f=c.code===void 0?V.UNKNOWN:rE(c.code);return new z(f,c.message||"")}(o);n=new iE(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=xo(t,r.document.name),i=Pt(r.document.updateTime),o=r.document.createTime?Pt(r.document.createTime):Q.min(),a=new pt({mapValue:{fields:r.document.fields}}),u=Be.newFoundDocument(s,i,o,a),c=r.targetIds||[],f=r.removedTargetIds||[];n=new Al(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=xo(t,r.document),i=r.readTime?Pt(r.readTime):Q.min(),o=Be.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Al([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=xo(t,r.document),i=r.removedTargetIds||[];n=new Al([],i,s,null)}else{if(!("filter"in e))return G();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new $N(s,i),a=r.targetId;n=new sE(a,o)}}return n}function cE(t,e){let n;if(e instanceof ma)n={update:kv(t,e.key,e.value)};else if(e instanceof up)n={delete:mu(t,e.key)};else if(e instanceof Nr)n={update:kv(t,e.key,e.data),updateMask:aR(e.fieldMask)};else{if(!(e instanceof tE))return G();n={verify:mu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Jo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof li)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ui)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xo)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw G()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:QN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:G()}(t,e.precondition)),n}function ZN(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Pt(s.updateTime):Pt(i);return o.isEqual(Q.min())&&(o=Pt(i)),new LN(o,s.transformResults||[])}(n,e))):[]}function eR(t,e){return{documents:[lE(t,e.path)]}}function tR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lE(t,s);const i=function(c){if(c.length!==0)return hE(tn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(f=>function(g){return{field:Es(g.field),direction:sR(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Dh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function nR(t){let e=YN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){le(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=dE(p);return g instanceof tn&&V0(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(_){return new Yo(Ss(_.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,pa(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,y=p.values||[];return new hu(y,g)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const g=!p.before,y=p.values||[];return new hu(y,g)}(n.endAt)),TN(e,s,o,i,a,"F",u,c)}function rR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ss(n.unaryFilter.field);return De.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ss(n.unaryFilter.field);return De.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ss(n.unaryFilter.field);return De.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ss(n.unaryFilter.field);return De.create(o,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(t):t.fieldFilter!==void 0?function(n){return De.create(Ss(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return tn.create(n.compositeFilter.filters.map(r=>dE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(t):G()}function sR(t){return HN[t]}function iR(t){return qN[t]}function oR(t){return KN[t]}function Es(t){return{fieldPath:t.canonicalString()}}function Ss(t){return Ge.fromServerFormat(t.fieldPath)}function hE(t){return t instanceof De?function(n){if(n.op==="=="){if(gv(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NAN"}};if(mv(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gv(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NAN"}};if(mv(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Es(n.field),op:iR(n.op),value:n.value}}}(t):t instanceof tn?function(n){const r=n.getFilters().map(s=>hE(s));return r.length===1?r[0]:{compositeFilter:{op:oR(n.op),filters:r}}}(t):G()}function aR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n,r,s,i=Q.min(),o=Q.min(),a=Xe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.ct=e}}function uR(t){const e=nR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.un=new dR}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(wr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(wr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class dR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ye(ge.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ye(ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ci(0)}static kn(){return new ci(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.changes=new xi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Be.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&wo(r.mutation,s,Ct.empty(),Le.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const s=Wr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=no();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Wr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Fn();const o=_o(),a=function(){return _o()}();return n.forEach((u,c)=>{const f=r.get(c.key);s.has(c.key)&&(f===void 0||f.mutation instanceof Nr)?i=i.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),wo(f.mutation,c,f.mutation.getFieldMask(),Le.now())):o.set(c.key,Ct.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,f)=>o.set(c,f)),n.forEach((c,f)=>{var p;return a.set(c,new fR(f,(p=o.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=_o();let s=new Ie((o,a)=>o-a),i=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=r.get(u)||Ct.empty();f=a.applyToLocalView(c,f),r.set(u,f);const p=(s.get(a.batchId)||re()).add(u);s=s.insert(a.batchId,p)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,f=u.value,p=q0();f.forEach(g=>{if(!i.has(g)){const y=Z0(n.get(g),r.get(g));y!==null&&p.set(g,y),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Wr());let a=-1,u=i;return o.next(c=>F.forEach(c,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,re())).next(f=>({batchId:a,changes:H0(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let s=no();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=no();return this.indexManager.getCollectionParents(e,i).next(a=>F.forEach(a,u=>{const c=function(p,g){return new wi(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const f=c.getKey();o.get(f)===null&&(o=o.insert(f,Be.newInvalidDocument(f)))});let a=no();return o.forEach((u,c)=>{const f=i.get(u);f!==void 0&&wo(f.mutation,c,Ct.empty(),Le.now()),Wu(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Pt(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:uR(s.bundledQuery),readTime:Pt(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.overlays=new Ie(q.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wr();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Wr(),i=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ie((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=i.get(c.largestBatchId);f===null&&(f=Wr(),i=i.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const a=Wr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>a.set(c,f)),!(a.size()>=s)););return F.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new UN(n,r));let i=this.Ir.get(n);i===void 0&&(i=re(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(){this.Tr=new Ye(Ue.Er),this.dr=new Ye(Ue.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ue(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ue(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new q(new ge([])),r=new Ue(n,e),s=new Ue(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new q(new ge([])),r=new Ue(n,e),s=new Ue(n,e+1);let i=re();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ue(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ue{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ye(Ue.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new FN(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Ue(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ue(n,0),s=new Ue(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(ce);return n.forEach(s=>{const i=new Ue(s,0),o=new Ue(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;q.isDocumentKey(i)||(i=i.child(""));const o=new Ue(new q(i),0);let a=new Ye(ce);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new Ue(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ue(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.Mr=e,this.docs=function(){return new Ie(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Be.newInvalidDocument(n))}getEntries(e,n){let r=Fn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Be.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Fn();const o=n.path,a=new q(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||iN(sN(f),r)<=0||(s.has(f.key)||Wu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){G()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new wR(this)}getSize(e){return F.resolve(this.size)}}class wR extends hR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.persistence=e,this.Nr=new xi(n=>ip(n),op),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fp,this.targetCount=0,this.kr=ci.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ci(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n){this.qr={},this.overlays={},this.Qr=new tp(0),this.Kr=!1,this.Kr=!0,this.$r=new yR,this.referenceDelegate=e(this),this.Ur=new xR(this),this.indexManager=new cR,this.remoteDocumentCache=function(s){return new _R(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new lR(n),this.Gr=new mR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new vR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new SR(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class SR extends aN{constructor(e){super(),this.currentSequenceNumber=e}}class pp{constructor(e){this.persistence=e,this.Jr=new fp,this.Yr=null}static Zr(e){return new pp(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=q.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Q.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=re(),s=re();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new mp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return I1()?8:lN(ct())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new TR;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Hi()<=ie.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",xs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Hi()<=ie.DEBUG&&H("QueryEngine","Query:",xs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Hi()<=ie.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",xs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mn(n))):F.resolve())}Yi(e,n){if(wv(n))return F.resolve(null);let r=mn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=fu(n,null,"F"),r=mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=re(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,fu(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,s){return wv(n)||s.isEqual(Q.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(Hi()<=ie.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xs(n)),this.rs(e,o,n,rN(s,-1)).next(a=>a))})}ts(e,n){let r=new Ye(z0(e));return n.forEach((s,i)=>{Wu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Hi()<=ie.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",xs(n)),this.Ji.getDocumentsMatchingQuery(e,n,wr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ie(ce),this._s=new xi(i=>ip(i),op),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function CR(t,e,n,r){return new bR(t,e,n,r)}async function pE(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=re();for(const c of s){o.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of i){a.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function AR(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,f){const p=c.batch,g=p.keys();let y=F.resolve();return g.forEach(_=>{y=y.next(()=>f.getEntry(u,_)).next(A=>{const k=c.docVersions.get(_);le(k!==null),A.version.compareTo(k)<0&&(p.applyToRemoteDocument(A,c),A.isValidDocument()&&(A.setReadTime(c.commitVersion),f.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=re();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function mE(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function PR(t,e){const n=X(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;a.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,p)));let y=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Xe.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),s=s.insert(p,y),function(A,k,I){return A.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(g,y,f)&&a.push(n.Ur.updateTargetData(i,y))});let u=Fn(),c=re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),a.push(kR(i,o,e.documentUpdates).next(f=>{u=f.Ps,c=f.Is})),!r.isEqual(Q.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(f)}return F.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.os=s,i))}function kR(t,e,n){let r=re(),s=re();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Fn();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function NR(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function RR(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Vh(t,e,n){const r=X(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!fa(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Nv(t,e,n){const r=X(t);let s=Q.min(),i=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,f){const p=X(u),g=p._s.get(f);return g!==void 0?F.resolve(p.os.get(g)):p.Ur.getTargetData(c,f)}(r,o,mn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Q.min(),n?i:re())).next(a=>(OR(r,bN(e),a),{documents:a,Ts:i})))}function OR(t,e,n){let r=t.us.get(e)||Q.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Rv{constructor(){this.activeTargetIds=RN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DR{constructor(){this.so=new Rv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Rv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al=null;function fd(){return al===null?al=function(){return 268435456+Math.round(2147483648*Math.random())}():al++,"0x"+al.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="WebChannelConnection";class MR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=fd(),u=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,u,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,u,c,s).then(f=>(H("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw si("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_i}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=LR[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=fd();return new Promise((o,a)=>{const u=new I0;u.setWithCredentials(!0),u.listenOnce(b0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Il.NO_ERROR:const f=u.getResponseJson();H(st,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Il.TIMEOUT:H(st,`RPC '${e}' ${i} timed out`),a(new z(V.DEADLINE_EXCEEDED,"Request time out"));break;case Il.HTTP_ERROR:const p=u.getStatus();if(H(st,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const _=function(k){const I=k.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(I)>=0?I:V.UNKNOWN}(y.status);a(new z(_,y.message))}else a(new z(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new z(V.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{H(st,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);H(st,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=fd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=P0(),a=A0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");H(st,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=o.createWebChannel(f,u);let g=!1,y=!1;const _=new VR({Io:k=>{y?H(st,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(g||(H(st,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),H(st,`RPC '${e}' stream ${s} sending:`,k),p.send(k))},To:()=>p.close()}),A=(k,I,v)=>{k.listen(I,T=>{try{v(T)}catch(R){setTimeout(()=>{throw R},0)}})};return A(p,to.EventType.OPEN,()=>{y||(H(st,`RPC '${e}' stream ${s} transport opened.`),_.yo())}),A(p,to.EventType.CLOSE,()=>{y||(y=!0,H(st,`RPC '${e}' stream ${s} transport closed`),_.So())}),A(p,to.EventType.ERROR,k=>{y||(y=!0,si(st,`RPC '${e}' stream ${s} transport errored:`,k),_.So(new z(V.UNAVAILABLE,"The operation could not be completed")))}),A(p,to.EventType.MESSAGE,k=>{var I;if(!y){const v=k.data[0];le(!!v);const T=v,R=T.error||((I=T[0])===null||I===void 0?void 0:I.error);if(R){H(st,`RPC '${e}' stream ${s} received error:`,R);const L=R.status;let M=function(E){const b=Re[E];if(b!==void 0)return rE(b)}(L),S=R.message;M===void 0&&(M=V.INTERNAL,S="Unknown error status: "+L+" with message "+R.message),y=!0,_.So(new z(M,S)),p.close()}else H(st,`RPC '${e}' stream ${s} received:`,v),_.bo(v)}}),A(a,C0.STAT_EVENT,k=>{k.stat===Ah.PROXY?H(st,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===Ah.NOPROXY&&H(st,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function pd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t){return new GN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,n,r,s,i,o,a,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gp(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Mn(n.toString()),Mn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new z(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FR extends gE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=XN(this.serializer,e),r=function(i){if(!("targetChange"in i))return Q.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?Pt(o.readTime):Q.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Lh(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=Rh(u)?{documents:eR(i,u)}:{query:tR(i,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=oE(i,o.resumeToken);const c=Dh(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Q.min())>0){a.readTime=pu(i,o.snapshotVersion.toTimestamp());const c=Dh(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=rR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Lh(this.serializer),n.removeTarget=e,this.a_(n)}}class UR extends gE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return le(!!e.streamToken),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ZN(e.writeResults,e.commitTime),r=Pt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Lh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>cE(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new z(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,jh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new z(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,jh(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class BR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Mn(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{hs(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=X(u);c.L_.add(4),await ya(c),c.q_.set("Unknown"),c.L_.delete(4),await Yu(c)}(this))})}),this.q_=new BR(r,s)}}async function Yu(t){if(hs(t))for(const e of t.B_)await e(!0)}async function ya(t){for(const e of t.B_)await e(!1)}function yE(t,e){const n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),wp(n)?_p(n):Ei(n).r_()&&vp(n,e))}function yp(t,e){const n=X(t),r=Ei(n);n.N_.delete(e),r.r_()&&vE(n,e),n.N_.size===0&&(r.r_()?r.o_():hs(n)&&n.q_.set("Unknown"))}function vp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ei(t).A_(e)}function vE(t,e){t.Q_.xe(e),Ei(t).R_(e)}function _p(t){t.Q_=new WN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ei(t).start(),t.q_.v_()}function wp(t){return hs(t)&&!Ei(t).n_()&&t.N_.size>0}function hs(t){return X(t).L_.size===0}function _E(t){t.Q_=void 0}async function WR(t){t.q_.set("Online")}async function HR(t){t.N_.forEach((e,n)=>{vp(t,e)})}async function qR(t,e){_E(t),wp(t)?(t.q_.M_(e),_p(t)):t.q_.set("Unknown")}async function KR(t,e,n){if(t.q_.set("Online"),e instanceof iE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await gu(t,r)}else if(e instanceof Al?t.Q_.Ke(e):e instanceof sE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Q.min()))try{const r=await mE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(c);f&&i.N_.set(c,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(Xe.EMPTY_BYTE_STRING,f.snapshotVersion)),vE(i,u);const p=new sr(f.target,u,c,f.sequenceNumber);vp(i,p)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await gu(t,r)}}async function gu(t,e,n){if(!fa(e))throw e;t.L_.add(1),await ya(t),t.q_.set("Offline"),n||(n=()=>mE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Yu(t)})}function wE(t,e){return e().catch(n=>gu(t,n,e))}async function Ju(t){const e=X(t),n=Er(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;GR(e);)try{const s=await NR(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,QR(e,s)}catch(s){await gu(e,s)}xE(e)&&EE(e)}function GR(t){return hs(t)&&t.O_.length<10}function QR(t,e){t.O_.push(e);const n=Er(t);n.r_()&&n.V_&&n.m_(e.mutations)}function xE(t){return hs(t)&&!Er(t).n_()&&t.O_.length>0}function EE(t){Er(t).start()}async function YR(t){Er(t).p_()}async function JR(t){const e=Er(t);for(const n of t.O_)e.m_(n.mutations)}async function XR(t,e,n){const r=t.O_.shift(),s=cp.from(r,e,n);await wE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ju(t)}async function ZR(t,e){e&&Er(t).V_&&await async function(r,s){if(function(o){return nE(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();Er(r).s_(),await wE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ju(r)}}(t,e),xE(t)&&EE(t)}async function Dv(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=hs(n);n.L_.add(3),await ya(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Yu(n)}async function e2(t,e){const n=X(t);e?(n.L_.delete(2),await Yu(n)):e||(n.L_.add(2),await ya(n),n.q_.set("Unknown"))}function Ei(t){return t.K_||(t.K_=function(n,r,s){const i=X(n);return i.w_(),new FR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:WR.bind(null,t),Ro:HR.bind(null,t),mo:qR.bind(null,t),d_:KR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),wp(t)?_p(t):t.q_.set("Unknown")):(await t.K_.stop(),_E(t))})),t.K_}function Er(t){return t.U_||(t.U_=function(n,r,s){const i=X(n);return i.w_(),new UR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:YR.bind(null,t),mo:ZR.bind(null,t),f_:JR.bind(null,t),g_:XR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ju(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new xp(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ep(t,e){if(Mn("AsyncQueue",`${e}: ${t}`),fa(t))return new z(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=no(),this.sortedSet=new Ie(this.comparator)}static emptySet(e){return new Ks(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ks)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ks;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.W_=new Ie(q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class di{constructor(e,n,r,s,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new di(e,n,Ks.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class n2{constructor(){this.queries=Lv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=Lv(),i.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new z(V.ABORTED,"Firestore shutting down"))}}function Lv(){return new xi(t=>B0(t),zu)}async function SE(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new t2,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Ep(o,`Initialization of query '${xs(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Sp(n)}async function TE(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function r2(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Sp(n)}function s2(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Sp(t){t.Y_.forEach(e=>{e.next()})}var Mh,Vv;(Vv=Mh||(Mh={})).ea="default",Vv.Cache="cache";class IE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new di(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=di.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Mh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e){this.key=e}}class CE{constructor(e){this.key=e}}class i2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=re(),this.mutatedKeys=re(),this.Aa=z0(e),this.Ra=new Ks(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new jv,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),y=Wu(this.query,p)?p:null,_=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let k=!1;g&&y?g.data.isEqual(y.data)?_!==A&&(r.track({type:3,doc:y}),k=!0):this.ga(g,y)||(r.track({type:2,doc:y}),k=!0,(u&&this.Aa(y,u)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),k=!0):g&&!y&&(r.track({type:1,doc:g}),k=!0,(u||c)&&(a=!0)),k&&(y?(o=o.add(y),i=A?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(y,_){const A=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return A(y)-A(_)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new di(this.query,e.Ra,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new jv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new CE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new bE(r))}),n}ba(e){this.Ta=e.Ts,this.da=re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return di.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class o2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class a2{constructor(e){this.key=e,this.va=!1}}class l2{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new xi(a=>B0(a),zu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ie(q.comparator),this.Na=new Map,this.La=new fp,this.Ba={},this.ka=new Map,this.qa=ci.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function u2(t,e,n=!0){const r=OE(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await AE(r,e,n,!0),s}async function c2(t,e){const n=OE(t);await AE(n,e,!0,!1)}async function AE(t,e,n,r){const s=await RR(t.localStore,mn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await d2(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&yE(t.remoteStore,s),a}async function d2(t,e,n,r,s){t.Ka=(p,g,y)=>async function(A,k,I,v){let T=k.view.ma(I);T.ns&&(T=await Nv(A.localStore,k.query,!1).then(({documents:S})=>k.view.ma(S,T)));const R=v&&v.targetChanges.get(k.targetId),L=v&&v.targetMismatches.get(k.targetId)!=null,M=k.view.applyChanges(T,A.isPrimaryClient,R,L);return Fv(A,k.targetId,M.wa),M.snapshot}(t,p,g,y);const i=await Nv(t.localStore,e,!0),o=new i2(e,i.Ts),a=o.ma(i.documents),u=ga.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,u);Fv(t,n,c.wa);const f=new o2(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function h2(t,e,n){const r=X(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!zu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Vh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&yp(r.remoteStore,s.targetId),Fh(r,s.targetId)}).catch(ha)):(Fh(r,s.targetId),await Vh(r.localStore,s.targetId,!0))}async function f2(t,e){const n=X(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yp(n.remoteStore,r.targetId))}async function p2(t,e,n){const r=x2(t);try{const s=await function(o,a){const u=X(o),c=Le.now(),f=a.reduce((y,_)=>y.add(_.key),re());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let _=Fn(),A=re();return u.cs.getEntries(y,f).next(k=>{_=k,_.forEach((I,v)=>{v.isValidDocument()||(A=A.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,_)).next(k=>{p=k;const I=[];for(const v of a){const T=MN(v,p.get(v.key).overlayedDocument);T!=null&&I.push(new Nr(v.key,T,D0(T.value.mapValue),at.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,I,a)}).next(k=>{g=k;const I=k.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,k.batchId,I)})}).then(()=>({batchId:g.batchId,changes:H0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ie(ce)),c=c.insert(a,u),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await va(r,s.changes),await Ju(r.remoteStore)}catch(s){const i=Ep(s,"Failed to persist write");n.reject(i)}}async function PE(t,e){const n=X(t);try{const r=await PR(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?le(o.va):s.removedDocuments.size>0&&(le(o.va),o.va=!1))}),await va(n,r,e)}catch(r){await ha(r)}}function Mv(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=X(o);u.onlineState=a;let c=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(a)&&(c=!0)}),c&&Sp(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function m2(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ie(q.comparator);o=o.insert(i,Be.newNoDocument(i,Q.min()));const a=re().add(i),u=new Gu(Q.min(),new Map,new Ie(ce),o,a);await PE(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Tp(r)}else await Vh(r.localStore,e,!1).then(()=>Fh(r,e,n)).catch(ha)}async function g2(t,e){const n=X(t),r=e.batch.batchId;try{const s=await AR(n.localStore,e);NE(n,r,null),kE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await va(n,s)}catch(s){await ha(s)}}async function y2(t,e,n){const r=X(t);try{const s=await function(o,a){const u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,a).next(p=>(le(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(r.localStore,e);NE(r,e,n),kE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await va(r,s)}catch(s){await ha(s)}}function kE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function NE(t,e,n){const r=X(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Fh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||RE(t,r)})}function RE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(yp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Tp(t))}function Fv(t,e,n){for(const r of n)r instanceof bE?(t.La.addReference(r.key,e),v2(t,r)):r instanceof CE?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||RE(t,r.key)):G()}function v2(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),Tp(t))}function Tp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new q(ge.fromString(e)),r=t.qa.next();t.Na.set(r,new a2(n)),t.Oa=t.Oa.insert(n,r),yE(t.remoteStore,new sr(mn(ap(n.path)),r,"TargetPurposeLimboResolution",tp.oe))}}async function va(t,e,n){const r=X(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){s.push(c);const p=mp.Wi(u.targetId,c);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,c){const f=X(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(c,g=>F.forEach(g.$i,y=>f.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>F.forEach(g.Ui,y=>f.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!fa(p))throw p;H("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const y=f.os.get(g),_=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(_);f.os=f.os.insert(g,A)}}}(r.localStore,i))}async function _2(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await pE(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(u=>{u.reject(new z(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await va(n,r.hs)}}function w2(t,e){const n=X(t),r=n.Na.get(e);if(r&&r.va)return re().add(r.key);{let s=re();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function OE(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m2.bind(null,e),e.Ca.d_=r2.bind(null,e.eventManager),e.Ca.$a=s2.bind(null,e.eventManager),e}function x2(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y2.bind(null,e),e}class yu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return CR(this.persistence,new IR,e.initialUser,this.serializer)}Ga(e){return new ER(pp.Zr,this.serializer)}Wa(e){return new DR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yu.provider={build:()=>new yu};class Uh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Mv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_2.bind(null,this.syncEngine),await e2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new n2}()}createDatastore(e){const n=Qu(e.databaseInfo.databaseId),r=function(i){return new MR(i)}(e.databaseInfo);return function(i,o,a,u){return new $R(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new zR(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Mv(this.syncEngine,n,0),function(){return Ov.D()?new Ov:new jR}())}createSyncEngine(e,n){return function(s,i,o,a,u,c,f){const p=new l2(s,i,o,a,u,c);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=X(s);H("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ya(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Uh.provider={build:()=>new Uh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Mn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=X(s),a={documents:i.map(p=>mu(o.serializer,p))},u=await o.Lo("BatchGetDocuments",o.serializer.databaseId,ge.emptyPath(),a,i.length),c=new Map;u.forEach(p=>{const g=JN(o.serializer,p);c.set(g.key.toString(),g)});const f=[];return i.forEach(p=>{const g=c.get(p.toString());le(!!g),f.push(g)}),f}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new up(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=q.fromPath(r);this.mutations.push(new tE(s,this.precondition(s)))}),await async function(r,s){const i=X(r),o={writes:s.map(a=>cE(i.serializer,a))};await i.Mo("Commit",i.serializer.databaseId,ge.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw G();n=Q.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new z(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Q.min())?at.exists(!1):at.updateTime(n):at.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Q.min()))throw new z(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return at.updateTime(n)}return at.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new gp(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new E2(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!pa(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!nE(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=it.UNAUTHENTICATED,this.clientId=N0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ep(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function md(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await pE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Uv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await I2(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Dv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Dv(e.remoteStore,s)),t._onlineComponents=e}async function I2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await md(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;si("Error using user provided cache. Falling back to memory cache: "+n),await md(t,new yu)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await md(t,new yu);return t._offlineComponents}async function Ip(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await Uv(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await Uv(t,new Uh))),t._onlineComponents}function b2(t){return Ip(t).then(e=>e.syncEngine)}function C2(t){return Ip(t).then(e=>e.datastore)}async function jE(t){const e=await Ip(t),n=e.eventManager;return n.onListen=u2.bind(null,e.syncEngine),n.onUnlisten=h2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=c2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=f2.bind(null,e.syncEngine),n}function A2(t,e,n={}){const r=new pn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const f=new DE({next:g=>{f.Za(),o.enqueueAndForget(()=>TE(i,p));const y=g.docs.has(a);!y&&g.fromCache?c.reject(new z(V.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?c.reject(new z(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new IE(ap(a.path),f,{includeMetadataChanges:!0,_a:!0});return SE(i,p)}(await jE(t),t.asyncQueue,e,n,r)),r.promise}function P2(t,e,n={}){const r=new pn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const f=new DE({next:g=>{f.Za(),o.enqueueAndForget(()=>TE(i,p)),g.fromCache&&u.source==="server"?c.reject(new z(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new IE(a,f,{includeMetadataChanges:!0,_a:!0});return SE(i,p)}(await jE(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(t,e,n){if(!n)throw new z(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function k2(t,e,n,r){if(e===!0&&r===!0)throw new z(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Bv(t){if(!q.isDocumentKey(t))throw new z(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zv(t){if(q.isDocumentKey(t))throw new z(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G()}function nn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xu(t);throw new z(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Gk;switch(r.type){case"firstParty":return new Xk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$v.get(n);r&&(H("ComponentProvider","Removing Datastore"),$v.delete(n),r.terminate())}(this),Promise.resolve()}}function N2(t,e,n,r={}){var s;const i=(t=nn(t,Zu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=it.MOCK_USER;else{a=v1(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new z(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new it(c)}t._authCredentials=new Qk(new k0(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rr(this.firestore,e,this._query)}}class lt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lt(this.firestore,e,this._key)}}class yr extends Rr{constructor(e,n,r){super(e,n,ap(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new q(e))}withConverter(e){return new yr(this.firestore,e,this._path)}}function qe(t,e,...n){if(t=Ve(t),VE("collection","path",e),t instanceof Zu){const r=ge.fromString(e,...n);return zv(r),new yr(t,null,r)}{if(!(t instanceof lt||t instanceof yr))throw new z(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return zv(r),new yr(t.firestore,null,r)}}function yn(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=N0.newId()),VE("doc","path",e),t instanceof Zu){const r=ge.fromString(e,...n);return Bv(r),new lt(t,null,new q(r))}{if(!(t instanceof lt||t instanceof yr))throw new z(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return Bv(r),new lt(t.firestore,t instanceof yr?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gp(this,"async_queue_retry"),this.Vu=()=>{const r=pd();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=pd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=pd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new pn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!fa(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Mn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=xp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&G()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class fs extends Zu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Hv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hv(e),this._firestoreClient=void 0,await e}}}function R2(t,e){const n=typeof t=="object"?t:Rx(),r=typeof t=="string"?t:"(default)",s=Wf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=g1("firestore");i&&N2(s,...i)}return s}function ec(t){if(t._terminated)throw new z(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||O2(t),t._firestoreClient}function O2(t){var e,n,r;const s=t._freezeSettings(),i=function(a,u,c,f){return new dN(a,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,LE(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new T2(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this._byteString=e}static fromBase64String(e){try{return new os(Xe.fromBase64String(e))}catch(n){throw new z(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new os(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ge(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=/^__.*__$/;class j2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Nr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ma(e,this.data,n,this.fieldTransforms)}}class ME{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Nr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function FE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}class tc{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new tc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return vu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(FE(this.Cu)&&D2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class L2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qu(e)}Qu(e,n,r,s=!1){return new tc({Cu:e,methodName:n,qu:r,path:Ge.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wa(t){const e=t._freezeSettings(),n=Qu(t._databaseId);return new L2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ap(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Op("Data must be an object, but it was:",o,r);const a=zE(r,o);let u,c;if(i.merge)u=new Ct(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=$h(e,p,n);if(!o.contains(g))throw new z(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);HE(f,g)||f.push(g)}u=new Ct(f),c=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=o.fieldTransforms;return new j2(new pt(a),u,c)}class nc extends ps{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nc}}function UE(t,e,n){return new tc({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Pp extends ps{_toFieldTransform(e){return new qu(e.path,new Jo)}isEqual(e){return e instanceof Pp}}class kp extends ps{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=UE(this,e,!0),r=this.Ku.map(i=>ms(i,n)),s=new li(r);return new qu(e.path,s)}isEqual(e){return e instanceof kp&&ti(this.Ku,e.Ku)}}class Np extends ps{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=UE(this,e,!0),r=this.Ku.map(i=>ms(i,n)),s=new ui(r);return new qu(e.path,s)}isEqual(e){return e instanceof Np&&ti(this.Ku,e.Ku)}}class Rp extends ps{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Xo(e.serializer,G0(e.serializer,this.$u));return new qu(e.path,n)}isEqual(e){return e instanceof Rp&&this.$u===e.$u}}function $E(t,e,n,r){const s=t.Qu(1,e,n);Op("Data must be an object, but it was:",s,r);const i=[],o=pt.empty();ds(r,(u,c)=>{const f=Dp(e,u,n);c=Ve(c);const p=s.Nu(f);if(c instanceof nc)i.push(f);else{const g=ms(c,p);g!=null&&(i.push(f),o.set(f,g))}});const a=new Ct(i);return new ME(o,a,s.fieldTransforms)}function BE(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[$h(e,r,n)],u=[s];if(i.length%2!=0)throw new z(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push($h(e,i[g])),u.push(i[g+1]);const c=[],f=pt.empty();for(let g=a.length-1;g>=0;--g)if(!HE(c,a[g])){const y=a[g];let _=u[g];_=Ve(_);const A=o.Nu(y);if(_ instanceof nc)c.push(y);else{const k=ms(_,A);k!=null&&(c.push(y),f.set(y,k))}}const p=new Ct(c);return new ME(f,p,o.fieldTransforms)}function V2(t,e,n,r=!1){return ms(n,t.Qu(r?4:3,e))}function ms(t,e){if(WE(t=Ve(t)))return Op("Unsupported field value:",e,t),zE(t,e);if(t instanceof ps)return function(r,s){if(!FE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=ms(a,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return G0(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Le.fromDate(r);return{timestampValue:pu(s.serializer,i)}}if(r instanceof Le){const i=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pu(s.serializer,i)}}if(r instanceof bp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof os)return{bytesValue:oE(s.serializer,r._byteString)};if(r instanceof lt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Cp)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return lp(a.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Xu(r)}`)}(t,e)}function zE(t,e){const n={};return R0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(t,(r,s)=>{const i=ms(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function WE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof bp||t instanceof os||t instanceof lt||t instanceof ps||t instanceof Cp)}function Op(t,e,n){if(!WE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Xu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function $h(t,e,n){if((e=Ve(e))instanceof _a)return e._internalPath;if(typeof e=="string")return Dp(t,e);throw vu("Field path arguments must be of type string or ",t,!1,void 0,n)}const M2=new RegExp("[~\\*/\\[\\]]");function Dp(t,e,n){if(e.search(M2)>=0)throw vu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _a(...e.split("."))._internalPath}catch{throw vu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new z(V.INVALID_ARGUMENT,a+t+u)}function HE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new F2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class F2 extends _u{data(){return super.data()}}function rc(t,e){return typeof e=="string"?Dp(t,e):e instanceof _a?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jp{}class Lp extends jp{}function Vp(t,e,...n){let r=[];e instanceof jp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Mp).length,a=i.filter(u=>u instanceof sc).length;if(o>1||o>0&&a>0)throw new z(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class sc extends Lp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new sc(e,n,r)}_apply(e){const n=this._parse(e);return qE(e._query,n),new Rr(e.firestore,e.converter,Oh(e._query,n))}_parse(e){const n=wa(e.firestore);return function(i,o,a,u,c,f,p){let g;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new z(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Kv(p,f);const y=[];for(const _ of p)y.push(qv(u,i,_));g={arrayValue:{values:y}}}else g=qv(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Kv(p,f),g=V2(a,o,p,f==="in"||f==="not-in");return De.create(c,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Eo(t,e,n){const r=e,s=rc("where",t);return sc._create(s,r,n)}class Mp extends jp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Mp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:tn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const u of a)qE(o,u),o=Oh(o,u)}(e._query,n),new Rr(e.firestore,e.converter,Oh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fp extends Lp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new z(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yo(i,o)}(e._query,this._field,this._direction);return new Rr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new wi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Bh(t,e="asc"){const n=e,r=rc("orderBy",t);return Fp._create(r,n)}class Up extends Lp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Up(e,n,r)}_apply(e){return new Rr(e.firestore,e.converter,fu(e._query,this._limit,this._limitType))}}function $2(t){return Up._create("limit",t,"F")}function qv(t,e,n){if(typeof(n=Ve(n))=="string"){if(n==="")throw new z(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$0(e)&&n.indexOf("/")!==-1)throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ge.fromString(n));if(!q.isDocumentKey(r))throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pv(t,new q(r))}if(n instanceof lt)return pv(t,n._key);throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xu(n)}.`)}function Kv(t,e){if(!Array.isArray(t)||t.length===0)throw new z(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qE(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class KE{convertValue(e,n="none"){switch(is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ds(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ke(o.doubleValue));return new Cp(i)}convertGeoPoint(e){return new bp(ke(e.latitude),ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ko(e));default:return null}}convertTimestamp(e){const n=xr(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ge.fromString(e);le(fE(r));const s=new Go(r.get(1),r.get(3)),i=new q(r.popFirst(5));return s.isEqual(n)||Mn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class B2 extends KE{constructor(e){super(),this.firestore=e}convertBytes(e){return new os(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bp extends _u{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(rc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Pl extends Bp{data(e={}){return super.data(e)}}class z2{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Vs(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Pl(this._firestore,this._userDataWriter,r.key,r,new Vs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const u=new Pl(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Vs(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new Pl(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Vs(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,f=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:W2(a.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function W2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t){t=nn(t,lt);const e=nn(t.firestore,fs);return A2(ec(e),t._key).then(n=>q2(e,t,n))}class zp extends KE{constructor(e){super(),this.firestore=e}convertBytes(e){return new os(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,n)}}function Tn(t){t=nn(t,Rr);const e=nn(t.firestore,fs),n=ec(e),r=new zp(e);return U2(t._query),P2(n,t._query).then(s=>new z2(e,r,t,s))}function wu(t,e,n){t=nn(t,lt);const r=nn(t.firestore,fs),s=$p(t.converter,e,n);return Wp(r,[Ap(wa(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,at.none())])}function H2(t,e,n,...r){t=nn(t,lt);const s=nn(t.firestore,fs),i=wa(s);let o;return o=typeof(e=Ve(e))=="string"||e instanceof _a?BE(i,"updateDoc",t._key,e,n,r):$E(i,"updateDoc",t._key,e),Wp(s,[o.toMutation(t._key,at.exists(!0))])}function ir(t,e){const n=nn(t.firestore,fs),r=yn(t),s=$p(t.converter,e);return Wp(n,[Ap(wa(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,at.exists(!1))]).then(()=>r)}function Wp(t,e){return function(r,s){const i=new pn;return r.asyncQueue.enqueueAndForget(async()=>p2(await b2(r),s,i)),i.promise}(ec(t),e)}function q2(t,e,n){const r=n.docs.get(e._key),s=new zp(t);return new Bp(t,s,e._key,r,new Vs(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2={maxAttempts:5};function qi(t,e){if((t=Ve(t)).firestore!==e)throw new z(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2 extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=wa(n)}get(n){const r=qi(n,this._firestore),s=new B2(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return G();const o=i[0];if(o.isFoundDocument())return new _u(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new _u(this._firestore,s,r._key,null,r.converter);throw G()})}set(n,r,s){const i=qi(n,this._firestore),o=$p(i.converter,r,s),a=Ap(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){const o=qi(n,this._firestore);let a;return a=typeof(r=Ve(r))=="string"||r instanceof _a?BE(this._dataReader,"Transaction.update",o._key,r,s,i):$E(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=qi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=qi(e,this._firestore),r=new zp(this._firestore);return super.get(e).then(s=>new Bp(this._firestore,r,n._key,s._document,new Vs(!1,!1),n.converter))}}function QE(t,e,n){t=nn(t,fs);const r=Object.assign(Object.assign({},K2),n);return function(i){if(i.maxAttempts<1)throw new z(V.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const u=new pn;return i.asyncQueue.enqueueAndForget(async()=>{const c=await C2(i);new S2(i.asyncQueue,c,a,o,u).au()}),u.promise}(ec(t),s=>e(new G2(t,s)),r)}function Mt(){return new Pp("serverTimestamp")}function YE(...t){return new kp("arrayUnion",t)}function JE(...t){return new Np("arrayRemove",t)}function Hp(t){return new Rp("increment",t)}(function(e,n=!0){(function(s){_i=s})(yi),ni(new es("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new fs(new Yk(r.getProvider("auth-internal")),new eN(r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new z(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Go(c.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),gr(uv,"4.7.3",e),gr(uv,"4.7.3","esm2017")})();var Q2="firebase",Y2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr(Q2,Y2,"app");const J2={apiKey:"AIzaSyDAabcYtk1gK5zi27x6xZrOgGulxA8xmrM",authDomain:"women-ai-cd813.firebaseapp.com",projectId:"women-ai-cd813",storageBucket:"women-ai-cd813.firebasestorage.app",messagingSenderId:"4466110167",appId:"1:4466110167:web:172e3f2c868c3c68a24a92"},XE=Nx(J2),Xt=ZP(XE),fe=R2(XE),X2=async(t,e)=>{try{const r=(await VA(Xt,t,e)).user;return await wu(yn(fe,"users",r.uid),{email:r.email,createdAt:Mt(),isAnonymous:!1,language:"english"}),localStorage.setItem("userId",r.uid),r}catch(n){throw console.error("Sign up error:",n),n}},Z2=async(t,e)=>{try{const r=(await MA(Xt,t,e)).user;return localStorage.setItem("userId",r.uid),r}catch(n){throw console.error("Login error:",n),n}},hi=()=>Xt.currentUser?Xt.currentUser.uid:localStorage.getItem("userId"),ZE=async(t,e,n)=>{try{await ir(qe(fe,"symptom_logs"),{userId:t,symptoms:e,result:n,timestamp:Mt()})}catch(r){throw console.error("Error saving symptom log:",r),r}},eO=async(t="all",e="recent",n="en")=>{try{const r=qe(fe,"forum_posts"),s=[Eo("approved","==",!0),Eo("language","==",n)];t&&t!=="all"&&t!=="All"&&s.push(Eo("topic","==",t)),e==="recent"?s.push(Bh("createdAt","desc")):s.push(Bh("upvotes","desc")),s.push($2(20));const i=Vp(r,...s);return(await Tn(i)).docs.map(a=>({id:a.id,...a.data()}))}catch(r){throw console.error("Error fetching forum posts:",r),r}},tO=async t=>{try{const e=localStorage.getItem("language")||"en";await ir(qe(fe,"forum_posts"),{...t,language:e,createdAt:Mt(),upvotes:t.upvotes??0,upvotedBy:t.upvotedBy??[],commentCount:t.commentCount??0,approved:t.approved??!1,isPinned:t.isPinned??!1,isExpertAnswered:t.isExpertAnswered??!1})}catch(e){throw console.error("Error saving forum post:",e),e}},nO=async t=>{try{const e=await GE(yn(fe,"forum_posts",t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Error fetching forum post:",e),e}},Gv=async t=>{try{const e=Vp(qe(fe,"forum_posts",t,"comments"),Eo("approved","==",!0),Bh("createdAt","asc"));return(await Tn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error fetching comments:",e),e}},rO=async(t,e)=>{try{const n=qe(fe,"forum_posts",t,"comments");await ir(n,{...e,createdAt:Mt(),upvotes:e.upvotes??0,upvotedBy:e.upvotedBy??[],approved:e.approved??!0,isExpertComment:e.isExpertComment??!1});const r=yn(fe,"forum_posts",t);await H2(r,{commentCount:Hp(1)})}catch(n){throw console.error("Error adding comment:",n),n}},eS=async(t,e)=>{try{const n=yn(fe,"forum_posts",t);await QE(fe,async r=>{const s=await r.get(n);if(!s.exists())return;const o=(s.data().upvotedBy||[]).includes(e);r.update(n,{upvotedBy:o?JE(e):YE(e),upvotes:Hp(o?-1:1)})})}catch(n){throw console.error("Error toggling post upvote:",n),n}},sO=async(t,e,n)=>{try{const r=yn(fe,"forum_posts",t,"comments",e);await QE(fe,async s=>{const i=await s.get(r);if(!i.exists())return;const a=(i.data().upvotedBy||[]).includes(n);s.update(r,{upvotedBy:a?JE(n):YE(n),upvotes:Hp(a?-1:1)})})}catch(r){throw console.error("Error toggling comment upvote:",r),r}},tS=()=>{const t=localStorage.getItem("anonName");if(t)return t;const e=`Anon#${Math.floor(1e3+Math.random()*9e3)}`;return localStorage.setItem("anonName",e),e},iO=async(t,e)=>{try{const n=e.date,r=`${t}_${n}`;await wu(yn(fe,"journal_entries",r),{userId:t,...e,updatedAt:Mt(),createdAt:Mt()},{merge:!0})}catch(n){throw console.error("Error saving journal entry:",n),n}},oO=async(t,e)=>{try{const n=Vp(qe(fe,"journal_entries"),Eo("userId","==",t)),s=(await Tn(n)).docs.map(i=>({id:i.id,...i.data()}));return s.sort((i,o)=>o.date.localeCompare(i.date)),e?s.filter(i=>i.date.startsWith(e)):s}catch(n){throw console.error("Error fetching journal entries:",n),n}},aO=async(t,e)=>{try{const n=`${t}_${e}`,r=await GE(yn(fe,"journal_entries",n));return r.exists()?{id:r.id,...r.data()}:null}catch(n){throw console.error("Error fetching journal entry:",n),n}},gd=[{code:"en",label:"EN",native:"English"},{code:"hi",label:"HI",native:""},{code:"ta",label:"TA",native:""},{code:"te",label:"TE",native:""},{code:"kn",label:"KN",native:""},{code:"ml",label:"ML",native:""}],lO=()=>{const{i18n:t}=cs(),[e,n]=O.useState(!1),r=O.useRef(null),s=gd.find(o=>o.code===t.language)||gd[0];O.useEffect(()=>{const o=a=>{r.current&&!r.current.contains(a.target)&&n(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const i=o=>{t.changeLanguage(o),localStorage.setItem("language",o),n(!1)};return d.jsxs("div",{className:"relative",ref:r,children:[d.jsxs("button",{onClick:()=>n(!e),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full\r
          border border-[rgba(109,91,208,0.25)] text-[#6B6580] \r
          text-sm font-medium hover:border-[#6D5BD0] transition-all bg-white/50 backdrop-blur-sm`,children:[d.jsx("span",{children:s.label}),d.jsx("span",{className:"text-xs opacity-60",children:""})]}),e&&d.jsx("div",{className:`absolute right-0 top-10 w-40 z-50\r
          bg-[rgba(255,255,255,0.95)] backdrop-blur-xl\r
          border border-[rgba(109,91,208,0.12)]\r
          rounded-2xl shadow-lg overflow-hidden animate-fade-in origin-top-right`,children:d.jsx("div",{className:"py-1",children:gd.map(o=>d.jsxs("button",{onClick:()=>i(o.code),className:`w-full flex items-center justify-between
                  px-4 py-2.5 text-sm transition-colors
                  ${t.language===o.code?"bg-primary/5":"hover:bg-primary/5"}
                `,children:[d.jsx("span",{className:`font-medium ${t.language===o.code?"text-primary":"text-[#1E1B2E]"}`,children:o.native}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[#6B6580] text-xs opacity-70",children:o.label}),t.language===o.code&&d.jsx("span",{className:"text-primary text-xs",children:""})]})]},o.code))})})]})};function uO(){const{t}=cs(),e=us(),n=zt(),r=async()=>{try{await BA(Xt),n("/")}catch(i){console.error("Error signing out:",i)}},s=[{name:t("home.community"),path:"/forum"},{name:t("home.check_symptoms"),path:"/symptoms"},{name:t("home.remedies"),path:"/remedy"},{name:t("home.journal"),path:"/journal"},{name:t("home.nearby"),path:"/nearby"}];return d.jsx("nav",{className:"sticky top-0 z-50 w-full h-16 bg-[#F8F7FF]/85 backdrop-blur-lg border-b border-primary/10 transition-all duration-300",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-full flex justify-between items-center",children:[d.jsxs("div",{className:"flex items-center gap-8",children:[d.jsxs("div",{className:"flex items-baseline gap-2 cursor-pointer",onClick:()=>n("/forum"),children:[d.jsx("h1",{className:"text-2xl font-bold text-primary tracking-tight",children:"Sahachari"}),d.jsx("span",{className:"text-sm font-medium text-text-secondary",children:""})]}),d.jsx("div",{className:"hidden md:flex items-center gap-6",children:s.map(i=>d.jsx("button",{onClick:()=>n(i.path),className:`text-sm font-semibold transition-colors duration-200 ${e.pathname===i.path?"text-primary":"text-text-secondary hover:text-primary"}`,children:i.name},i.path))})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(lO,{}),d.jsx("button",{onClick:r,className:"text-text-secondary hover:text-danger p-2 transition-colors text-sm font-medium",title:t("common.logout"),children:t("common.logout")})]})]})})}function cO(){const t=zt(),e=us(),n=[{id:1,icon:"",label:"Forum",route:"/forum"},{id:5,icon:"",label:"Nearby",route:"/nearby"},{id:2,icon:"",label:"Check",route:"/symptoms"},{id:3,icon:"",label:"Remedies",route:"/remedy"},{id:4,icon:"",label:"Journal",route:"/journal"}];return d.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 h-20 bg-white/90 backdrop-blur-xl border-t border-primary/10 rounded-t-2xl flex justify-around items-center px-2 z-50 shadow-[0_-5px_20px_rgba(0,0,0,0.03)]",children:n.map(r=>{const s=e.pathname===r.route;return d.jsxs("button",{onClick:()=>t(r.route),className:`flex flex-col items-center justify-center p-2 rounded-xl transition-all duration-200 ${s?"text-primary scale-105":"text-text-secondary/60 hover:text-text-primary"}`,children:[d.jsx("span",{className:`text-2xl mb-1 transition-transform duration-200 ${s?"-translate-y-1":""}`,children:r.icon}),d.jsx("span",{className:`text-[10px] font-bold tracking-wide ${s?"opacity-100":"opacity-0 scale-0"} transition-all duration-200`,children:r.label})]},r.id)})})}function dO(){zt();const[t,e]=O.useState("login"),[n,r]=O.useState(""),[s,i]=O.useState(""),[o,a]=O.useState(""),[u,c]=O.useState(!1),[f,p]=O.useState(!1),[g,y]=O.useState(""),[_,A]=O.useState(!1),k=async I=>{if(I.preventDefault(),y(""),t==="signup"&&s!==o){y("Passwords do not match");return}if(t==="signup"&&!_){y("Please agree to the disclaimer");return}p(!0);try{t==="signup"?await X2(n,s):await Z2(n,s)}catch(v){console.log(v.code);let T="Authentication failed";(v.code==="auth/user-not-found"||v.code==="auth/invalid-credential")&&(T="No account found with this email"),v.code==="auth/wrong-password"&&(T="Incorrect password"),v.code==="auth/email-already-in-use"&&(T="Email already in use"),v.code==="auth/weak-password"&&(T="Password should be at least 6 characters"),y(T),p(!1)}};return d.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center bg-[#F8F7FF] font-sans text-text-primary relative overflow-hidden p-4",children:[d.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-primary/5 rounded-full blur-3xl pointer-events-none"}),d.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-secondary/5 rounded-full blur-3xl pointer-events-none"}),d.jsxs("div",{className:"w-full max-w-[440px] bg-white/70 backdrop-blur-xl border border-white/60 shadow-[0_8px_30px_rgb(0,0,0,0.04)] rounded-3xl p-6 sm:p-10 animate-fade-in-up relative z-10",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-extrabold text-primary mb-1 tracking-tight",children:"Sahachari"}),d.jsx("p",{className:"text-text-secondary font-medium mb-6",children:""}),d.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Welcome"}),d.jsx("p",{className:"text-text-secondary text-sm",children:"Your safe space for women's health awareness"})]}),d.jsxs("div",{className:"flex p-1 bg-primary/5 rounded-full mb-8 relative",children:[d.jsx("button",{onClick:()=>e("login"),className:`flex-1 py-2.5 text-sm font-semibold rounded-full transition-all duration-300 z-10 ${t==="login"?"bg-white text-primary shadow-sm scale-100":"text-text-secondary hover:text-primary/70"}`,children:"Log In"}),d.jsx("button",{onClick:()=>e("signup"),className:`flex-1 py-2.5 text-sm font-semibold rounded-full transition-all duration-300 z-10 ${t==="signup"?"bg-white text-primary shadow-sm scale-100":"text-text-secondary hover:text-primary/70"}`,children:"Sign Up"})]}),g&&d.jsxs("div",{className:"mb-6 bg-[#B5756B]/10 border border-[#B5756B]/20 rounded-xl px-4 py-3 text-danger text-sm flex items-center gap-2 animate-shake",children:[d.jsx("span",{children:""})," ",g]}),d.jsxs("form",{onSubmit:k,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-text-secondary text-xs font-bold uppercase tracking-wide mb-1.5 ml-1",children:"Email"}),d.jsx("input",{type:"email",value:n,onChange:I=>r(I.target.value),placeholder:"name@example.com",className:"w-full px-5 py-3.5 rounded-2xl bg-white border border-primary/10 text-text-primary placeholder:text-text-secondary/50 focus:border-primary focus:outline-none focus:ring-4 focus:ring-primary/5 transition-all shadow-sm",required:!0})]}),d.jsxs("div",{className:"relative",children:[d.jsxs("div",{className:"flex justify-between items-center mb-1.5 ml-1",children:[d.jsx("label",{className:"text-text-secondary text-xs font-bold uppercase tracking-wide",children:"Password"}),t==="login"&&d.jsx("a",{href:"#",className:"text-xs text-primary font-semibold hover:underline",children:"Forgot password?"})]}),d.jsx("input",{type:u?"text":"password",value:s,onChange:I=>i(I.target.value),placeholder:"",className:"w-full px-5 py-3.5 rounded-2xl bg-white border border-primary/10 text-text-primary placeholder:text-text-secondary/50 focus:border-primary focus:outline-none focus:ring-4 focus:ring-primary/5 transition-all shadow-sm",required:!0}),d.jsx("button",{type:"button",onClick:()=>c(!u),className:"absolute right-4 top-[38px] text-text-secondary/60 hover:text-primary transition-colors",children:u?"":""})]}),t==="signup"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-text-secondary text-xs font-bold uppercase tracking-wide mb-1.5 ml-1",children:"Confirm Password"}),d.jsx("input",{type:"password",value:o,onChange:I=>a(I.target.value),placeholder:"",className:"w-full px-5 py-3.5 rounded-2xl bg-white border border-primary/10 text-text-primary placeholder:text-text-secondary/50 focus:border-primary focus:outline-none focus:ring-4 focus:ring-primary/5 transition-all shadow-sm",required:!0})]}),d.jsxs("div",{className:"flex items-start gap-3 mt-2 px-1",children:[d.jsx("input",{type:"checkbox",id:"disclaimer",checked:_,onChange:I=>A(I.target.checked),className:"mt-1 w-4 h-4 text-primary rounded border-gray-300 focus:ring-primary accent-primary cursor-pointer"}),d.jsx("label",{htmlFor:"disclaimer",className:"text-xs text-text-secondary leading-tight cursor-pointer select-none",children:"I understand this app provides health information for awareness only, not medical diagnosis."})]})]}),d.jsx("button",{type:"submit",disabled:f,className:"w-full bg-primary text-white py-4 rounded-full font-bold text-sm uppercase tracking-wide hover:bg-[#5A4AB8] active:scale-[0.98] transition-all shadow-lg shadow-primary/25 disabled:opacity-70 disabled:cursor-not-allowed mt-4",children:f?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Processing..."]}):t==="login"?"Sign In":"Create Account"})]}),d.jsxs("div",{className:"relative my-8",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-primary/10"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"bg-[#F8F7FF] px-4 text-text-secondary/60 rounded-full",children:"or"})})]}),d.jsx("p",{className:"text-xs text-text-secondary/60 text-center mt-3",children:"Your data stays private."})]}),d.jsx("div",{className:"absolute bottom-6 text-center w-full pointer-events-none",children:d.jsx("p",{className:"text-[10px] text-text-secondary opacity-40 uppercase tracking-widest",children:"Powered by Google Gemini AI"})})]})}function ic(){return d.jsxs("div",{className:"bg-primary/5 border border-primary/15 rounded-xl p-4 flex items-start gap-3 mt-8",children:[d.jsx("span",{className:"text-xl",children:""}),d.jsxs("p",{className:"text-sm text-text-secondary leading-relaxed",children:[d.jsx("strong",{children:"Disclaimer:"})," This AI tool provides health information for educational purposes only. It is not a substitute for professional medical advice, diagnosis, or treatment. Always consult a qualified healthcare provider for any medical concerns."]})]})}function hO(){const{t}=cs(),e=zt(),n=[{id:1,icon:"",title:t("home.check_symptoms"),description:"Analyze symptoms & get AI insights",route:"/symptoms",color:"bg-primary/10 text-primary"},{id:2,icon:"",title:t("home.community"),description:"Connect anonymously with others",route:"/forum",color:"bg-secondary/10 text-secondary"},{id:3,icon:"",title:t("home.remedies"),description:"Traditional wisdom backed by science",route:"/remedy",color:"bg-accent/20 text-[#4A7C59]"},{id:4,icon:"",title:t("home.journal"),description:"Track your personal health journey",route:"/journal",color:"bg-warning/10 text-warning"}];return d.jsx("div",{className:"min-h-[calc(100vh-64px)] w-full flex flex-col items-center animate-fade-in relative z-10",children:d.jsxs("div",{className:"w-full max-w-5xl mx-auto px-6 py-12 md:py-20 flex flex-col items-center text-center",children:[d.jsxs("div",{className:"max-w-2xl mb-16",children:[d.jsx("div",{className:"inline-block px-4 py-1.5 rounded-full bg-primary/5 text-primary text-sm font-semibold tracking-wide mb-6",children:"WOMEN'S HEALTH COMPANION"}),d.jsxs("h1",{className:"text-4xl md:text-6xl font-extrabold text-text-primary mb-6 tracking-tight leading-tight",children:[t("home.title")," ",d.jsx("br",{}),d.jsx("span",{className:"text-primary transparent bg-clip-text bg-gradient-to-r from-primary to-secondary",children:"Sahachari"})]}),d.jsx("p",{className:"text-lg md:text-xl text-text-secondary leading-relaxed mb-10 max-w-lg mx-auto",children:t("home.subtitle")}),d.jsx("button",{onClick:()=>e("/symptoms"),className:"bg-primary text-white rounded-full px-8 py-4 font-semibold text-lg hover:bg-[#5A4AB8] transition-all transform hover:scale-[1.02] active:scale-95 shadow-lg shadow-primary/25",children:t("home.check_symptoms")})]}),d.jsx("div",{className:"w-full h-px bg-gradient-to-r from-transparent via-primary/20 to-transparent mb-16"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 w-full",children:n.map(r=>d.jsxs("button",{onClick:()=>e(r.route),className:"glass-card p-6 text-left group hover:bg-white/80",children:[d.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-2xl mb-4 ${r.color} group-hover:scale-110 transition-transform duration-300`,children:r.icon}),d.jsx("h3",{className:"text-lg font-bold text-text-primary mb-2",children:r.title}),d.jsx("p",{className:"text-sm text-text-secondary leading-normal",children:r.description})]},r.id))}),d.jsx("div",{className:"w-full max-w-4xl mt-12",children:d.jsx(ic,{})}),d.jsx("footer",{className:"mt-20 text-text-secondary/60 text-sm",children:d.jsx("p",{children:"Built with  for women everywhere"})})]})})}const fO="AIzaSyBv-TaDO2XgJYEP3lGszdwubSrwu-anoVQ",pO="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent",qp=async t=>{var e,n,r,s,i,o;try{const a=await fetch(`${pO}?key=${fO}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:t}]}]})});if(!a.ok){const p=await a.json().catch(()=>({}));throw console.error("Gemini API Error Details:",p),new Error(`Gemini API Error: ${a.status} ${a.statusText} - ${((e=p.error)==null?void 0:e.message)||"Unknown error"}`)}const c=(o=(i=(s=(r=(n=(await a.json()).candidates)==null?void 0:n[0])==null?void 0:r.content)==null?void 0:s.parts)==null?void 0:i[0])==null?void 0:o.text;if(!c)throw new Error("No response generated");const f=c.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(f)}catch(a){throw console.error("Gemini AI Error:",a),a}},Kp=()=>({en:"English",ta:"Tamil",hi:"Hindi",ml:"Malayalam",te:"Telugu",kn:"Kannada"})[localStorage.getItem("language")]||"English",nS=async(t,e="")=>{const n=Array.isArray(t)?t.join(", "):t,r=Kp(),s=`
    You are a compassionate, expert women's health assistant for the Indian context.
    The user is experiencing these symptoms: ${n}.
    Additional details: "${e}".

    Analyze these symptoms carefully. Consider common conditions like PCOS, Anemia, Thyroid issues, PMS, Endometriosis, etc.
    Provide a JSON response with the following structure.
    Strictly output ONLY valid JSON.
    Respond entirely in ${r}. All text fields (name, description, tips, etc.) must be in ${r}.

    {
      "possible_conditions": [
        { "name": "Condition Name", "probability": "High/Medium/Low", "description": "Brief explanation in simple terms." }
      ],
      "see_doctor_urgency": "Immediately" | "Within a week" | "Monitor symptoms",
      "self_care_tips": ["Tip 1", "Tip 2", "Tip 3"],
      "local_foods": ["Food 1 (e.g. Ragi)", "Food 2 (e.g. Amla)"],
      "disclaimer": "Standard medical disclaimer."
    }
  `;return qp(s)},mO=async t=>{if(!t||t.length===0)return null;const e=Kp(),r=`
    Analyze this user's weekly health log (journal entries):
    ${t.map(s=>`Date: ${s.date}, Mood: ${s.mood}, Period: ${s.period}, Symptoms: ${s.notes||"None"}, Fatigue: ${s.fatigue}/5`).join(`
`)}

    Identify patterns related to their menstrual cycle, mood, or energy.
    Provide a JSON response with the following structure.
    Strictly output ONLY valid JSON.
    Respond entirely in ${e}.

    {
      "summary": "2-3 sentence summary of their week.",
      "pattern": "Any noticeable pattern (e.g., 'Mood drops 2 days before period').",
      "suggestion": "One actionable wellness tip.",
      "anemia_risk": "Low" | "Moderate" | "High",
      "anemia_reason": "Why you think so (e.g., fatigue consistently high)."
    }
  `;return qp(r)},gO=async t=>{const e=Kp(),n=`
    Evaluate the safety of this home remedy: "${t}" for women's health.
    Context: Indian home remedies.
    Provide a JSON response with the following structure.
    Strictly output ONLY valid JSON.
    Respond entirely in ${e}.

    {
      "verdict": "Safe" | "Caution" | "Unsafe",
      "explanation": "Why?",
      "scientific_backing": "Supported" | "Mixed Evidence" | "Folklore",
      "tip": "How to use safely."
    }
  `;return qp(n)},yO="AIzaSyAiXj8duBDOyuE_vjt-SFwqEfTVLPOfDYw",vO="https://language.googleapis.com/v1/documents",Gp=async(t,e,n="PLAIN_TEXT")=>{const r=await fetch(`${vO}:${t}?key=${yO}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document:{type:n,content:e},encodingType:"UTF8"})});if(!r.ok){const s=await r.json().catch(()=>({}));throw console.error(`Cloud NL ${t} Error:`,s),new Error(`Cloud NL Error: ${r.statusText}`)}return r.json()},_O=async t=>{try{const e=await Gp("moderateText",t),n={};return(e.moderationCategories||[]).forEach(r=>{n[r.name]=r.confidence}),n}catch(e){return console.error("Moderation failed:",e),{}}},wO=async t=>{try{return((await Gp("analyzeEntities",t)).entities||[]).map(n=>({name:n.name,type:n.type,salience:n.salience}))}catch(e){return console.error("Entity extraction failed:",e),[]}},xO=async t=>{if(t.split(" ").length<20)return[];try{return((await Gp("classifyText",t)).categories||[]).map(n=>n.name)}catch(e){return console.warn("Classification skipped:",e.message),[]}},zh={en:{speechLang:"en-IN",ttsLang:"en-IN",fallbackLang:"en-US",voiceKeywords:["India","English"]},ta:{speechLang:"ta-IN",ttsLang:"ta-IN",fallbackLang:"ta-IN",voiceKeywords:["Tamil","ta-IN"]},hi:{speechLang:"hi-IN",ttsLang:"hi-IN",fallbackLang:"hi-IN",voiceKeywords:["Hindi","hi-IN"]},ml:{speechLang:"ml-IN",ttsLang:"ml-IN",fallbackLang:"ml-IN",voiceKeywords:["Malayalam","ml-IN"]},te:{speechLang:"te-IN",ttsLang:"te-IN",fallbackLang:"te-IN",voiceKeywords:["Telugu","te-IN"]}},EO=(t,e,n)=>{const r=window.SpeechRecognition||window.webkitSpeechRecognition;if(!r)return n("Speech recognition not supported in this browser. Try Chrome."),null;const s=zh[t]||zh.en,i=new r;i.lang=s.speechLang,i.continuous=!1,i.interimResults=!0,i.maxAlternatives=1,i.onresult=o=>{let a="",u="";for(let c=o.resultIndex;c<o.results.length;c++){const f=o.results[c][0].transcript;o.results[c].isFinal?u+=f:a+=f}e({final:u,interim:a,isFinal:u.length>0})},i.onerror=o=>{const a={"not-allowed":"Microphone access denied. Please allow microphone.","no-speech":"No speech detected. Please try again.",network:"Network error. Check your connection.","language-not-supported":`${t.toUpperCase()} voice input not 
        supported on this device. Try typing instead.`};n(a[o.error]||"Voice input failed. Try typing.")},i.onend=()=>{};try{return i.start(),i}catch{return n("Could not start voice input. Try again."),null}},SO=t=>{var i;const e=((i=window.speechSynthesis)==null?void 0:i.getVoices())||[],n=zh[t],r=e.some(o=>o.lang===(n==null?void 0:n.ttsLang)||o.lang.startsWith(t)),s=!!(window.SpeechRecognition||window.webkitSpeechRecognition);return{tts:r,stt:s}},TO=({onTranscript:t})=>{const{i18n:e}=cs(),[n,r]=O.useState(!1),[s,i]=O.useState(""),[o,a]=O.useState(null),u=O.useRef(null),c={en:"English",ta:"Tamil",hi:"Hindi",ml:"Malayalam",te:"Telugu",kn:"Kannada"},f=()=>{var g;if(a(null),n){(g=u.current)==null||g.stop(),r(!1),i("");return}if(!SO(e.language).stt){a("Voice input not supported. Use Chrome browser.");return}r(!0),u.current=EO(e.language,({final:y,interim:_,isFinal:A})=>{A?(t(y),r(!1),i("")):i(_)},y=>{a(y),r(!1),i("")})};return d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsxs("button",{onClick:f,className:`relative w-14 h-14 rounded-full flex items-center 
          justify-center transition-all duration-200 
          ${n?"bg-[#B5756B] scale-110":"bg-[#6D5BD0] hover:scale-105"}`,children:[n&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:`absolute inset-0 rounded-full \r
              bg-[#B5756B] animate-ping opacity-30`}),d.jsx("span",{className:`absolute inset-[-8px] rounded-full \r
              border-2 border-[#B5756B] opacity-20 animate-pulse`})]}),d.jsx("span",{className:"text-white text-xl z-10",children:n?"":""})]}),d.jsx("span",{className:"text-xs text-[#6B6580]",children:n?`Listening in ${c[e.language]||e.language}...`:`Tap to speak in ${c[e.language]||e.language}`}),s&&d.jsxs("div",{className:`w-full bg-[rgba(109,91,208,0.06)] \r
          border border-[rgba(109,91,208,0.15)]\r
          rounded-xl px-3 py-2 text-sm text-[#6B6580] italic`,children:[s,"..."]}),["te","ml"].includes(e.language)&&!n&&d.jsxs("p",{className:"text-xs text-[#C4956A] text-center max-w-xs",children:[" ",c[e.language]," voice input requires language pack installed on your device. Typing works in all languages."]}),o&&d.jsx("div",{className:`w-full bg-[rgba(181,117,107,0.06)]\r
          border border-[rgba(181,117,107,0.2)]\r
          rounded-xl px-3 py-2 text-sm text-[#B5756B]`,children:o})]})},IO=["Irregular Periods","Acne","Weight Gain","Hair Loss","Fatigue","Mood Swings","Pelvic Pain","Heavy Bleeding","Cramps","Headache","Nausea","Bloating","Back Pain","Dizziness","Breast Tenderness","Insomnia","Anxiety"];function bO(){const{t,i18n:e}=cs(),n=zt(),[r,s]=O.useState([]),[i,o]=O.useState(""),[a,u]=O.useState(!1),[c,f]=O.useState(t("common.analyzing")),p=y=>{s(_=>_.includes(y)?_.filter(A=>A!==y):[..._,y])},g=async()=>{if(r.length===0&&!i.trim()){alert("Please select at least one symptom or describe your problem.");return}u(!0),f(t("common.analyzing"));try{let y=[...r];if(i.trim().length>3)try{const I=(await wO(i)).filter(v=>["OTHER","EVENT","CONSUMER_GOOD"].includes(v.type)&&v.salience>.02).map(v=>v.name);I.forEach(v=>{y.some(T=>T.toLowerCase()===v.toLowerCase())||y.push(v)}),I.length>0&&await new Promise(v=>setTimeout(v,500))}catch(k){console.warn("Entity extraction skipped:",k)}f(t("common.analyzing"));const _=await nS(y,i),A=hi();A&&await ZE(A,y,_),n("/results",{state:{result:_,symptoms:y}})}catch(y){console.error(y),alert(t("common.error"))}finally{u(!1)}};return d.jsx("div",{className:"min-h-full pb-24 pt-8 animate-fade-in",children:d.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[d.jsx("h2",{className:"text-3xl font-extrabold text-text-primary mb-1 tracking-tight",children:t("symptoms.title")}),d.jsx("p",{className:"text-text-secondary mb-6 text-lg",children:t("symptoms.subtitle")}),d.jsx(ic,{}),d.jsxs("div",{className:"glass-card p-6 mb-6 mt-6",children:[d.jsx("p",{className:"text-xs font-bold uppercase tracking-widest text-text-secondary mb-4",children:t("symptoms.common_label")}),d.jsx("div",{className:"flex flex-wrap gap-3",children:IO.map(y=>d.jsx("button",{onClick:()=>p(y),className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 border ${r.includes(y)?"bg-primary text-white border-primary shadow-lg shadow-primary/20 scale-[1.04]":"bg-white text-text-secondary border-primary/20 hover:border-primary hover:text-primary"}`,children:y},y))}),r.length>0&&d.jsxs("p",{className:"text-xs text-primary font-semibold mt-4",children:[" ",r.length," ",t("symptoms.selected")]})]}),d.jsxs("div",{className:"glass-card p-5 mb-6",children:[d.jsx("div",{className:"flex items-center justify-between mb-4",children:d.jsx("label",{className:"block text-sm font-semibold text-text-primary uppercase tracking-wide",children:t("symptoms.describe_label")})}),d.jsx("textarea",{value:i,onChange:y=>o(y.target.value),placeholder:t("symptoms.placeholder"),className:"w-full px-4 py-3 bg-white/60 border border-primary/20 rounded-xl focus:outline-none focus:border-primary focus:bg-white/90 transition-all resize-none text-text-primary placeholder:text-text-secondary/50 text-sm mb-4",rows:"3"}),d.jsx(TO,{onTranscript:y=>{o(_=>(_+" "+y).trim())}})]}),d.jsx("div",{className:"flex items-center gap-4",children:d.jsx("button",{onClick:g,disabled:a,className:"flex-1 py-4 bg-primary text-white font-bold rounded-full text-lg shadow-lg shadow-primary/25 hover:bg-primary/80 hover:shadow-xl hover:translate-y-[-2px] active:scale-[0.98] transition-all disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:a?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),c]}):d.jsxs(d.Fragment,{children:[t("symptoms.analyze")," "]})})})]})})}function CO({condition:t}){const e={High:"bg-red-50 border-red-200 text-red-700",Medium:"bg-amber-50 border-amber-200 text-amber-700",Low:"bg-emerald-50 border-emerald-200 text-emerald-700"}[t.probability]||"bg-gray-50 border-gray-200 text-gray-600",n={High:"w-4/5",Medium:"w-1/2",Low:"w-1/4"}[t.probability]||"w-1/4",r={High:"bg-red-400",Medium:"bg-amber-400",Low:"bg-emerald-400"}[t.probability]||"bg-gray-400";return d.jsxs("div",{className:"glass-card p-6 border border-primary/10",children:[d.jsxs("div",{className:"flex items-start justify-between mb-3",children:[d.jsx("h3",{className:"text-lg font-bold text-text-primary",children:t.name}),d.jsxs("span",{className:`text-xs font-bold px-3 py-1 rounded-full border ${e}`,children:[t.probability," likelihood"]})]}),d.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5 mb-4",children:d.jsx("div",{className:`h-1.5 rounded-full transition-all duration-1000 ${n} ${r}`})}),d.jsx("p",{className:"text-text-secondary text-sm leading-relaxed",children:t.description})]})}function AO(){var k,I,v;const t=us(),e=zt(),{symptoms:n=[],additional:r=""}=t.state||{},[s,i]=O.useState(null),[o,a]=O.useState(!0),[u,c]=O.useState(""),[f,p]=O.useState(!1);O.useEffect(()=>{if(!n.length&&!r.trim()){e("/symptoms");return}g()},[]);const g=async()=>{a(!0),c("");try{const T=await nS(n,r);i(T);const R=hi();R&&(await ZE(R,n,T),p(!0))}catch(T){console.error("Analysis error:",T),c(T.message||"Failed to analyze symptoms. Please check your Gemini API key in .env")}finally{a(!1)}},y={Immediately:{icon:"",bg:"bg-red-50 border-red-200",text:"text-red-700",title:"Seek medical attention immediately",sub:"Your symptoms may need urgent care. Please see a doctor today."},"Within a week":{icon:"",bg:"bg-amber-50 border-amber-200",text:"text-amber-700",title:"Consult a doctor within a week",sub:"Your symptoms warrant a medical consultation soon."},"Monitor symptoms":{icon:"",bg:"bg-emerald-50 border-emerald-200",text:"text-emerald-700",title:"Monitor your symptoms",sub:"Continue self-care and track any changes."}};if(o)return d.jsx("div",{className:"min-h-screen flex items-center justify-center animate-fade-in",children:d.jsxs("div",{className:"text-center px-6",children:[d.jsx("div",{className:"w-16 h-16 border-4 border-primary/20 border-t-primary rounded-full animate-spin mx-auto mb-6"}),d.jsx("p",{className:"text-text-primary text-xl font-bold mb-2",children:"Analyzing with AI..."}),d.jsx("p",{className:"text-text-secondary text-sm",children:"Gemini is processing your symptoms"}),d.jsx("div",{className:"mt-4 flex justify-center gap-1",children:[0,1,2].map(T=>d.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:`${T*.15}s`}},T))})]})});if(u)return d.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:d.jsxs("div",{className:"text-center max-w-md",children:[d.jsx("div",{className:"text-5xl mb-4",children:""}),d.jsx("h2",{className:"text-xl font-bold text-text-primary mb-2",children:"Analysis Failed"}),d.jsx("p",{className:"text-text-secondary text-sm mb-2",children:u}),d.jsx("p",{className:"text-text-secondary text-xs mb-6 bg-gray-50 p-3 rounded-xl font-mono",children:"Make sure VITE_GEMINI_API_KEY is set in your .env file"}),d.jsxs("div",{className:"flex gap-3 justify-center",children:[d.jsx("button",{onClick:g,className:"px-6 py-3 bg-primary text-white rounded-full font-bold hover:bg-primary/80 transition-all",children:"Retry"}),d.jsx("button",{onClick:()=>e("/symptoms"),className:"px-6 py-3 border border-primary/30 text-primary rounded-full font-bold hover:bg-primary/5 transition-all",children:"Go Back"})]})]})});const _=s==null?void 0:s.see_doctor_urgency,A=y[_]||y["Monitor symptoms"];return d.jsx("div",{className:"min-h-full pb-24 pt-8 animate-fade-in",children:d.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-extrabold text-text-primary",children:"AI Analysis Results"}),d.jsxs("p",{className:"text-text-secondary text-sm mt-0.5",children:["Based on: ",n.slice(0,3).join(", "),n.length>3?` +${n.length-3} more`:""]})]}),f&&d.jsx("span",{className:"text-xs bg-emerald-50 border border-emerald-200 text-emerald-700 px-3 py-1 rounded-full font-semibold",children:" Saved"})]}),_&&d.jsxs("div",{className:`border rounded-2xl p-5 mb-8 flex items-start gap-4 ${A.bg}`,children:[d.jsx("span",{className:"text-2xl mt-0.5",children:A.icon}),d.jsxs("div",{children:[d.jsx("h3",{className:`font-bold text-lg mb-1 ${A.text}`,children:A.title}),d.jsx("p",{className:`text-sm opacity-80 ${A.text}`,children:A.sub})]})]}),d.jsxs("div",{className:"mb-8",children:[d.jsx("h3",{className:"text-xl font-bold text-text-primary mb-4",children:"Possible Conditions"}),d.jsx("div",{className:"grid gap-4",children:(k=s==null?void 0:s.possible_conditions)==null?void 0:k.map((T,R)=>d.jsx(CO,{condition:T},R))})]}),((I=s==null?void 0:s.self_care_tips)==null?void 0:I.length)>0&&d.jsxs("div",{className:"glass-card p-6 mb-6",children:[d.jsxs("h3",{className:"text-lg font-bold text-text-primary mb-4 flex items-center gap-2",children:[d.jsx("span",{children:""})," Self-Care Tips"]}),d.jsx("ul",{className:"space-y-3",children:s.self_care_tips.map((T,R)=>d.jsxs("li",{className:"flex items-start gap-3",children:[d.jsx("span",{className:"w-5 h-5 rounded-full bg-primary/10 text-primary flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:""}),d.jsx("span",{className:"text-text-primary text-sm leading-relaxed",children:T})]},R))})]}),((v=s==null?void 0:s.local_foods)==null?void 0:v.length)>0&&d.jsxs("div",{className:"glass-card p-6 mb-6",children:[d.jsxs("h3",{className:"text-lg font-bold text-text-primary mb-4 flex items-center gap-2",children:[d.jsx("span",{children:""})," Helpful Local Foods"]}),d.jsx("div",{className:"flex flex-wrap gap-2",children:s.local_foods.map((T,R)=>d.jsx("span",{className:"bg-emerald-50 border border-emerald-200 text-emerald-700 px-4 py-2 rounded-full text-sm font-semibold",children:T},R))})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-8",children:[d.jsx("button",{onClick:()=>e("/journal"),className:"flex-1 bg-primary text-white py-4 rounded-full font-bold shadow-lg shadow-primary/25 hover:bg-primary/80 hover:translate-y-[-2px] transition-all",children:" Save to Journal"}),d.jsx("button",{onClick:()=>e("/symptoms"),className:"flex-1 bg-transparent border-2 border-primary text-primary py-4 rounded-full font-bold hover:bg-primary/5 transition-all",children:" Analyze Again"})]}),d.jsx(ic,{})]})})}function PO({activeTopic:t,setActiveTopic:e}){const n=[{id:"all",label:"All"},{id:"PCOS",label:"PCOS"},{id:"Anemia",label:"Anemia"},{id:"Menstrual Health",label:"Menstrual Health"},{id:"Home Remedies",label:"Home Remedies"},{id:"General Wellness",label:"General Wellness"}];return d.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide py-1",children:n.map(r=>d.jsx("button",{onClick:()=>e(r.id),className:`px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap transition-all duration-300 ${t===r.id?"bg-primary text-white shadow-md shadow-primary/20":"bg-[#F8F7FF] text-text-secondary border border-primary/10 hover:border-primary/30 hover:bg-white"}`,children:r.label},r.id))})}const ll=43200,Qv=1440,Yv=Symbol.for("constructDateFrom");function Qp(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Yv in t?t[Yv](e):t instanceof Date?new t.constructor(e):new Date(e)}function Sr(t,e){return Qp(t,t)}let kO={};function NO(){return kO}function Jv(t){const e=Sr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Yp(t,...e){const n=Qp.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function kl(t,e){const n=+Sr(t)-+Sr(e);return n<0?-1:n>0?1:n}function RO(t){return Qp(t,Date.now())}function OO(t,e,n){const[r,s]=Yp(n==null?void 0:n.in,t,e),i=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return i*12+o}function DO(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function jO(t,e){return+Sr(t)-+Sr(e)}function LO(t,e){const n=Sr(t);return n.setHours(23,59,59,999),n}function VO(t,e){const n=Sr(t),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function MO(t,e){const n=Sr(t);return+LO(n)==+VO(n)}function FO(t,e,n){const[r,s,i]=Yp(n==null?void 0:n.in,t,t,e),o=kl(s,i),a=Math.abs(OO(s,i));if(a<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-o*a);let u=kl(s,i)===-o;MO(r)&&a===1&&kl(r,i)===1&&(u=!1);const c=o*(a-+u);return c===0?0:c}function UO(t,e,n){const r=jO(t,e)/1e3;return DO(n==null?void 0:n.roundingMethod)(r)}const $O={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},BO=(t,e,n)=>{let r;const s=$O[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function yd(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const zO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},WO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},HO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qO={date:yd({formats:zO,defaultWidth:"full"}),time:yd({formats:WO,defaultWidth:"full"}),dateTime:yd({formats:HO,defaultWidth:"full"})},KO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},GO=(t,e,n,r)=>KO[t];function Ki(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const QO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},YO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},JO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},XO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ZO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},eD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},tD=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},nD={ordinalNumber:tD,era:Ki({values:QO,defaultWidth:"wide"}),quarter:Ki({values:YO,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ki({values:JO,defaultWidth:"wide"}),day:Ki({values:XO,defaultWidth:"wide"}),dayPeriod:Ki({values:ZO,defaultWidth:"wide",formattingValues:eD,defaultFormattingWidth:"wide"})};function Gi(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(a)?sD(a,p=>p.test(o)):rD(a,p=>p.test(o));let c;c=t.valueCallback?t.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;const f=e.slice(o.length);return{value:c,rest:f}}}function rD(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function sD(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function iD(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const oD=/^(\d+)(th|st|nd|rd)?/i,aD=/\d+/i,lD={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uD={any:[/^b/i,/^(a|c)/i]},cD={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dD={any:[/1/i,/2/i,/3/i,/4/i]},hD={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fD={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pD={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mD={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gD={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},yD={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},vD={ordinalNumber:iD({matchPattern:oD,parsePattern:aD,valueCallback:t=>parseInt(t,10)}),era:Gi({matchPatterns:lD,defaultMatchWidth:"wide",parsePatterns:uD,defaultParseWidth:"any"}),quarter:Gi({matchPatterns:cD,defaultMatchWidth:"wide",parsePatterns:dD,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gi({matchPatterns:hD,defaultMatchWidth:"wide",parsePatterns:fD,defaultParseWidth:"any"}),day:Gi({matchPatterns:pD,defaultMatchWidth:"wide",parsePatterns:mD,defaultParseWidth:"any"}),dayPeriod:Gi({matchPatterns:gD,defaultMatchWidth:"any",parsePatterns:yD,defaultParseWidth:"any"})},_D={code:"en-US",formatDistance:BO,formatLong:qO,formatRelative:GO,localize:nD,match:vD,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wD(t,e,n){const r=NO(),s=(n==null?void 0:n.locale)??r.locale??_D,i=2520,o=kl(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[u,c]=Yp(n==null?void 0:n.in,...o>0?[e,t]:[t,e]),f=UO(c,u),p=(Jv(c)-Jv(u))/1e3,g=Math.round((f-p)/60);let y;if(g<2)return n!=null&&n.includeSeconds?f<5?s.formatDistance("lessThanXSeconds",5,a):f<10?s.formatDistance("lessThanXSeconds",10,a):f<20?s.formatDistance("lessThanXSeconds",20,a):f<40?s.formatDistance("halfAMinute",0,a):f<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):g===0?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",g,a);if(g<45)return s.formatDistance("xMinutes",g,a);if(g<90)return s.formatDistance("aboutXHours",1,a);if(g<Qv){const _=Math.round(g/60);return s.formatDistance("aboutXHours",_,a)}else{if(g<i)return s.formatDistance("xDays",1,a);if(g<ll){const _=Math.round(g/Qv);return s.formatDistance("xDays",_,a)}else if(g<ll*2)return y=Math.round(g/ll),s.formatDistance("aboutXMonths",y,a)}if(y=FO(c,u),y<12){const _=Math.round(g/ll);return s.formatDistance("xMonths",_,a)}else{const _=y%12,A=Math.trunc(y/12);return _<3?s.formatDistance("aboutXYears",A,a):_<9?s.formatDistance("overXYears",A,a):s.formatDistance("almostXYears",A+1,a)}}function rS(t,e){return wD(t,RO(t),e)}function sS({safetyScore:t,approved:e}){return!e||!t?null:t<75&&t>40?d.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded bg-yellow-100/50 border border-yellow-200 text-yellow-700 text-[10px] font-medium",title:"This content was reviewed by our community safety tools",children:[d.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-yellow-500"}),"Community Reviewed"]}):t>=90?d.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded bg-green-100/50 border border-green-200 text-green-700 text-[10px] font-medium",title:"High safety score",children:[d.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),"Trusted Post"]}):null}function iS({post:t,onReact:e,onComment:n,onShare:r,currentUserId:s}){const{upvotes:i=0,upvotedBy:o=[],commentCount:a=0}=t,u=o.includes(s);return d.jsxs("div",{className:"flex items-center justify-between pt-4 mt-2 border-t border-primary/5",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("button",{onClick:()=>e(t.id,!u),className:`flex items-center gap-1.5 text-xs font-medium transition-all duration-200 group ${u?"text-primary":"text-text-secondary hover:text-primary"}`,children:[d.jsx("span",{className:`text-base transition-transform duration-300 ${u?"scale-110":"group-hover:scale-110"}`,children:u?"":""}),d.jsx("span",{children:i}),d.jsx("span",{className:"hidden sm:inline ml-1 font-normal opacity-70",children:u?"Supported":"Support"})]}),d.jsxs("button",{onClick:()=>n(t.id),className:"flex items-center gap-1.5 text-xs font-medium text-text-secondary hover:text-primary transition-colors group",children:[d.jsx("span",{className:"text-base group-hover:scale-110 transition-transform duration-200",children:""}),d.jsx("span",{children:a}),d.jsx("span",{className:"hidden sm:inline ml-1 font-normal opacity-70",children:"Comments"})]})]}),d.jsx("button",{onClick:()=>r(t.id),className:"text-text-secondary hover:text-primary transition-colors p-1",title:"Share Post",children:d.jsx("span",{className:"text-base",children:""})})]})}function xD({post:t,onReact:e,currentUserId:n}){var a;const r=zt(),s=u=>{switch(u){case"PCOS":return"border-l-[#9B8EC4]";case"Anemia":return"border-l-[#C4956A]";case"Menstrual Health":return"border-l-[#B8D4BE]";case"Home Remedies":return"border-l-[#A8C5A0]";case"General Wellness":return"border-l-[#C5BFE0]";default:return"border-l-[#6D5BD0]"}},i=()=>{r(`/forum/${t.id}`,{state:{post:t}})},o=u=>{if(!u)return"Just now";const c=u.toDate?u.toDate():new Date(u);return rS(c,{addSuffix:!0}).replace("about ","")};return d.jsxs("div",{className:`glass-card border-l-[3px] ${s(t.topic)} ${t.isPinned?"ring-1 ring-primary/20":""} p-5 mb-4`,children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"bg-primary/5 text-text-secondary text-xs font-medium px-2 py-1 rounded-md",children:t.anonName||"Anon"}),t.language&&d.jsx("span",{className:"text-[10px] text-text-secondary/70 font-medium px-1.5 py-0.5 bg-gray-100 rounded border border-gray-200 uppercase tracking-tight",children:t.language==="en"?" EN":` ${t.language.toUpperCase()}`}),d.jsx("span",{className:"text-xs text-text-secondary font-medium px-2 py-1 bg-white/60 rounded-md border border-primary/10",children:t.topic}),t.type==="question"&&d.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-0.5 rounded-full",children:"Question"}),t.isExpertAnswered&&d.jsx("span",{className:"text-xs bg-white/70 text-text-secondary px-2 py-0.5 rounded-full border border-primary/10",children:"Expert Replied"})]}),d.jsx("span",{className:"text-xs text-text-secondary/60 whitespace-nowrap ml-2",children:o(t.createdAt)})]}),d.jsxs("div",{onClick:i,className:"cursor-pointer group",children:[d.jsx("h3",{className:"text-text-primary text-base font-bold mb-2 leading-snug group-hover:text-primary transition-colors line-clamp-2",children:t.title||"Shared reflection"}),t.content&&d.jsx("p",{className:"text-text-secondary text-sm leading-relaxed line-clamp-3 mb-3",children:t.content}),t.imageUrl&&d.jsx("div",{className:"mb-3 overflow-hidden rounded-2xl border border-white/70",children:d.jsx("img",{src:t.imageUrl,alt:"Post",className:"w-full h-36 object-cover"})}),d.jsx("div",{className:"mb-2",children:d.jsx(sS,{safetyScore:(a=t.moderation)==null?void 0:a.safetyScore,approved:t.approved})})]}),d.jsx(iS,{post:t,currentUserId:n,onReact:e,onComment:i,onShare:()=>{navigator.clipboard.writeText(window.location.origin+`/forum/${t.id}`),alert("Link copied!")}})]})}function ED(){const t=zt(),{i18n:e,t:n}=cs(),[r,s]=O.useState("all"),[i,o]=O.useState([]),[a,u]=O.useState(!0);O.useEffect(()=>{c()},[r,e.language]);const c=async()=>{u(!0);try{const _=await eO(r,"recent",e.language);o(_)}catch(_){console.error("Failed to load forum posts",_)}finally{u(!1)}},f=hi()||"anon",p=["You are not alone here.","Your voice is welcome.","Softness is a strength.","Share only what feels safe."],g=p[Math.floor(Math.random()*p.length)],y={en:"No posts yet in English. Be the first to share!",ta:"   .  !",hi:"        !",ml:"  .  !",te:"   .   !",kn:"  .  !"};return d.jsx("div",{className:"min-h-screen bg-[#F8F7FF] pb-24 font-sans animate-fade-in relative",children:d.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[d.jsxs("div",{className:"flex justify-between items-start mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-primary tracking-tight",children:"Community Circle"}),d.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"A private, gentle space to share and listen"})]}),d.jsx("div",{className:"flex gap-2",children:d.jsx("button",{onClick:()=>t("/forum/new"),className:"bg-primary text-white rounded-full px-4 py-2.5 shadow-lg hover:bg-[#5A4AB8] transition-all hover:scale-105 active:scale-95 text-sm font-semibold",children:"New Reflection"})})]}),d.jsx("div",{className:"glass-card p-4 mb-6",children:d.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-text-secondary uppercase tracking-wide",children:"Circle tone"}),d.jsx("p",{className:"text-sm text-text-primary font-semibold",children:"Soft, supportive, anonymous"})]}),d.jsx("div",{className:"text-xs text-text-secondary/80",children:g})]})}),d.jsx("div",{className:"sticky top-[64px] z-30 bg-[#F8F7FF]/95 backdrop-blur-sm pt-2 pb-4 -mx-4 px-4 mb-2",children:d.jsx(PO,{activeTopic:r,setActiveTopic:s})}),d.jsx("div",{className:"space-y-4",children:a?d.jsx("div",{className:"flex flex-col gap-4 mt-8",children:[1,2,3].map(_=>d.jsx("div",{className:"h-40 bg-white/50 rounded-2xl animate-pulse"},_))}):i.length>0?i.map(_=>d.jsx(xD,{post:_,currentUserId:f,onReact:async(A,k)=>{o(I=>I.map(v=>{if(v.id!==A)return v;const T=k?[...v.upvotedBy||[],f]:(v.upvotedBy||[]).filter(R=>R!==f);return{...v,upvotes:(v.upvotes||0)+(k?1:-1),upvotedBy:T}})),await eS(A,f)}},_.id)):d.jsxs("div",{className:"text-center py-20 opacity-70",children:[d.jsx("div",{className:"text-4xl mb-4",children:""}),d.jsx("h3",{className:"font-semibold text-text-primary mb-2",children:y[e.language]||y.en}),d.jsxs("p",{className:"text-sm text-text-secondary",children:["Be the first to share in ",r==="all"?"the circle":r]}),d.jsx("button",{onClick:()=>t("/forum/new"),className:"mt-6 text-primary border border-primary/30 px-6 py-2 rounded-full text-sm font-medium hover:bg-primary/5 transition-colors",children:"Share gently"})]})})]})})}function SD({comment:t,onReact:e,currentUserId:n}){const r=(t.upvotedBy||[]).includes(n),s=t.createdAt?rS(t.createdAt.toDate?t.createdAt.toDate():new Date(t.createdAt),{addSuffix:!0}).replace("about ",""):"Just now";return d.jsxs("div",{className:"glass-card p-4",children:[d.jsxs("div",{className:"flex items-start justify-between mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"bg-primary/5 text-text-secondary text-xs font-medium px-2 py-1 rounded-md",children:t.anonName||"Anon"}),t.isExpertComment&&d.jsx("span",{className:"text-xs bg-white/70 text-text-secondary px-2 py-0.5 rounded-full border border-primary/10",children:"Expert"})]}),d.jsx("span",{className:"text-xs text-text-secondary/60 whitespace-nowrap",children:s})]}),d.jsx("p",{className:"text-sm text-text-secondary leading-relaxed whitespace-pre-line",children:t.content}),d.jsx("div",{className:"flex items-center justify-between mt-3",children:d.jsxs("button",{onClick:()=>e(t.id,!r),className:`flex items-center gap-1.5 text-xs font-medium transition-all duration-200 ${r?"text-primary":"text-text-secondary hover:text-primary"}`,children:[d.jsx("span",{className:`text-base transition-transform duration-300 ${r?"scale-110":""}`,children:r?"":""}),d.jsx("span",{children:t.upvotes||0}),d.jsx("span",{className:"hidden sm:inline ml-1 font-normal opacity-70",children:r?"Supported":"Support"})]})})]})}const oS=t=>{const e=t.indexOf("{"),n=t.lastIndexOf("}");if(e===-1||n===-1)return null;const r=t.slice(e,n+1);try{return JSON.parse(r)}catch{return null}},TD=async t=>{var s,i,o,a,u;const n="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyBv-TaDO2XgJYEP3lGszdwubSrwu-anoVQ",r=`
Review this post from a women's health support community:
"${t}"

Respond ONLY in this JSON format:
{
  "approved": true or false,
  "safetyScore": number between 0-100,
  "flags": ["flag1", "flag2"],
  "reason": "one sentence",
  "suggestedEdit": null or "cleaner version of the post"
}

APPROVE if: sharing personal experience, asking health questions, offering emotional support, discussing symptoms, cultural remedies.
REJECT if: dangerous medical advice, self-harm content, body shaming, misinformation about medications, spam.
Be culturally sensitive to Indian women's health discussions.
Menstrual health, PCOS, anemia discussions are always appropriate.
`;try{const p=(u=(a=(o=(i=(s=(await(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:r}]}]})})).json()).candidates)==null?void 0:s[0])==null?void 0:i.content)==null?void 0:o.parts)==null?void 0:a[0])==null?void 0:u.text;if(!p)throw new Error("Empty response from Gemini");const g=oS(p);return g||{approved:!1,safetyScore:0,flags:["error"],reason:"AI parsing failed"}}catch(c){return console.error("Gemini Safety Check Failed:",c),{approved:!0,safetyScore:50,flags:["ai_error"],reason:"AI Check Failed",suggestedEdit:null}}},ID=async t=>{var s,i,o,a,u;const n="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyBv-TaDO2XgJYEP3lGszdwubSrwu-anoVQ",r=`
Fact-check the following home remedy mentioned in a women's health forum. Respond ONLY in this JSON format:
{
  "verdict": "supported" | "not_supported" | "uncertain",
  "evidence": "short summary of scientific evidence or lack thereof",
  "advice": "one gentle, culturally sensitive sentence for the user"
}
Remedy: "${t}"
If there is no strong evidence, say so. If it is generally safe but unproven, say so. If it is risky, warn gently. Do not give medical advice.
`;try{const p=(u=(a=(o=(i=(s=(await(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:r}]}]})})).json()).candidates)==null?void 0:s[0])==null?void 0:i.content)==null?void 0:o.parts)==null?void 0:a[0])==null?void 0:u.text;return p?oS(p):null}catch(c){return console.error("Fact-Check Failed:",c),null}},aS=async(t,e="text",n="")=>{if(!t||t.length<5)return{approved:!1,sentiment:"neutral",safetyScore:0,flags:["too_short"],reason:"Too short",geminiCheck:!1,moderatedAt:new Date};const r=await _O(t),s=.6,i=[];let o=0;for(const[c,f]of Object.entries(r))f>o&&(o=f),f>s&&i.push(c);if(i.length>0)return{approved:!1,sentiment:"negative",safetyScore:Math.round((1-o)*100),flags:i,reason:`Content flagged as ${i.join(", ")}`,geminiCheck:!1,moderatedAt:new Date};let a=null;n==="Home Remedies"&&e!=="comment"&&(a=await ID(t));const u=await TD(t);return{approved:u.approved,sentiment:"neutral",safetyScore:u.safetyScore,flags:u.flags||[],reason:u.reason,suggestedEdit:u.suggestedEdit,geminiCheck:!0,moderatedAt:new Date,factCheck:a}};function bD(){var I,v;const t=zt(),{postId:e}=zb(),n=us(),[r,s]=O.useState(((I=n.state)==null?void 0:I.post)||null),[i,o]=O.useState([]),[a,u]=O.useState(!0),[c,f]=O.useState(""),[p,g]=O.useState(!1),y=O.useMemo(()=>hi(),[]);O.useEffect(()=>{(async()=>{u(!0);try{const[R,L]=await Promise.all([r?Promise.resolve(r):nO(e),Gv(e)]);s(R),o(L)}catch(R){console.error("Failed to load thread",R)}finally{u(!1)}})()},[e]);const _=async()=>{if(c.trim()){g(!0);try{const T=await aS(c);if(!T.approved){alert(T.reason||"This comment may not be appropriate for the community.");return}const R=hi(),L=tS();await rO(e,{userId:R,anonName:L,content:c.trim(),approved:T.approved,moderation:{sentiment:T.sentiment,safetyScore:T.safetyScore,flags:T.flags},upvotes:0,upvotedBy:[],isExpertComment:!1});const M=await Gv(e);o(M),f("")}catch(T){console.error("Failed to add comment",T),alert("Failed to add comment. Please try again.")}finally{g(!1)}}},A=async T=>{s(R=>{if(!R)return R;const L=T?[...R.upvotedBy||[],y]:(R.upvotedBy||[]).filter(M=>M!==y);return{...R,upvotes:(R.upvotes||0)+(T?1:-1),upvotedBy:L}}),await eS(e,y)},k=async(T,R)=>{o(L=>L.map(M=>{if(M.id!==T)return M;const S=R?[...M.upvotedBy||[],y]:(M.upvotedBy||[]).filter(w=>w!==y);return{...M,upvotes:(M.upvotes||0)+(R?1:-1),upvotedBy:S}})),await sO(e,T,y)};return a?d.jsx("div",{className:"min-h-screen bg-[#F8F7FF] pb-24 font-sans animate-fade-in",children:d.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6 space-y-4",children:[d.jsx("div",{className:"h-40 bg-white/50 rounded-2xl animate-pulse"}),d.jsx("div",{className:"h-24 bg-white/50 rounded-2xl animate-pulse"})]})}):r?d.jsxs("div",{className:"min-h-screen bg-[#F8F7FF] pb-24 font-sans animate-fade-in",children:[d.jsxs("div",{className:"sticky top-0 bg-[#F8F7FF]/90 backdrop-blur-md border-b border-white/50 z-10 px-4 py-4 flex items-center gap-2",children:[d.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 text-text-secondary hover:text-text-primary",children:" Back"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-text-secondary",children:"Reflection"}),d.jsx("h1",{className:"text-sm font-semibold text-text-primary",children:r.topic})]})]}),d.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6 space-y-6",children:[d.jsxs("div",{className:"glass-card p-5",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"bg-primary/5 text-text-secondary text-xs font-medium px-2 py-1 rounded-md",children:r.anonName||"Anon"}),r.isExpertAnswered&&d.jsx("span",{className:"text-xs bg-white/70 text-text-secondary px-2 py-0.5 rounded-full border border-primary/10",children:"Expert Replied"})]}),d.jsx(sS,{safetyScore:(v=r.moderation)==null?void 0:v.safetyScore,approved:r.approved})]}),d.jsx("h2",{className:"text-lg font-semibold text-text-primary mb-3",children:r.title}),d.jsx("p",{className:"text-sm text-text-secondary leading-relaxed whitespace-pre-line",children:r.content}),r.imageUrl&&d.jsx("div",{className:"mt-4 overflow-hidden rounded-2xl border border-white/70",children:d.jsx("img",{src:r.imageUrl,alt:"Post",className:"w-full max-h-72 object-cover"})}),d.jsx(iS,{post:r,currentUserId:y,onReact:(T,R)=>A(R),onComment:()=>{},onShare:()=>{navigator.clipboard.writeText(window.location.origin+`/forum/${r.id}`),alert("Link copied!")}})]}),d.jsxs("div",{className:"glass-card p-5 space-y-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-text-primary",children:"Leave a gentle note"}),d.jsx("textarea",{value:c,onChange:T=>f(T.target.value),placeholder:"Offer support, ask a kind question, or share a small tip",className:"w-full h-28 text-sm text-text-secondary placeholder:text-text-secondary/50 border border-white/70 rounded-2xl px-4 py-3 bg-white/70 focus:outline-none focus:ring-4 focus:ring-primary/10 resize-none"}),d.jsx("div",{className:"flex justify-end",children:d.jsx("button",{onClick:_,disabled:!c.trim()||p,className:"bg-primary text-white text-sm font-semibold px-5 py-2 rounded-full disabled:opacity-50 hover:bg-[#5A4AB8] transition-all",children:p?"Sending...":"Post comment"})})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-sm font-semibold text-text-primary",children:"Supportive replies"}),d.jsxs("span",{className:"text-xs text-text-secondary",children:[i.length," notes"]})]}),i.length===0?d.jsx("div",{className:"glass-card p-6 text-center text-sm text-text-secondary",children:"Be the first to leave a warm note."}):i.map(T=>d.jsx(SD,{comment:T,currentUserId:y,onReact:(R,L)=>k(R,L)},T.id))]})]})]}):d.jsx("div",{className:"min-h-screen bg-[#F8F7FF] pb-24 font-sans animate-fade-in",children:d.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-20 text-center",children:[d.jsx("p",{className:"text-text-secondary",children:"This reflection is not available."}),d.jsx("button",{onClick:()=>t("/forum"),className:"mt-6 text-primary border border-primary/30 px-6 py-2 rounded-full text-sm font-medium hover:bg-primary/5 transition-colors",children:"Back to circle"})]})})}function CD(){const t=zt(),[e,n]=O.useState(!1),[r,s]=O.useState(!1),[i,o]=O.useState(""),[a,u]=O.useState(""),[c,f]=O.useState(""),[p,g]=O.useState("text"),[y,_]=O.useState(""),A=async()=>{if(!a||a.length<10){alert("Please write a bit more first.");return}s(!0);try{const v=`${i} ${a}`,T=await xO(v),R=v.toLowerCase();let L="";R.includes("pcos")||R.includes("ovary")?L="PCOS":R.includes("anemia")||R.includes("iron")?L="Anemia":R.includes("period")||R.includes("bleed")?L="Menstrual Health":(R.includes("remedy")||R.includes("ginger"))&&(L="Home Remedies"),L?f(L):T.some(M=>M.includes("Women")||M.includes("Reproductive"))?f("Menstrual Health"):alert("Couldn't detect a specific topic. Please choose one.")}catch(v){console.error(v)}finally{s(!1)}},k=[{id:"PCOS",label:"PCOS"},{id:"Anemia",label:"Anemia"},{id:"Menstrual Health",label:"Menstrual Health"},{id:"Home Remedies",label:"Home Remedies"},{id:"General Wellness",label:"General Wellness"}],I=async()=>{if(!(!i.trim()||!a.trim()||!c)){if(p==="image"&&!y.trim()){alert("Please add an image URL.");return}n(!0);try{const v=await aS(`${i}
${a}`);if(!v.approved){alert(v.reason||"This post may not be appropriate for the community.");return}const T=hi(),R=tS(),L={title:i,content:a,topic:c,type:p,imageUrl:p==="image"?y.trim():null,approved:v.approved,moderation:v,userId:T,anonName:R,upvotes:0,upvotedBy:[],commentCount:0};await tO(L),alert("Post published."),t("/forum")}catch(v){console.error("Error creating post:",v),alert("Failed to create post. Please try again.")}finally{n(!1)}}};return d.jsxs("div",{className:"min-h-screen bg-[#F8F7FF] font-sans animate-fade-in pb-20",children:[d.jsxs("div",{className:"sticky top-0 bg-[#F8F7FF]/90 backdrop-blur-md border-b border-white/50 z-10 px-4 py-4 flex justify-between items-center",children:[d.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 text-text-secondary hover:text-text-primary",children:" Back"}),d.jsx("h1",{className:"font-semibold text-text-primary",children:"New Reflection"}),d.jsx("button",{onClick:I,disabled:!i||!a||!c||e,className:"bg-primary text-white text-sm font-semibold px-5 py-2 rounded-full disabled:opacity-40 hover:bg-[#5A4AB8] transition-all",children:e?"Posting...":"Share"})]}),d.jsxs("div",{className:"max-w-xl mx-auto px-4 py-6 space-y-6",children:[d.jsx("div",{className:"glass-card p-4",children:d.jsx("p",{className:"text-sm text-text-secondary leading-relaxed",children:"This is a private, anonymous space. Share only what feels safe and nourishing."})}),d.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{id:"text",icon:"",label:"Share"},{id:"question",icon:"",label:"Ask"},{id:"image",icon:"",label:"Image"}].map(v=>d.jsxs("button",{onClick:()=>g(v.id),className:`flex flex-col items-center justify-center p-3 rounded-2xl border transition-all ${p===v.id?"border-primary bg-primary/5 text-primary":"border-white/60 bg-white/60 text-text-secondary hover:bg-white"}`,children:[d.jsx("span",{className:"text-xl mb-1",children:v.icon}),d.jsx("span",{className:"text-xs font-medium",children:v.label})]},v.id))}),d.jsxs("div",{className:"glass-card p-4 space-y-4",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-3",children:[d.jsx("label",{className:"block text-xs font-bold text-text-secondary uppercase tracking-wide",children:"Choose a topic"}),d.jsx("button",{onClick:A,disabled:r||!a,className:"text-xs text-primary font-bold hover:underline disabled:opacity-50",children:r?" Analyzing...":" Auto-suggest"})]}),d.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(v=>d.jsx("button",{onClick:()=>f(v.id),className:`px-4 py-2 rounded-full text-sm transition-all border ${c===v.id?"bg-primary text-white border-primary shadow-md shadow-primary/20":"bg-white/70 text-text-secondary border-white/60 hover:border-primary/30"}`,children:v.label},v.id))})]}),d.jsxs("div",{children:[d.jsx("input",{type:"text",placeholder:"A gentle title to hold your thought",value:i,onChange:v=>o(v.target.value),maxLength:80,className:"w-full text-lg font-semibold text-text-primary placeholder:text-text-secondary/50 border-none focus:ring-0 p-0 bg-transparent"}),d.jsxs("div",{className:"text-right text-xs text-text-secondary/60 mt-1",children:[i.length,"/80"]})]}),d.jsx("textarea",{value:a,onChange:v=>u(v.target.value),placeholder:p==="question"?"What would you like to ask the circle?":p==="image"?"Add a gentle caption for your image":"Share your experience, feelings, or a small win",className:"w-full h-44 text-base text-text-secondary placeholder:text-text-secondary/50 border-none focus:ring-0 p-0 bg-transparent resize-none leading-relaxed"}),p==="image"&&d.jsx("input",{type:"url",placeholder:"Paste a secure image URL",value:y,onChange:v=>_(v.target.value),className:"w-full text-sm text-text-secondary placeholder:text-text-secondary/50 border border-white/70 rounded-2xl px-4 py-3 bg-white/70 focus:outline-none focus:ring-4 focus:ring-primary/10"})]})]})]})}function AD(){const{t}=cs(),[e,n]=O.useState(""),[r,s]=O.useState(null),[i,o]=O.useState(!1),a=[t("remedy.example1"),t("remedy.example2"),t("remedy.example3")],u=p=>p==="Safe"?"bg-[#B8D4BE]/20 text-[#4A7C59] border-[#B8D4BE]/50":p==="Partially Safe"?"bg-warning/10 text-warning border-warning/30":p==="Myth"?"bg-danger/10 text-danger border-danger/30":p==="Consult Doctor"?"bg-primary/10 text-primary border-primary/30":"bg-gray-100 text-gray-800",c=async()=>{if(!e.trim()){alert("Please enter a remedy");return}try{o(!0);const p=await gO(e);s(p)}catch(p){console.error("Error validating remedy:",p),alert("Error checking remedy. Please try again.")}finally{o(!1)}},f=p=>{n(p)};return d.jsx("div",{className:"min-h-full pb-20 pt-8 animate-fade-in",children:d.jsxs("div",{className:"max-w-3xl mx-auto px-6",children:[d.jsxs("div",{className:"text-center mb-10",children:[d.jsx("h2",{className:"text-3xl font-extrabold text-text-primary mb-3 text-center",children:t("remedy.title")}),d.jsx("p",{className:"text-text-secondary text-lg",children:t("remedy.subtitle")})]}),d.jsx(ic,{}),d.jsxs("div",{className:"glass-card p-8 mb-8 mt-8",children:[d.jsx("label",{className:"block text-sm font-bold text-text-primary mb-4 uppercase tracking-wide",children:t("remedy.enter_remedy")}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",value:e,onChange:p=>n(p.target.value),placeholder:t("remedy.placeholder"),className:"w-full px-5 py-4 bg-white/50 border border-primary/20 rounded-xl focus:outline-none focus:border-primary focus:bg-white/90 transition-all font-medium text-lg placeholder:text-text-secondary/50"}),d.jsx("button",{onClick:c,disabled:i,className:"absolute right-2 top-2 bottom-2 bg-primary text-white px-6 rounded-lg font-bold hover:bg-[#5A4AB8] transition-all disabled:opacity-70 disabled:cursor-not-allowed shadow-md",children:t(i?"remedy.checking":"remedy.check")})]})]}),d.jsxs("div",{className:"mb-10 text-center",children:[d.jsx("p",{className:"text-sm font-semibold text-text-secondary mb-4 uppercase tracking-wide",children:t("remedy.popular")}),d.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:a.map(p=>d.jsx("button",{onClick:()=>f(p),className:"px-4 py-2 bg-white/60 border border-primary/10 text-text-primary rounded-full text-sm font-medium hover:bg-white hover:border-primary/30 hover:scale-105 transition-all shadow-sm",children:p},p))})]}),r&&d.jsxs("div",{className:"glass-card p-8 animate-fade-in border-l-4 border-l-primary",children:[d.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[d.jsx("h3",{className:"text-2xl font-bold text-text-primary",children:t("remedy.verdict")}),d.jsx("span",{className:`px-4 py-1.5 rounded-full text-sm font-bold uppercase tracking-wide border ${u(r.verdict)}`,children:r.verdict})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsxs("h4",{className:"font-bold text-text-primary mb-2 flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:""})," ",t("remedy.explanation")]}),d.jsx("p",{className:"text-text-secondary leading-relaxed bg-white/40 p-4 rounded-xl",children:r.explanation})]}),d.jsxs("div",{children:[d.jsxs("h4",{className:"font-bold text-text-primary mb-2 flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:""})," ",t("remedy.scientific")]}),d.jsx("p",{className:"text-text-secondary leading-relaxed bg-white/40 p-4 rounded-xl",children:r.scientific_backing})]}),d.jsxs("div",{className:"bg-primary/5 border border-primary/10 p-5 rounded-xl flex gap-4 items-start",children:[d.jsx("span",{className:"text-2xl",children:""}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-primary mb-1",children:t("remedy.tip")}),d.jsx("p",{className:"text-text-secondary text-sm",children:r.tip})]})]})]})]}),i&&d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"w-12 h-12 border-4 border-primary/30 border-t-primary rounded-full animate-spin mx-auto mb-4"}),d.jsx("p",{className:"text-text-secondary animate-pulse",children:t("remedy.consulting")})]})]})})}const Jp=[{emoji:"",label:"Happy",value:"happy"},{emoji:"",label:"Okay",value:"okay"},{emoji:"",label:"Sad",value:"sad"},{emoji:"",label:"Irritable",value:"irritable"},{emoji:"",label:"Anxious",value:"anxious"},{emoji:"",label:"Tired",value:"tired"}],Xp=["January","February","March","April","May","June","July","August","September","October","November","December"];function Wh(t,e,n){return`${t}-${String(e+1).padStart(2,"0")}-${String(n).padStart(2,"0")}`}function Zp(t){const[e,n,r]=t.split("-").map(Number);return{year:e,month:n-1,day:r}}function PD({year:t,month:e,entries:n,selectedDate:r,onSelectDate:s,onMonthChange:i}){const o=new Date(t,e,1).getDay(),a=new Date(t,e+1,0).getDate(),u=new Date,c={};n.forEach(y=>{const{day:_}=Zp(y.date);c[_]=y});const f=[];for(let y=0;y<o;y++)f.push(null);for(let y=1;y<=a;y++)f.push(y);const p=y=>y===u.getDate()&&e===u.getMonth()&&t===u.getFullYear(),g=y=>r===Wh(t,e,y);return d.jsxs("div",{className:"glass-card p-5 mb-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-5",children:[d.jsx("button",{onClick:()=>i(-1),className:"w-9 h-9 flex items-center justify-center rounded-full hover:bg-primary/10 text-primary font-bold transition-all",children:""}),d.jsxs("h3",{className:"text-base font-bold text-text-primary",children:[Xp[e]," ",t]}),d.jsx("button",{onClick:()=>i(1),className:"w-9 h-9 flex items-center justify-center rounded-full hover:bg-primary/10 text-primary font-bold transition-all",children:""})]}),d.jsx("div",{className:"grid grid-cols-7 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(y=>d.jsx("div",{className:"text-center text-[10px] font-bold text-text-secondary uppercase tracking-wide py-1",children:y},y))}),d.jsx("div",{className:"grid grid-cols-7 gap-y-1",children:f.map((y,_)=>{var T;if(!y)return d.jsx("div",{},`empty-${_}`);const A=c[y],k=A==null?void 0:A.period,I=A==null?void 0:A.mood,v=(T=Jp.find(R=>R.value===I))==null?void 0:T.emoji;return d.jsxs("button",{onClick:()=>s(Wh(t,e,y)),className:`relative flex flex-col items-center justify-center w-full aspect-square rounded-xl text-sm font-medium transition-all duration-150
                ${g(y)?"bg-primary text-white shadow-md scale-105":p(y)?"bg-primary/15 text-primary font-bold ring-1 ring-primary/40":A?"bg-primary/5 text-text-primary hover:bg-primary/10":"text-text-secondary hover:bg-gray-50"}`,children:[d.jsx("span",{className:"text-xs leading-none",children:y}),d.jsxs("div",{className:"flex gap-[2px] mt-0.5",children:[k&&d.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-400 inline-block",title:"Period day"}),v&&!g(y)&&d.jsx("span",{className:"text-[8px] leading-none",children:v})]})]},y)})}),d.jsxs("div",{className:"flex gap-4 mt-4 pt-4 border-t border-primary/10",children:[d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-rose-400 inline-block"}),d.jsx("span",{className:"text-[11px] text-text-secondary",children:"Period day"})]}),d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-primary/30 inline-block"}),d.jsx("span",{className:"text-[11px] text-text-secondary",children:"Has entry"})]}),d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-primary inline-block"}),d.jsx("span",{className:"text-[11px] text-text-secondary",children:"Selected"})]})]})]})}function kD({date:t,existingEntry:e,onSave:n,onClose:r}){const[s,i]=O.useState((e==null?void 0:e.mood)||""),[o,a]=O.useState((e==null?void 0:e.fatigue)||1),[u,c]=O.useState((e==null?void 0:e.pain)||1),[f,p]=O.useState((e==null?void 0:e.period)||!1),[g,y]=O.useState((e==null?void 0:e.ironIntake)||!1),[_,A]=O.useState((e==null?void 0:e.water)||6),[k,I]=O.useState((e==null?void 0:e.notes)||""),[v,T]=O.useState(!1),R=async()=>{T(!0);try{await n({mood:s,fatigue:o,pain:u,period:f,ironIntake:g,water:_,notes:k,date:t})}finally{T(!1)}},{day:L,month:M,year:S}=Zp(t),w=`${L} ${Xp[M]} ${S}`;return d.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md max-h-[90vh] overflow-y-auto shadow-2xl animate-fade-in-up",children:[d.jsxs("div",{className:"sticky top-0 bg-white rounded-t-3xl px-6 pt-6 pb-4 border-b border-gray-100 flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"text-lg font-extrabold text-text-primary",children:["Log for ",w]}),d.jsx("p",{className:"text-xs text-text-secondary mt-0.5",children:e?"Editing existing entry":"New entry"})]}),d.jsx("button",{onClick:r,className:"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-text-secondary transition-all",children:""})]}),d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold text-text-primary mb-3 uppercase tracking-wide",children:"Mood"}),d.jsx("div",{className:"grid grid-cols-6 gap-2",children:Jp.map(E=>d.jsxs("button",{onClick:()=>i(E.value),title:E.label,className:`flex flex-col items-center gap-1 p-2 rounded-xl border-2 transition-all ${s===E.value?"border-primary bg-primary/10 scale-105":"border-gray-100 hover:border-primary/30"}`,children:[d.jsx("span",{className:"text-xl",children:E.emoji}),d.jsx("span",{className:"text-[9px] text-text-secondary font-medium",children:E.label})]},E.value))})]}),d.jsxs("div",{className:"flex items-center justify-between p-4 bg-rose-50 rounded-2xl border border-rose-100",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-xl",children:""}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-bold text-text-primary",children:"Period Today?"}),d.jsx("p",{className:"text-xs text-text-secondary",children:"Mark if you're on your period"})]})]}),d.jsx("button",{onClick:()=>p(!f),className:`relative w-12 h-6 rounded-full transition-all duration-300 ${f?"bg-rose-400":"bg-gray-200"}`,children:d.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full shadow transition-all duration-300 ${f?"left-7":"left-1"}`})})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("label",{className:"text-sm font-bold text-text-primary uppercase tracking-wide",children:" Fatigue Level"}),d.jsxs("span",{className:"text-sm font-bold text-primary",children:[o,"/5"]})]}),d.jsx("input",{type:"range",min:"1",max:"5",value:o,onChange:E=>a(Number(E.target.value)),className:"w-full h-2 bg-gray-200 rounded-full accent-primary cursor-pointer"}),d.jsxs("div",{className:"flex justify-between text-[10px] text-text-secondary mt-1",children:[d.jsx("span",{children:"Low"}),d.jsx("span",{children:"High"})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("label",{className:"text-sm font-bold text-text-primary uppercase tracking-wide",children:" Pain Level"}),d.jsxs("span",{className:"text-sm font-bold text-primary",children:[u,"/5"]})]}),d.jsx("input",{type:"range",min:"1",max:"5",value:u,onChange:E=>c(Number(E.target.value)),className:"w-full h-2 bg-gray-200 rounded-full accent-primary cursor-pointer"}),d.jsxs("div",{className:"flex justify-between text-[10px] text-text-secondary mt-1",children:[d.jsx("span",{children:"None"}),d.jsx("span",{children:"Severe"})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"p-4 bg-emerald-50 rounded-2xl border border-emerald-100",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm font-bold text-text-primary",children:" Iron Food"}),d.jsx("button",{onClick:()=>y(!g),className:`relative w-10 h-5 rounded-full transition-all duration-300 ${g?"bg-emerald-400":"bg-gray-200"}`,children:d.jsx("div",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-all duration-300 ${g?"left-5":"left-0.5"}`})})]}),d.jsx("p",{className:"text-[10px] text-text-secondary",children:"Ragi, spinach, drumstick leaves?"})]}),d.jsxs("div",{className:"p-4 bg-blue-50 rounded-2xl border border-blue-100",children:[d.jsx("p",{className:"text-sm font-bold text-text-primary mb-2",children:" Water (cups)"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>A(Math.max(0,_-1)),className:"w-6 h-6 rounded-full bg-blue-200 text-blue-700 font-bold text-sm hover:bg-blue-300 transition-all",children:""}),d.jsx("span",{className:"text-lg font-bold text-blue-600 min-w-[24px] text-center",children:_}),d.jsx("button",{onClick:()=>A(Math.min(20,_+1)),className:"w-6 h-6 rounded-full bg-blue-200 text-blue-700 font-bold text-sm hover:bg-blue-300 transition-all",children:"+"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold text-text-primary mb-2 uppercase tracking-wide",children:" Private Notes"}),d.jsx("textarea",{value:k,onChange:E=>I(E.target.value),placeholder:"How are you feeling today? Any symptoms, thoughts, or observations...",rows:3,className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/10 text-text-primary text-sm resize-none transition-all bg-gray-50 focus:bg-white"}),d.jsx("p",{className:"text-[10px] text-text-secondary mt-1",children:" Private  only visible to you"})]}),d.jsx("button",{onClick:R,disabled:v||!s,className:"w-full py-4 bg-primary text-white font-bold rounded-2xl shadow-lg shadow-primary/25 hover:bg-primary/80 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:v?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):`${e?"Update":"Save"} Entry`}),!s&&d.jsx("p",{className:"text-xs text-center text-text-secondary -mt-2",children:"Please select a mood to save"})]})]})})}function ND({entries:t}){const[e,n]=O.useState(null),[r,s]=O.useState(!1),[i,o]=O.useState(!1),a=async()=>{if(!(t.length<3)){s(!0);try{const c=await mO(t.slice(0,7));n(c),o(!0)}catch(c){console.error(c)}finally{s(!1)}}};if(t.length<3)return null;const u={High:"bg-red-50 border-red-200 text-red-700",Moderate:"bg-amber-50 border-amber-200 text-amber-700",Low:"bg-emerald-50 border-emerald-200 text-emerald-700"};return d.jsx("div",{className:"mb-6",children:i?e?d.jsxs("div",{className:"glass-card p-5 border border-primary/20",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx("span",{className:"text-lg",children:""}),d.jsx("h4",{className:"font-bold text-text-primary text-sm",children:"AI Weekly Insight"})]}),d.jsx("p",{className:"text-text-primary text-sm mb-3 leading-relaxed",children:e.summary}),e.pattern&&d.jsxs("p",{className:"text-text-secondary text-xs mb-2",children:[" ",d.jsx("strong",{children:"Pattern:"})," ",e.pattern]}),e.suggestion&&d.jsxs("p",{className:"text-text-secondary text-xs mb-3",children:[" ",d.jsx("strong",{children:"Tip:"})," ",e.suggestion]}),e.anemia_risk&&d.jsxs("span",{className:`text-xs font-bold px-3 py-1 rounded-full border ${u[e.anemia_risk]||u.Low}`,children:["Anemia Risk: ",e.anemia_risk,"  ",e.anemia_reason]}),d.jsx("button",{onClick:()=>o(!1),className:"mt-3 text-xs text-text-secondary hover:text-primary transition-colors block",children:"Dismiss"})]}):null:d.jsx("button",{onClick:a,disabled:r,className:"w-full py-3 border-2 border-dashed border-primary/30 text-primary font-semibold rounded-2xl hover:bg-primary/5 transition-all text-sm flex items-center justify-center gap-2",children:r?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-4 h-4 border-2 border-primary/30 border-t-primary rounded-full animate-spin"}),"Generating AI summary..."]}):d.jsx(d.Fragment,{children:" Generate AI Weekly Insight"})})})}function RD({entries:t,onEdit:e}){return t.length===0?null:d.jsxs("div",{className:"mt-6",children:[d.jsx("h4",{className:"text-sm font-bold text-text-primary uppercase tracking-wide mb-3",children:"Recent Entries"}),d.jsx("div",{className:"space-y-3",children:t.slice(0,8).map(n=>{const{day:r,month:s}=Zp(n.date),i=Jp.find(o=>o.value===n.mood);return d.jsxs("button",{onClick:()=>e(n),className:"w-full glass-card p-4 flex items-center gap-4 hover:border-primary/30 hover:shadow-md transition-all text-left",children:[d.jsxs("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex flex-col items-center justify-center flex-shrink-0",children:[d.jsx("span",{className:"text-xs font-bold text-primary leading-none",children:r}),d.jsx("span",{className:"text-[9px] text-primary/70",children:Xp[s].slice(0,3)})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[d.jsx("span",{className:"text-base",children:(i==null?void 0:i.emoji)||""}),d.jsx("span",{className:"text-sm font-semibold text-text-primary",children:(i==null?void 0:i.label)||"No mood"}),n.period&&d.jsx("span",{className:"text-[10px] bg-rose-100 text-rose-600 px-2 py-0.5 rounded-full font-semibold",children:"Period"})]}),d.jsxs("div",{className:"flex gap-3 text-[11px] text-text-secondary",children:[d.jsxs("span",{children:["Fatigue ",n.fatigue,"/5"]}),d.jsxs("span",{children:["Pain ",n.pain,"/5"]}),d.jsxs("span",{children:["",n.water," cups"]})]}),n.notes&&d.jsx("p",{className:"text-xs text-text-secondary mt-1 truncate",children:n.notes})]}),d.jsx("span",{className:"text-text-secondary text-xs",children:""})]},n.id)})})]})}function OD(){const t=new Date,[e,n]=O.useState(t.getFullYear()),[r,s]=O.useState(t.getMonth()),[i,o]=O.useState(Wh(t.getFullYear(),t.getMonth(),t.getDate())),[a,u]=O.useState([]),[c,f]=O.useState(!1),[p,g]=O.useState(null),[y,_]=O.useState(!0),[A,k]=O.useState(!1),I=`${e}-${String(r+1).padStart(2,"0")}`,v=O.useCallback(async()=>{var b;const E=(b=Xt.currentUser)==null?void 0:b.uid;if(E){_(!0);try{const P=await oO(E,I);u(P)}catch(P){console.error("Failed to load entries:",P)}finally{_(!1)}}},[I]);O.useEffect(()=>{v()},[v]);const T=E=>{let b=r+E,P=e;b>11&&(b=0,P++),b<0&&(b=11,P--),s(b),n(P)},R=async E=>{var N;o(E);const b=(N=Xt.currentUser)==null?void 0:N.uid;if(!b)return;const P=await aO(b,E);g(P),f(!0)},L=()=>{g(null),f(!0)},M=async E=>{var P;const b=(P=Xt.currentUser)==null?void 0:P.uid;b&&(await iO(b,E),k(!0),setTimeout(()=>k(!1),3e3),f(!1),v())},S=E=>{o(E.date),g(E),f(!0)},w=a.filter(E=>E.period).length;return d.jsxs("div",{className:"min-h-full pb-24 pt-8 animate-fade-in",children:[d.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[d.jsxs("div",{className:"flex items-start justify-between mb-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-extrabold text-text-primary tracking-tight",children:"My Journal"}),d.jsx("p",{className:"text-text-secondary mt-1 text-sm",children:"Track your health journey privately"})]}),d.jsx("button",{onClick:L,className:"px-4 py-2 bg-primary text-white rounded-full text-sm font-bold shadow-lg shadow-primary/25 hover:bg-primary/80 transition-all",children:"+ Log Today"})]}),A&&d.jsxs("div",{className:"mb-4 px-5 py-3 bg-emerald-50 border border-emerald-200 rounded-2xl flex items-center gap-3 animate-fade-in",children:[d.jsx("span",{className:"text-emerald-500 text-lg",children:""}),d.jsx("p",{className:"text-emerald-700 font-semibold text-sm",children:"Entry saved successfully!"})]}),!y&&a.length>0&&d.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[d.jsxs("div",{className:"glass-card p-4 text-center",children:[d.jsx("p",{className:"text-2xl font-extrabold text-primary",children:a.length}),d.jsx("p",{className:"text-[11px] text-text-secondary font-medium mt-0.5",children:"Entries"})]}),d.jsxs("div",{className:"glass-card p-4 text-center",children:[d.jsx("p",{className:"text-2xl font-extrabold text-rose-500",children:w}),d.jsx("p",{className:"text-[11px] text-text-secondary font-medium mt-0.5",children:"Period days"})]}),d.jsxs("div",{className:"glass-card p-4 text-center",children:[d.jsxs("p",{className:"text-2xl font-extrabold text-amber-500",children:[a.length>0?Math.round(a.reduce((E,b)=>E+(b.fatigue||0),0)/a.length):0,"/5"]}),d.jsx("p",{className:"text-[11px] text-text-secondary font-medium mt-0.5",children:"Avg fatigue"})]})]}),a.length>=3&&d.jsx(ND,{entries:a}),d.jsx(PD,{year:e,month:r,entries:a,selectedDate:i,onSelectDate:R,onMonthChange:T}),!y&&a.length===0&&d.jsxs("div",{className:"glass-card p-12 text-center",children:[d.jsx("div",{className:"text-5xl mb-4",children:""}),d.jsx("p",{className:"text-text-primary text-lg font-bold mb-2",children:"No entries yet this month"}),d.jsx("p",{className:"text-text-secondary text-sm mb-6",children:'Tap any date on the calendar or "Log Today" to start tracking'}),d.jsx("button",{onClick:L,className:"px-6 py-3 bg-primary text-white rounded-full font-bold text-sm shadow-lg shadow-primary/25 hover:bg-primary/80 transition-all",children:"Start Tracking"})]}),!y&&d.jsx(RD,{entries:a,onEdit:S}),y&&d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"w-8 h-8 border-3 border-primary/20 border-t-primary rounded-full animate-spin mx-auto"}),d.jsx("p",{className:"text-text-secondary text-sm mt-3",children:"Loading entries..."})]})]}),c&&d.jsx(kD,{date:i,existingEntry:p,onSave:M,onClose:()=>f(!1)})]})}const DD=[{name:"Jeera Water for PCOS",remedy:"Drink jeera (cumin) water every morning on empty stomach",verdict:"Partially Safe",explanation:"Cumin has anti-inflammatory properties and may help with insulin resistance which is linked to PCOS. However evidence is mostly anecdotal. Safe to try but should not replace prescribed medication.",scientificBacking:"Partially Supported",tip:"Soak 1 tsp jeera in water overnight, strain and drink in the morning",category:"pcos-support",safetyColor:"warning"},{name:"Turmeric Milk for Cramps",remedy:"Drink warm turmeric milk during periods for cramp relief",verdict:"Safe",explanation:"Curcumin in turmeric has proven anti-inflammatory properties that can help reduce menstrual cramp severity. Widely studied and generally safe for most people.",scientificBacking:"Supported",tip:"Add a pinch of black pepper to increase curcumin absorption by 2000%",category:"menstrual-health",safetyColor:"safe"},{name:"Sesame Seeds for Periods",remedy:"Eat sesame seeds (til) to regularize periods",verdict:"Partially Safe",explanation:"Sesame seeds contain phytoestrogens that may help regulate hormones. Used in Ayurveda traditionally. Limited modern clinical evidence but considered safe in food amounts.",scientificBacking:"Partially Supported",tip:"Add to salads or make til ladoo  avoid excessive amounts",category:"menstrual-health",safetyColor:"warning"},{name:"Ragi for Anemia",remedy:"Eat ragi (finger millet) daily to improve iron levels",verdict:"Safe",explanation:"Ragi is genuinely rich in iron, calcium, and essential amino acids. It is one of the best locally available foods for combating anemia and is well supported by nutritional science.",scientificBacking:"Supported",tip:"Ragi porridge in the morning with jaggery is highly effective and also supports bone health",category:"anemia-diet",safetyColor:"safe"},{name:"Papaya for Irregular Periods",remedy:"Eat raw papaya to induce or regularize periods",verdict:"Consult Doctor First",explanation:"Raw papaya contains papain which may stimulate uterine contractions. While used traditionally, it can be harmful during pregnancy and in certain conditions. Do not self-administer.",scientificBacking:"Partially Supported",tip:"Avoid completely if there is any chance of pregnancy",category:"menstrual-health",safetyColor:"danger"},{name:"Methi Seeds for Hormones",remedy:"Soak fenugreek seeds overnight and drink the water",verdict:"Partially Safe",explanation:"Fenugreek contains compounds that may support hormonal balance and help with PCOS symptoms. Some studies show modest benefits for insulin sensitivity.",scientificBacking:"Partially Supported",tip:"1 tsp soaked overnight is enough  excess can cause digestive upset",category:"pcos-support",safetyColor:"warning"},{name:"Coconut Oil Pulling",remedy:"Oil pulling with coconut oil improves hormonal health",verdict:"Myth",explanation:"There is no scientific evidence linking oil pulling to hormonal health or menstrual regularity. Oil pulling may help with oral hygiene but not women's health conditions.",scientificBacking:"No Evidence",tip:"Focus on evidence-based approaches for hormonal health instead",category:"general-wellness",safetyColor:"danger"},{name:"Drumstick Leaves for Anemia",remedy:"Eat murungai keerai (drumstick leaves) regularly for iron",verdict:"Safe",explanation:"Drumstick leaves are exceptionally rich in iron, vitamin C, and calcium. They are one of the most nutritionally dense locally available greens in Tamil Nadu and highly recommended for anemia.",scientificBacking:"Supported",tip:"Cook as kootu or sambar 3x per week for best results. Vitamin C content also enhances iron absorption",category:"anemia-diet",safetyColor:"safe"},{name:"Aloe Vera Juice for PCOS",remedy:"Drink aloe vera juice daily to manage PCOS",verdict:"Partially Safe",explanation:"Some animal studies suggest aloe vera may help with hormonal balance. Limited human studies available. Generally safe in small amounts but evidence is not strong enough to recommend as a primary treatment.",scientificBacking:"Partially Supported",tip:"If trying, use pure food-grade aloe vera gel in small amounts only",category:"pcos-support",safetyColor:"warning"},{name:"Ginger Tea for Nausea",remedy:"Drink ginger tea for period-related nausea and cramps",verdict:"Safe",explanation:"Ginger has well-documented anti-nausea and anti-inflammatory properties. Multiple clinical studies support its effectiveness for menstrual pain and nausea. One of the most evidence-backed home remedies available.",scientificBacking:"Supported",tip:"Fresh ginger steeped in hot water for 10 minutes is most effective. Add honey if needed",category:"menstrual-health",safetyColor:"safe"}],jD=[{id:"PCOS",title:"PCOS",titleTamil:"",description:"Gentle space for PCOS experiences",icon:"",color:"rgba(109,91,208,0.12)",postCount:0},{id:"Anemia",title:"Anemia",titleTamil:" ",description:"Iron support, fatigue, and nourishment",icon:"",color:"rgba(184,212,190,0.2)",postCount:0},{id:"Menstrual Health",title:"Menstrual Health",titleTamil:" ",description:"Open, stigma-free period care",icon:"",color:"rgba(155,142,196,0.15)",postCount:0},{id:"Home Remedies",title:"Home Remedies",titleTamil:" ",description:"Cultural remedies with care",icon:"",color:"rgba(184,212,190,0.25)",postCount:0},{id:"General Wellness",title:"General Wellness",titleTamil:" ",description:"Everyday wellbeing and emotional balance",icon:"",color:"rgba(196,149,106,0.1)",postCount:0}],LD=[{userId:"seed-user",anonName:"Anon#2847",topic:"PCOS",type:"question",title:"Inositol experiences?",content:"Has anyone tried inositol supplements for PCOS? My doctor mentioned it and I wanted to hear real experiences before starting.",imageUrl:null,upvotes:14,upvotedBy:[],commentCount:2,approved:!0,moderation:{sentiment:"neutral",safetyScore:78,flags:["safe"],geminiCheck:!1},isPinned:!0,isExpertAnswered:!1,daysAgo:3},{userId:"seed-user",anonName:"Anon#5631",topic:"PCOS",type:"text",title:"Feeling less alone",content:"I was diagnosed with PCOS last year and felt so alone. Finding this community helped me realize how common it is. You are not alone.",imageUrl:null,upvotes:32,upvotedBy:[],commentCount:1,approved:!0,moderation:{sentiment:"positive",safetyScore:92,flags:["safe"],geminiCheck:!1},isPinned:!1,isExpertAnswered:!1,daysAgo:5},{userId:"seed-user",anonName:"Anon#9012",topic:"PCOS",type:"text",title:"Gentle lifestyle changes",content:"Small shifts helped me: slow walks, reducing refined sugar, and calming routines. Always work with your doctor for personal care.",imageUrl:null,upvotes:67,upvotedBy:[],commentCount:3,approved:!0,moderation:{sentiment:"positive",safetyScore:94,flags:["safe"],geminiCheck:!1},isPinned:!1,isExpertAnswered:!0,daysAgo:7},{userId:"seed-user",anonName:"Anon#9134",topic:"Anemia",type:"text",title:"Ragi helped me",content:"My hemoglobin was 8.2 and I felt exhausted constantly. Started eating ragi every morning and drumstick leaves curry 3x a week. After 2 months it went up to 10.5.",imageUrl:null,upvotes:45,upvotedBy:[],commentCount:0,approved:!0,moderation:{sentiment:"positive",safetyScore:90,flags:["safe"],geminiCheck:!1},isPinned:!1,isExpertAnswered:!1,daysAgo:2},{userId:"seed-user",anonName:"Anon#3372",topic:"Anemia",type:"question",title:"Vitamin C with iron?",content:"Does eating iron-rich food with vitamin C help absorption? I heard you should eat amla or lemon alongside iron foods.",imageUrl:null,upvotes:19,upvotedBy:[],commentCount:2,approved:!0,moderation:{sentiment:"neutral",safetyScore:78,flags:["safe"],geminiCheck:!1},isPinned:!1,isExpertAnswered:!1,daysAgo:1},{userId:"seed-user",anonName:"Anon#6755",topic:"Anemia",type:"text",title:"Absorption tips",content:"Vitamin C can help. Squeeze lemon on greens, eat amla chutney, and avoid tea/coffee right after meals.",imageUrl:null,upvotes:89,upvotedBy:[],commentCount:1,approved:!0,moderation:{sentiment:"positive",safetyScore:93,flags:["safe"],geminiCheck:!1},isPinned:!1,isExpertAnswered:!0,daysAgo:1},{userId:"seed-user",anonName:"Anon#7821",topic:"Menstrual Health",type:"text",title:"Your pain is valid",content:"I used to think severe cramps were normal. Turns out I had endometriosis. Please dont ignore very painful periods  it is okay to seek help.",imageUrl:null,upvotes:78,upvotedBy:[],commentCount:2,approved:!0,moderation:{sentiment:"neutral",safetyScore:86,flags:["safe"],geminiCheck:!1},isPinned:!1,isExpertAnswered:!1,daysAgo:4},{userId:"seed-user",anonName:"Anon#4409",topic:"Menstrual Health",type:"question",title:"Mood swings before periods",content:"Does anyone else struggle with mood swings a week before periods? I feel like a completely different person.",imageUrl:null,upvotes:23,upvotedBy:[],commentCount:0,approved:!0,moderation:{sentiment:"neutral",safetyScore:78,flags:["safe"],geminiCheck:!1},isPinned:!1,isExpertAnswered:!1,hoursAgo:6},{userId:"seed-user",anonName:"Anon#1156",topic:"Home Remedies",type:"text",title:"Methi seeds and cycles",content:"My grandmother swore by methi seeds soaked overnight for irregular periods. I tried it for 2 months and my cycle felt more regular.",imageUrl:null,upvotes:31,upvotedBy:[],commentCount:1,approved:!0,moderation:{sentiment:"positive",safetyScore:88,flags:["safe"],geminiCheck:!1},isPinned:!1,isExpertAnswered:!1,daysAgo:8},{userId:"seed-user",anonName:"Anon#6683",topic:"Home Remedies",type:"text",title:"Pregnancy caution",content:"Please be careful with home remedies during pregnancy. Some herbs that are fine normally can be harmful. Always tell your doctor what you are taking.",imageUrl:null,upvotes:54,upvotedBy:[],commentCount:0,approved:!0,moderation:{sentiment:"neutral",safetyScore:84,flags:["safe"],geminiCheck:!1},isPinned:!1,isExpertAnswered:!1,daysAgo:3},{userId:"seed-user",anonName:"Anon#8847",topic:"General Wellness",type:"text",title:"Tracking patterns",content:"Started tracking my sleep, water intake, and mood alongside my cycle. The patterns were eye-opening, especially two days before my period.",imageUrl:null,upvotes:41,upvotedBy:[],commentCount:0,approved:!0,moderation:{sentiment:"positive",safetyScore:90,flags:["safe"],geminiCheck:!1},isPinned:!1,isExpertAnswered:!1,daysAgo:2},{userId:"seed-user",anonName:"Anon#3301",topic:"General Wellness",type:"text",title:"It is okay to not be okay",content:"Mental health is also women's health. It is okay to not be okay sometimes. You are seen here.",imageUrl:null,upvotes:96,upvotedBy:[],commentCount:0,approved:!0,moderation:{sentiment:"positive",safetyScore:92,flags:["safe"],geminiCheck:!1},isPinned:!1,isExpertAnswered:!1,daysAgo:10}],VD=[{id:"dr_anjali",name:"Dr. Anjali Desai",specialty:"Gynecologist",location:{latitude:13.0827,longitude:80.2707},address:"Anna Nagar, Chennai",phone:"+91 98765 43210",rating:4.8,isVerified:!0,availableForQA:!0,image:"https://randomuser.me/api/portraits/women/68.jpg"},{id:"dr_priya",name:"Dr. Priya Sharma",specialty:"Reproductive Endocrinologist",location:{latitude:12.9716,longitude:77.5946},address:"Indiranagar, Bangalore",phone:"+91 91234 56789",rating:4.9,isVerified:!0,availableForQA:!0,image:"https://randomuser.me/api/portraits/women/44.jpg"},{id:"dr_lakshmi",name:"Dr. Lakshmi Iyer",specialty:"Nutritionist",location:{latitude:19.076,longitude:72.8777},address:"Bandra West, Mumbai",phone:"+91 99887 76655",rating:4.7,isVerified:!0,availableForQA:!1,image:"https://randomuser.me/api/portraits/women/33.jpg"}],MD=[{userId:"seed-user",date:new Date().toISOString().split("T")[0],mood:"Neutral",symptoms:["Mild Cramps","Fatigue"],energyLevel:5,waterIntake:4,sleepHours:7,notes:"Felt a bit tired today, maybe due to upcoming cycle.",createdAt:new Date},{userId:"seed-user",date:new Date(Date.now()-864e5).toISOString().split("T")[0],mood:"Happy",symptoms:[],energyLevel:8,waterIntake:8,sleepHours:8,notes:"Great yoga session in the morning!",createdAt:new Date(Date.now()-864e5)}],FD=[{userId:"seed-user",doctorId:"dr_anjali",question:"Is it normal to have irregular periods in my 20s?",answer:"While some variation is normal, consistent irregularity (cycles < 21 or > 35 days) should be checked. It could be stress, or conditions like PCOS.",status:"answered",isPublic:!0,createdAt:new Date(Date.now()-1728e5),answeredAt:new Date(Date.now()-864e5)},{userId:"seed-user",doctorId:"dr_priya",question:"What diet is best for Anemia?",answer:null,status:"open",isPublic:!0,createdAt:new Date,answeredAt:null}],UD=async()=>{console.log(" Starting seeding process...");const t=[];try{Xt.currentUser||(t.push(" Signing in anonymously for permissions..."),await OA(Xt),t.push(" Signed in."));const e=qe(fe,"forum_topics");if((await Tn(e)).empty){console.log("Seeding forum topics..."),t.push("Seeding forum topics...");const y=jD.map(_=>wu(yn(fe,"forum_topics",_.id),{..._,createdAt:Mt()}));await Promise.all(y),console.log(" Forum topics seeded."),t.push(" Forum topics seeded.")}else console.log("Skipping forum topics (already exist)."),t.push("Skipping forum topics (already exist).");const r=qe(fe,"forum_posts");if((await Tn(r)).empty){console.log("Seeding forum posts..."),t.push("Seeding forum posts...");const y=LD.map(_=>{var k,I,v;const A=_.daysAgo?new Date(Date.now()-_.daysAgo*24*60*60*1e3):new Date(Date.now()-(_.hoursAgo||0)*60*60*1e3);return ir(qe(fe,"forum_posts"),{..._,topic:_.topic,moderation:{sentiment:((k=_.moderation)==null?void 0:k.sentiment)||"neutral",safetyScore:((I=_.moderation)==null?void 0:I.safetyScore)||80,flags:((v=_.moderation)==null?void 0:v.flags)||["safe"],geminiCheck:!1,moderatedAt:A},createdAt:A,approved:!0,upvotes:_.upvotes||0,commentCount:_.commentCount||0,language:"en"})});await Promise.all(y),console.log(" Forum posts seeded."),t.push(" Forum posts seeded.")}else console.log("Skipping forum posts (already exist)."),t.push("Skipping forum posts (already exist).");const i=qe(fe,"remedies");if((await Tn(i)).empty){console.log("Seeding remedies..."),t.push("Seeding remedies...");const y=DD.map(_=>ir(qe(fe,"remedies"),{..._,createdAt:Mt()}));await Promise.all(y),console.log(" Remedies seeded."),t.push(" Remedies seeded.")}else console.log("Skipping remedies (already exist)."),t.push("Skipping remedies (already exist).");const a=qe(fe,"doctors");if((await Tn(a)).empty){console.log("Seeding doctors..."),t.push("Seeding doctors...");const y=VD.map(_=>wu(yn(fe,"doctors",_.id),{..._,createdAt:Mt()}));await Promise.all(y),console.log(" Doctors seeded."),t.push(" Doctors seeded.")}else console.log("Skipping doctors (already exist).");const c=qe(fe,"journal_entries");if((await Tn(c)).empty){console.log("Seeding journal entries..."),t.push("Seeding journal entries...");const y=MD.map(_=>ir(qe(fe,"journal_entries"),{..._,createdAt:Mt()}));await Promise.all(y),console.log(" Journal entries seeded."),t.push(" Journal entries seeded.")}const p=qe(fe,"doctor_qa");if((await Tn(p)).empty){console.log("Seeding QA..."),t.push("Seeding QA...");const y=FD.map(_=>ir(qe(fe,"doctor_qa"),{..._,createdAt:Mt(),answeredAt:_.answeredAt?Mt():null}));await Promise.all(y),console.log(" Doctor QA seeded."),t.push(" Doctor QA seeded.")}return console.log(" Database seeding completed!"),t.push(" Database seeding completed!"),{success:!0,logs:t}}catch(e){return console.error("Error seeding database:",e),t.push(` Error: ${e.message}`),{success:!1,error:e.message,logs:t}}},vd=[{language:"en",topic:"PCOS",type:"text",title:"Finally got diagnosed with PCOS after 3 years",content:"I want to share my journey because I wish someone had told me earlier what to look for. The fatigue and irregular cycles felt so isolating. If you have similar symptoms please push for a scan.",anonName:"Anon#4821",upvotes:47,commentCount:12,approved:!0,isPinned:!0,isExpertAnswered:!0,moderation:{sentiment:"positive",safetyScore:95,flags:["safe"]}},{language:"en",topic:"Anemia",type:"question",title:"Does anyone feel dizzy even after taking iron tablets?",content:"My doctor prescribed iron supplements but I still feel lightheaded every morning. Has this happened to you? How long did it take to feel better?",anonName:"Anon#2934",upvotes:23,commentCount:8,approved:!0,isPinned:!1,isExpertAnswered:!1,moderation:{sentiment:"neutral",safetyScore:88,flags:["safe"]}},{language:"en",topic:"Home Remedies",type:"text",title:"Tried jeera water for 30 days  honest results",content:"I know there is a lot of debate about this remedy. Here is what I actually experienced after a month. Bloating reduced noticeably in week 3. Energy levels felt slightly better. But it did not fix my cycle irregularity.",anonName:"Anon#7612",upvotes:31,commentCount:15,approved:!0,isPinned:!1,isExpertAnswered:!0,moderation:{sentiment:"positive",safetyScore:91,flags:["safe"]}},{language:"en",topic:"Menstrual Health",type:"text",title:"Tracking my cycle changed how I talk to my doctor",content:"Started journaling 6 months ago and the patterns I noticed completely changed my appointments. I could finally describe what was happening instead of guessing.",anonName:"Anon#3301",upvotes:19,commentCount:6,approved:!0,isPinned:!1,isExpertAnswered:!1,moderation:{sentiment:"positive",safetyScore:93,flags:["safe"]}},{language:"en",topic:"General Wellness",type:"question",title:"What local foods have genuinely helped your energy?",content:"Looking for practical suggestions available in local markets, not just generic advice. I am in Chennai. Ragi and drumstick leaves have worked for me  what about you?",anonName:"Anon#5509",upvotes:38,commentCount:21,approved:!0,isPinned:!1,isExpertAnswered:!0,moderation:{sentiment:"positive",safetyScore:96,flags:["safe"]}},{language:"ta",topic:"PCOS",type:"text",title:"PCOS     ",content:"      . ,  ,     PCOS     .   .",anonName:"Anon#8821",upvotes:52,commentCount:18,approved:!0,isPinned:!0,isExpertAnswered:!0,moderation:{sentiment:"positive",safetyScore:93,flags:["safe"]}},{language:"ta",topic:"Anemia",type:"question",title:"    ",content:"   .    .   ?   ?",anonName:"Anon#1134",upvotes:29,commentCount:11,approved:!0,isPinned:!1,isExpertAnswered:!1,moderation:{sentiment:"neutral",safetyScore:85,flags:["safe"]}},{language:"ta",topic:"Home Remedies",type:"text",title:"     ",content:"       .    .    .   ?",anonName:"Anon#6612",upvotes:34,commentCount:9,approved:!0,isPinned:!1,isExpertAnswered:!1,moderation:{sentiment:"positive",safetyScore:90,flags:["safe"]}},{language:"ta",topic:"Menstrual Health",type:"text",title:"      ?",content:"       .    .    .  .",anonName:"Anon#4409",upvotes:61,commentCount:24,approved:!0,isPinned:!1,isExpertAnswered:!0,moderation:{sentiment:"neutral",safetyScore:87,flags:["safe"]}},{language:"ta",topic:"General Wellness",type:"question",title:"   ?",content:"     .   .  ?   ?",anonName:"Anon#7723",upvotes:27,commentCount:13,approved:!0,isPinned:!1,isExpertAnswered:!1,moderation:{sentiment:"positive",safetyScore:94,flags:["safe"]}},{language:"hi",topic:"PCOS",type:"text",title:"PCOS      ",content:"       PCOS                      ",anonName:"Anon#3341",upvotes:44,commentCount:16,approved:!0,isPinned:!0,isExpertAnswered:!0,moderation:{sentiment:"positive",safetyScore:95,flags:["safe"]}},{language:"hi",topic:"Anemia",type:"question",title:"        ?",content:"        -       ,      ?      ?",anonName:"Anon#9921",upvotes:33,commentCount:19,approved:!0,isPinned:!1,isExpertAnswered:!1,moderation:{sentiment:"neutral",safetyScore:89,flags:["safe"]}},{language:"hi",topic:"Menstrual Health",type:"text",title:"         ",content:"                             ",anonName:"Anon#5512",upvotes:58,commentCount:22,approved:!0,isPinned:!1,isExpertAnswered:!0,moderation:{sentiment:"positive",safetyScore:91,flags:["safe"]}},{language:"hi",topic:"Home Remedies",type:"text",title:"      ?",content:"               ,     PCOS      ",anonName:"Anon#2278",upvotes:26,commentCount:8,approved:!0,isPinned:!1,isExpertAnswered:!1,moderation:{sentiment:"positive",safetyScore:92,flags:["safe"]}},{language:"ml",topic:"PCOS",type:"text",title:"PCOS   ?",content:"  PCOS  .  , ,      .   ?",anonName:"Anon#6634",upvotes:39,commentCount:14,approved:!0,isPinned:!0,isExpertAnswered:!1,moderation:{sentiment:"neutral",safetyScore:88,flags:["safe"]}},{language:"ml",topic:"Menstrual Health",type:"question",title:"    ?",content:"      .   .   ?    ?",anonName:"Anon#1198",upvotes:45,commentCount:17,approved:!0,isPinned:!1,isExpertAnswered:!0,moderation:{sentiment:"neutral",safetyScore:86,flags:["safe"]}},{language:"ml",topic:"General Wellness",type:"text",title:"     ",content:", ,         .      .   ?",anonName:"Anon#8823",upvotes:31,commentCount:10,approved:!0,isPinned:!1,isExpertAnswered:!1,moderation:{sentiment:"positive",safetyScore:94,flags:["safe"]}},{language:"te",topic:"PCOS",type:"text",title:"PCOS     ",content:"     .  PCOS  .  ,  .  .    ?",anonName:"Anon#7743",upvotes:41,commentCount:15,approved:!0,isPinned:!0,isExpertAnswered:!0,moderation:{sentiment:"positive",safetyScore:94,flags:["safe"]}},{language:"te",topic:"Anemia",type:"question",title:"   ?",content:"   .      .     ?",anonName:"Anon#3356",upvotes:28,commentCount:11,approved:!0,isPinned:!1,isExpertAnswered:!1,moderation:{sentiment:"neutral",safetyScore:87,flags:["safe"]}},{language:"te",topic:"Menstrual Health",type:"text",title:"    ",content:"      .       .     .",anonName:"Anon#9901",upvotes:55,commentCount:20,approved:!0,isPinned:!1,isExpertAnswered:!0,moderation:{sentiment:"neutral",safetyScore:89,flags:["safe"]}},{language:"te",topic:"Home Remedies",type:"text",title:"     ",content:"         .   .    .  ?",anonName:"Anon#4467",upvotes:22,commentCount:7,approved:!0,isPinned:!1,isExpertAnswered:!1,moderation:{sentiment:"positive",safetyScore:91,flags:["safe"]}}],$D=async()=>{const t=[];console.log("Seeding forum posts..."),t.push("Seeding multilingual forum posts...");for(const e of vd)await ir(qe(fe,"forum_posts"),{...e,createdAt:Le.fromDate(new Date(Date.now()-Math.random()*7*24*60*60*1e3))});return console.log("Done! Seeded",vd.length,"posts"),t.push(` Seeded ${vd.length} multilingual posts.`),t};function BD(){const[t,e]=O.useState(!1),[n,r]=O.useState([]),[s,i]=O.useState(null),o=zt(),a=async()=>{if(!window.confirm("Are you sure? This should only be run ONCE on a fresh database."))return;e(!0),r([]),i(null);const u=await UD();if(u.success){try{const c=await $D();u.logs.push(...c)}catch(c){u.logs.push(` Error seeding multilingual posts: ${c.message}`)}r(u.logs)}else i(u.error);e(!1)};return d.jsx("div",{className:"min-h-screen bg-white p-8 font-sans",children:d.jsxs("div",{className:"max-w-xl mx-auto border-2 border-red-100 rounded-xl p-8 shadow-sm",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Database Seeder"}),d.jsx("p",{className:"text-red-500 font-bold mb-6 text-sm uppercase tracking-wider",children:" Remove Before Production"}),d.jsxs("p",{className:"text-gray-600 mb-8 leading-relaxed",children:["This tool populates your Firestore database with initial data for Forum Topics, Sample Posts, and Home Remedies.",d.jsx("br",{}),d.jsx("br",{}),"Only run this if your Collections are empty."]}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx("button",{onClick:a,disabled:t,className:`w-full py-4 rounded-lg font-bold text-white transition-all ${t?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 shadow-lg shadow-indigo-200"}`,children:t?"Seeding Database...":"Seed Firestore Database"}),d.jsx("button",{onClick:()=>o("/home"),className:"text-gray-500 hover:text-gray-900 text-sm font-medium mt-2",children:" Back to App"})]}),s&&d.jsxs("div",{className:"mt-8 p-4 bg-red-50 text-red-700 rounded-lg border border-red-100",children:[d.jsx("strong",{children:"Error:"})," ",s]}),n.length>0&&d.jsxs("div",{className:"mt-8 bg-gray-50 rounded-lg p-6 border border-gray-100",children:[d.jsx("h3",{className:"font-bold text-gray-700 mb-4",children:"Execution Log:"}),d.jsx("ul",{className:"space-y-2",children:n.map((u,c)=>d.jsxs("li",{className:"text-sm font-mono text-gray-600 flex items-center gap-2",children:[d.jsx("span",{className:"text-green-500",children:""})," ",u]},c))}),d.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:d.jsx("p",{className:"text-green-600 font-bold text-center",children:" All done! You can use the app now."})})]})]})})}const zD=[{featureType:"all",elementType:"geometry",stylers:[{saturation:-20},{lightness:10}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#dde8f0"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#f0eeff"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e8f0e8"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#ede9ff"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#c4b8e8"}]}],WD=({userLocation:t,places:e,onMarkerClick:n,activePlaceId:r,onMapLoad:s})=>{const i=O.useRef(null),o=O.useRef(null),a=O.useRef([]),u=O.useRef(null);return O.useEffect(()=>{if(!i.current||!window.google){window.google||console.warn("MapView: window.google missing");return}console.log("MapView: Initializing map...",{lat:t==null?void 0:t.lat,lng:t==null?void 0:t.lng}),o.current||(o.current=new window.google.maps.Map(i.current,{center:t||{lat:13.0827,lng:80.2707},zoom:13,disableDefaultUI:!0,zoomControl:!0,zoomControlOptions:{position:window.google.maps.ControlPosition.RIGHT_BOTTOM},styles:zD}),s&&s(o.current))},[]),O.useEffect(()=>{if(!o.current||!t||!window.google)return;o.current.panTo(t),u.current&&u.current.setMap(null);const c=`
        <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
           <circle cx="20" cy="20" r="20" fill="#6D5BD0" fill-opacity="0.2"/>
           <circle cx="20" cy="20" r="8" fill="#6D5BD0" result="core"/>
           <circle cx="20" cy="20" r="12" stroke="white" stroke-width="2" fill="none"/>
        </svg>
      `;u.current=new window.google.maps.Marker({position:t,map:o.current,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(c),scaledSize:new window.google.maps.Size(40,40),anchor:new window.google.maps.Point(20,20)},title:"You are here"})},[t]),O.useEffect(()=>{!o.current||!window.google||(a.current.forEach(c=>c.setMap(null)),a.current=[],e.forEach((c,f)=>{const p=r===c.placeId,g=p?"#6D5BD0":"white",y=p?"white":"#1E1B2E",_="#6D5BD0";let A="";(c.types.includes("doctor")||c.types.includes("health"))&&(A=""),c.types.includes("pharmacy")&&(A=""),c.types.includes("dentist")&&(A="");const k=`${A} ${f+1}`,I=60,v=`
            <svg width="${I}" height="32" viewBox="0 0 ${I} 32" xmlns="http://www.w3.org/2000/svg">
               <rect x="1" y="1" width="${I-2}" height="30" rx="15" fill="${g}" stroke="${_}" stroke-width="2"/>
               <text x="50%" y="54%" dominant-baseline="middle" text-anchor="middle" font-size="14" font-weight="bold" font-family="sans-serif" fill="${y}">${k}</text>
            </svg>
         `,T=new window.google.maps.Marker({position:c.location,map:o.current,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(v),scaledSize:new window.google.maps.Size(60,32),anchor:new window.google.maps.Point(30,16)},title:c.name,zIndex:p?100:1});T.addListener("click",()=>{n&&n(c),o.current.panTo(c.location)}),a.current.push(T)}))},[e,r]),d.jsx("div",{ref:i,className:"w-full h-full",style:{minHeight:"100%"}})},HD=({place:t,index:e,isSelected:n,onClick:r,onDirections:s,onCall:i})=>{const{name:o,rating:a,types:u,address:c,isOpen:f,distance:p,photo:g,phoneNumber:y}=t;let _="Place";u.includes("pharmacy")?_="Pharmacy":u.includes("dentist")?_="Dentist":u.includes("hospital")?_="Hospital":u.includes("doctor")?_="Doctor":u.includes("spa")&&(_="Wellness");const A=f===!0?d.jsx("span",{className:"text-green-600 font-medium text-xs",children:" Open now"}):f===!1?d.jsx("span",{className:"text-red-400 font-medium text-xs",children:" Closed"}):null;return d.jsxs("div",{className:`
        relative overflow-hidden transition-all duration-200 cursor-pointer
        rounded-2xl border px-4 py-4 mb-3 select-none
        ${n?"bg-primary/5 border-primary shadow-sm":"bg-white/70 backdrop-blur-sm border-primary/10 hover:border-primary/30 hover:bg-white/80"}
      `,onClick:r,children:[d.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[d.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[d.jsx("div",{className:"flex-shrink-0 w-[22px] h-[22px] rounded-full bg-primary text-white text-xs font-bold flex items-center justify-center",children:e+1}),d.jsx("h3",{className:"text-sm font-semibold text-text-primary truncate",title:o,children:o})]}),a&&d.jsxs("span",{className:"text-xs font-medium text-text-secondary whitespace-nowrap",children:[" ",a]})]}),d.jsxs("div",{className:"flex items-center gap-2 mb-2 pl-[30px]",children:[d.jsx("span",{className:"bg-primary/10 text-primary text-[10px] font-semibold px-2 py-0.5 rounded-full uppercase tracking-wide",children:_}),p&&d.jsxs("span",{className:"text-xs text-text-secondary",children:[" ",p," km away"]})]}),d.jsxs("div",{className:"flex items-start gap-1.5 pl-[30px] mb-2",children:[d.jsx("span",{className:"text-text-secondary text-xs mt-0.5",children:""}),d.jsx("p",{className:"text-xs text-text-secondary line-clamp-2 leading-snug",children:c})]}),d.jsxs("div",{className:"flex items-center justify-between pl-[30px] mt-3",children:[d.jsx("div",{className:"flex-1",children:A}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:k=>{k.stopPropagation(),s(t)},className:"flex items-center gap-1.5 bg-primary hover:bg-primary-dark text-white text-xs font-medium px-4 py-1.5 rounded-full transition-transform active:scale-95",children:[d.jsx("span",{children:""})," Directions"]}),y&&d.jsxs("button",{onClick:k=>{k.stopPropagation(),i(y)},className:"flex items-center gap-1.5 border border-primary text-primary hover:bg-primary/5 text-xs font-medium px-4 py-1.5 rounded-full transition-transform active:scale-95",children:[d.jsx("span",{children:""})," Call"]})]})]})]})},_d=[{label:"Gynecologist",icon:""},{label:"Pharmacy",icon:""},{label:"General Physician",icon:""},{label:"Diagnostic Lab",icon:""},{label:"Women's Clinic",icon:""},{label:"Wellness Center",icon:""},{label:"Dentist",icon:""},{label:"Eye Care",icon:""}];function qD({selectedType:t,onSelect:e}){const[n,r]=O.useState(!1),s=O.useRef(null);O.useEffect(()=>{const o=a=>{s.current&&!s.current.contains(a.target)&&r(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const i=_d.find(o=>o.label===t)||_d[0];return d.jsxs("div",{className:"relative w-full",ref:s,children:[d.jsx("p",{className:"text-text-secondary text-sm font-medium mb-2 pl-1",children:"I'm looking for"}),d.jsxs("button",{onClick:()=>r(!n),className:`w-full flex items-center justify-between px-4 py-3 rounded-2xl transition-all duration-200
        bg-white/80 backdrop-blur-sm border-1.5 
        ${n?"border-primary shadow-lg shadow-primary/10":"border-primary/20 hover:border-primary"}
        `,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-xl",children:i.icon}),d.jsx("span",{className:"text-text-primary font-medium text-sm",children:i.label})]}),d.jsx("svg",{className:`w-5 h-5 text-primary transition-transform duration-200 ${n?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&d.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 z-50 animate-fade-in-up origin-top",children:d.jsx("div",{className:"bg-white/95 backdrop-blur-xl border border-primary/10 rounded-2xl shadow-xl shadow-primary/10 overflow-hidden py-1 max-h-64 overflow-y-auto",children:_d.map(o=>d.jsxs("button",{onClick:()=>{e(o.label),r(!1)},className:`w-full flex items-center justify-between px-4 py-3 text-left transition-colors
                  ${t===o.label?"bg-primary/5":"hover:bg-primary/5"}
                `,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-lg",children:o.icon}),d.jsx("span",{className:`text-sm font-medium ${t===o.label?"text-primary":"text-text-primary"}`,children:o.label})]}),t===o.label&&d.jsx("span",{className:"text-primary text-sm font-bold",children:""})]},o.label))})})]})}const KD=()=>new Promise((t,e)=>{if(!navigator.geolocation){e(new Error("Geolocation not supported"));return}navigator.geolocation.getCurrentPosition(n=>t({lat:n.coords.latitude,lng:n.coords.longitude,accuracy:n.coords.accuracy}),n=>e(n),{timeout:1e4,enableHighAccuracy:!0})}),GD=async(t,e)=>{if(!window.google||!window.google.maps)return"Unknown Location";const n=new window.google.maps.Geocoder;return new Promise(r=>{n.geocode({location:{lat:t,lng:e}},(s,i)=>{if(i==="OK"&&s[0]){const o=s[0].address_components.find(a=>a.types.includes("sublocality")||a.types.includes("locality"));r((o==null?void 0:o.long_name)||s[0].formatted_address)}else r("Your location")})})},QD=(t,e,n,r=3e3)=>new Promise((s,i)=>{if(!window.google||!window.google.maps){i(new Error("Google Maps not loaded"));return}const o=new window.google.maps.places.PlacesService(t),a={Gynecologist:{type:"doctor",keyword:"gynecologist"},Pharmacy:{type:"pharmacy",keyword:"pharmacy"},"General Physician":{type:"doctor",keyword:"physician"},"Diagnostic Lab":{type:"hospital",keyword:"diagnostic lab"},"Women's Clinic":{type:"hospital",keyword:"women clinic"},"Wellness Center":{type:"spa",keyword:"wellness"},Dentist:{type:"dentist",keyword:"dentist"},"Eye Care":{type:"doctor",keyword:"ophthalmologist"}},u=a[n]||a.Gynecologist,c={location:new window.google.maps.LatLng(e.lat,e.lng),radius:r,keyword:u.keyword,type:u.type};o.nearbySearch(c,(f,p)=>{if(p===window.google.maps.places.PlacesServiceStatus.OK&&f){const g=f.map(y=>{var _,A,k;return{id:y.place_id,name:y.name,address:y.vicinity,rating:y.rating||null,totalRatings:y.user_ratings_total||0,isOpen:((_=y.opening_hours)==null?void 0:_.isOpen())||null,location:{lat:y.geometry.location.lat(),lng:y.geometry.location.lng()},types:y.types,photo:((k=(A=y.photos)==null?void 0:A[0])==null?void 0:k.getUrl({maxWidth:400}))||null,placeId:y.place_id}});s(g)}else p==="ZERO_RESULTS"?s([]):(console.warn(`Places API status: ${p}`),s([]))})}),YD=(t,e,n)=>`https://www.google.com/maps/dir/?api=1&destination=${n?encodeURIComponent(n):`${t},${e}`}&destination_place_id=${n||""}`,JD=(t,e,n,r)=>{const i=(n-t)*Math.PI/180,o=(r-e)*Math.PI/180,a=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return(6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))).toFixed(1)};function XD(){const[t,e]=O.useState(!1),[n,r]=O.useState(null),[s,i]=O.useState("Locating..."),[o,a]=O.useState([]),[u,c]=O.useState(!1),[f,p]=O.useState(null),[g,y]=O.useState("Gynecologist"),[_,A]=O.useState(3e3),[k,I]=O.useState(null),[v,T]=O.useState(null),R=O.useRef(null);O.useEffect(()=>{if(window.google&&window.google.maps){e(!0);return}if(document.getElementById("google-maps-script")){e(!0);return}const w=document.createElement("script");w.id="google-maps-script",w.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAbxNlz1FCY_clclQXb45hdSiYRRcMyZLs&libraries=places",w.async=!0,w.onload=()=>e(!0),w.onerror=()=>p("Failed to load Google Maps API"),document.head.appendChild(w)},[]),O.useEffect(()=>{let S=!0;return KD().then(async w=>{if(S){r(w);try{if(window.google){const E=await GD(w.lat,w.lng);S&&i(E)}}catch(E){console.warn(E),S&&i("Unknown Location")}}}).catch(w=>{console.error(w),S&&(p("Location permission denied. Map centered on Chennai."),r({lat:13.0827,lng:80.2707}),i("Chennai, TN"))}),()=>{S=!1}},[t]);const L=S=>{T(S)};O.useEffect(()=>{if(!n||!v||!t)return;let S=!0;return c(!0),p(null),QD(v,n,g,_).then(w=>{if(!S)return;const E=w.map(b=>({...b,distance:JD(n.lat,n.lng,b.location.lat,b.location.lng)}));E.sort((b,P)=>parseFloat(b.distance)-parseFloat(P.distance)),a(E),c(!1)}).catch(w=>{console.error("Fetch places failed:",w),S&&(p("Could not load places. Try again."),c(!1))}),()=>{S=!1}},[n,v,g,_,t]);const M=S=>{I(S);const w=document.getElementById(`place-card-${S}`);w&&w.scrollIntoView({behavior:"smooth",block:"center"})};return f&&!t?d.jsx("div",{className:"h-screen flex items-center justify-center text-red-500",children:f}):d.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-64px)] overflow-hidden bg-[#F8F7FF] animate-fade-in relative z-0",children:[d.jsx("div",{className:"w-full lg:w-[58%] h-[40vh] lg:h-full relative shadow-[inset_-8px_0_16px_rgba(109,91,208,0.06)] z-10 order-1 lg:order-1",children:t?d.jsx(WD,{userLocation:n,places:o,activePlaceId:k,onMarkerClick:S=>M(S.id),onMapLoad:L}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-text-secondary",children:[d.jsx("div",{className:"w-8 h-8 border-4 border-primary/30 border-t-primary rounded-full animate-spin mb-2"}),d.jsx("p",{children:"Loading Map..."}),!1]})}),d.jsxs("div",{className:"w-full lg:w-[42%] flex-1 lg:h-full overflow-y-auto bg-[#F8F7FF] flex flex-col relative z-20 order-2 lg:order-2",ref:R,children:[d.jsxs("div",{className:"sticky top-0 bg-[#F8F7FF]/90 backdrop-blur-md z-30 px-5 pt-5 pb-2 border-b border-primary/5",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-bold text-text-primary",children:"Nearby Help"}),d.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:["Showing ",g,"s near you"]})]}),d.jsxs("div",{className:"bg-primary/5 border border-primary/10 rounded-full px-3 py-1 text-xs font-medium text-text-secondary flex items-center gap-1 cursor-pointer hover:bg-primary/10 transition-colors",title:"Update Location",children:[d.jsx("span",{children:""})," ",s]})]}),d.jsx("div",{className:"mb-4",children:d.jsx(qD,{selectedType:g,onSelect:y})}),d.jsxs("div",{className:"flex items-center gap-2 mb-4 overflow-x-auto pb-2 scrollbar-hide",children:[d.jsx("span",{className:"text-xs font-medium text-text-secondary mr-2",children:"Within:"}),[1e3,3e3,5e3,1e4].map(S=>d.jsxs("button",{onClick:()=>A(S),className:`px-3 py-1 rounded-full text-xs font-medium transition-all whitespace-nowrap
                             ${_===S?"bg-primary text-white shadow-md shadow-primary/20 scale-105":"bg-white border border-primary/20 text-text-secondary hover:border-primary/50"}
                           `,children:[S/1e3," km"]},S))]}),d.jsx("button",{disabled:u,onClick:()=>{},className:"w-full bg-primary text-white rounded-full py-3 text-sm font-semibold shadow-lg shadow-primary/25 hover:bg-primary/90 transition-all active:scale-[0.98] flex items-center justify-center gap-2 mb-2",children:u?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Searching..."]}):"Find Places"}),f&&d.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-xl p-3 text-xs text-red-600 mt-2",children:[f," ",d.jsx("button",{onClick:()=>window.location.reload(),className:"underline ml-1",children:"Retry"})]})]}),d.jsx("div",{className:"px-5 py-2 space-y-3 pb-24 min-h-[50vh]",children:u&&o.length===0?Array(3).fill(0).map((S,w)=>d.jsx("div",{className:"h-32 rounded-2xl bg-white/50 animate-pulse border border-white/60 mb-3"},w)):o.length===0&&!u?d.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-center animate-fade-in",children:[d.jsx("span",{className:"text-4xl mb-3 grayscale opacity-60",children:""}),d.jsx("h3",{className:"text-text-primary font-semibold",children:"No places found nearby"}),d.jsx("p",{className:"text-text-secondary text-sm px-8 mt-1",children:"Try increasing the radius to 10km."}),d.jsx("button",{onClick:()=>A(1e4),className:"mt-4 px-5 py-2 border border-primary text-primary rounded-full text-sm font-medium hover:bg-primary/5",children:"Try 10km"})]}):o.map((S,w)=>d.jsx("div",{id:`place-card-${S.id}`,className:"animate-slide-up",style:{animationDelay:`${w*50}ms`},children:d.jsx(HD,{place:S,index:w,isSelected:k===S.id,onClick:()=>M(S.id),onDirections:()=>window.open(YD(S.location.lat,S.location.lng,S.name),"_blank"),onCall:E=>window.location.href=`tel:${E}`})},S.id))})]})]})}function ZD(){const[t,e]=O.useState("EN"),[n,r]=O.useState(null),[s,i]=O.useState(!0);return O.useEffect(()=>{const o=$A(Xt,a=>{r(a),i(!1)});return()=>o()},[]),s?d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:d.jsxs("div",{className:"text-center animate-pulse",children:[d.jsx("div",{className:"w-16 h-16 border-4 border-primary/20 border-t-primary rounded-full animate-spin mx-auto mb-4"}),d.jsx("p",{className:"text-xl font-bold text-primary tracking-wide",children:"Sahachari"})]})}):d.jsx(l1,{children:d.jsxs("div",{className:"min-h-screen flex flex-col font-sans text-text-primary",children:[n&&d.jsx(uO,{language:t,setLanguage:e}),d.jsx("main",{className:"flex-grow pb-20 md:pb-0",children:d.jsxs(i1,{children:[d.jsx(jt,{path:"/",element:n?d.jsx(sn,{to:"/forum"}):d.jsx(dO,{})}),d.jsx(jt,{path:"/home",element:n?d.jsx(hO,{}):d.jsx(sn,{to:"/"})}),d.jsx(jt,{path:"/forum",element:n?d.jsx(ED,{}):d.jsx(sn,{to:"/"})}),d.jsx(jt,{path:"/forum/new",element:n?d.jsx(CD,{}):d.jsx(sn,{to:"/"})}),d.jsx(jt,{path:"/forum/:postId",element:n?d.jsx(bD,{}):d.jsx(sn,{to:"/"})}),d.jsx(jt,{path:"/symptoms",element:n?d.jsx(bO,{}):d.jsx(sn,{to:"/"})}),d.jsx(jt,{path:"/results",element:n?d.jsx(AO,{}):d.jsx(sn,{to:"/"})}),d.jsx(jt,{path:"/remedy",element:n?d.jsx(AD,{}):d.jsx(sn,{to:"/"})}),d.jsx(jt,{path:"/journal",element:n?d.jsx(OD,{}):d.jsx(sn,{to:"/"})}),d.jsx(jt,{path:"/nearby",element:n?d.jsx(XD,{}):d.jsx(sn,{to:"/"})}),d.jsx(jt,{path:"/admin-seed",element:d.jsx(BD,{})})," "]})}),n&&d.jsx("div",{className:"md:hidden",children:d.jsx(cO,{})})]})})}const ej={title:"Your health, your space",subtitle:"A safe space for women's health awareness",check_symptoms:"Check Symptoms",community:"Community Forum",remedies:"Home Remedies",journal:"My Journal",nearby:"Nearby Help"},tj={title:"How are you feeling?",subtitle:"Select symptoms you're experiencing today.",common_label:"Common Symptoms  tap to select",describe_label:"Describe in your words",placeholder:"Describe anything else you're experiencing...",analyze:"Analyze Symptoms",voice_label:"Tap to speak",voice_stop:"Tap to stop",selected:"symptoms selected"},nj={title:"Community",subtitle:"A safe space to share and listen",response_placeholder:"Share your experience or support...",post_button:"Post Anonymously"},rj={disclaimer:"This is for awareness only. Not a medical diagnosis.",see_doctor:"Consult a Doctor",loading:"Please wait...",analyzing:"Analyzing...",error:"Something went wrong",logout:"Log Out"},sj={title:"Home Remedy Checker",subtitle:"Science-backed verification for traditional wisdom.",enter_remedy:"Enter a remedy to verify",placeholder:"e.g., Ginger tea for nausea",check:"Check",checking:"Checking...",popular:"Popular Searches",verdict:"Verdict",explanation:"Explanation",scientific:"Scientific Backing",tip:"Health Tip",consulting:"Consulting medical database...",example1:"Jeera water for PCOS",example2:"Turmeric milk for cramps",example3:"Sesame seeds for periods"},ij={home:ej,symptoms:tj,forum:nj,common:rj,remedy:sj},oj={title:" ,  ",subtitle:"   ",check_symptoms:" ",community:" ",remedies:" ",journal:" ",nearby:" "},aj={title:"  ?",subtitle:"   .",common_label:" ",describe_label:"  ",placeholder:"  ...",analyze:" ",voice_label:" ",voice_stop:" ",selected:" "},lj={title:"",subtitle:"    ",response_placeholder:"  ...",post_button:""},uj={loading:"...",analyzing:"...",see_doctor:" ",disclaimer:"  .",error:" ",logout:""},cj={title:"  ",subtitle:"   ",enter_remedy:"   ",placeholder:":  ",check:"",checking:"...",popular:" ",verdict:"",explanation:"",scientific:" ",tip:" ",consulting:"  ...",example1:"  (PCOS)",example2:"  ()",example3:" ()"},dj={home:oj,symptoms:aj,forum:lj,common:uj,remedy:cj},hj={title:" ,  ",subtitle:"      ",check_symptoms:" ",community:" ",remedies:" ",journal:" ",nearby:" "},fj={title:"     ?",subtitle:"     ",common_label:" ",describe_label:"   ",placeholder:"   ...",analyze:"   ",voice_label:"    ",voice_stop:"    ",selected:"  "},pj={title:"",subtitle:"     ",response_placeholder:"   ...",post_button:" "},mj={loading:"  ...",analyzing:"   ...",see_doctor:"   ",disclaimer:"     ",error:"   ",logout:" "},gj={title:"  ",subtitle:"     ",enter_remedy:"      ",placeholder:":   ",check:"",checking:"  ...",popular:" ",verdict:"",explanation:"",scientific:" ",tip:" ",consulting:"   ...",example1:"  (PCOS)",example2:"  ()",example3:" ()"},yj={home:hj,symptoms:fj,forum:pj,common:mj,remedy:gj},vj={title:" ,  ",subtitle:"   ",check_symptoms:" ",community:" ",remedies:" ",journal:" ",nearby:" "},_j={title:" ?",subtitle:"  .",common_label:" ",describe_label:"",placeholder:"...",analyze:" ",voice_label:" ",voice_stop:" ",selected:""},wj={title:"",subtitle:"  ",response_placeholder:"  ...",post_button:" "},xj={loading:"...",analyzing:" ...",see_doctor:" ",disclaimer:"  .",error:" ",logout:" "},Ej={title:"  ",subtitle:"   ",enter_remedy:"   ",placeholder:",  ",check:"",checking:"...",popular:" ",verdict:"",explanation:"",scientific:" ",tip:" ",consulting:" ...",example1:"  (PCOS)",example2:"  ()",example3:" ()"},Sj={home:vj,symptoms:_j,forum:wj,common:xj,remedy:Ej},Tj={title:" ,  ",subtitle:"   ",check_symptoms:" ",community:" ",remedies:" ",journal:" ",nearby:" "},Ij={title:"  ?",subtitle:"   .",common_label:" ",describe_label:"",placeholder:"...",analyze:"",voice_label:"",voice_stop:"",selected:""},bj={title:"",subtitle:"  ",response_placeholder:"  ...",post_button:" "},Cj={loading:" ...",analyzing:"...",see_doctor:" ",disclaimer:"   .",error:" ",logout:" "},Aj={title:"  ",subtitle:"   ",enter_remedy:"    ",placeholder:":  ",check:" ",checking:" ...",popular:" ",verdict:"",explanation:"",scientific:" ",tip:" ",consulting:"  ...",example1:"  (PCOS)",example2:"  ()",example3:" ()"},Pj={home:Tj,symptoms:Ij,forum:bj,common:Cj,remedy:Aj},kj={title:" ,  ",subtitle:"   ",check_symptoms:" ",community:" ",remedies:"",journal:" ",nearby:" "},Nj={title:" ?",subtitle:"    .",common_label:" ",describe_label:"  ",placeholder:"...",analyze:"",voice_label:"  ",voice_stop:"  ",selected:" "},Rj={title:"",subtitle:"  ",response_placeholder:"  ...",post_button:" "},Oj={loading:"...",analyzing:"...",see_doctor:" ",disclaimer:"  .",error:" ",logout:" "},Dj={title:" ",subtitle:"   ",enter_remedy:"  ",placeholder:":  ",check:"",checking:"...",popular:" ",verdict:"",explanation:"",scientific:" ",tip:" ",consulting:"  ...",example1:"  (PCOS)",example2:"  ()",example3:" ()"},jj={home:kj,symptoms:Nj,forum:Rj,common:Oj,remedy:Dj};vt.use(Rk).init({resources:{en:{translation:ij},ta:{translation:dj},hi:{translation:yj},ml:{translation:Sj},te:{translation:Pj},kn:{translation:jj}},lng:localStorage.getItem("language")||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});wd.createRoot(document.getElementById("root")).render(d.jsx(l_.StrictMode,{children:d.jsx(ZD,{})}));
